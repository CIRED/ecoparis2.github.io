{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Layers.vue?83df","webpack:///./src/components/About.vue?410e","webpack:///./src/App.vue?fce3","webpack:///./src/components/Intro.vue?6800","webpack:///src/components/Intro.vue","webpack:///./src/components/Intro.vue?21f1","webpack:///./src/components/Intro.vue","webpack:///./src/components/Tutorial.vue?d79a","webpack:///src/components/Tutorial.vue","webpack:///./src/components/Tutorial.vue?f96f","webpack:///./src/components/Tutorial.vue","webpack:///./src/components/About.vue?b8f5","webpack:///src/components/About.vue","webpack:///./src/components/About.vue?f71c","webpack:///./src/components/About.vue","webpack:///./src/components/ZoomControl.vue?79be","webpack:///src/components/ZoomControl.vue","webpack:///./src/components/ZoomControl.vue?b509","webpack:///./src/components/ZoomControl.vue","webpack:///./src/components/LocationControl.vue?180d","webpack:///src/components/LocationControl.vue","webpack:///./src/components/LocationControl.vue?071a","webpack:///./src/components/LocationControl.vue","webpack:///./src/components/Layers.vue?17e4","webpack:///src/components/Layers.vue","webpack:///./src/components/Layers.vue?1d7e","webpack:///./src/components/Layers.vue","webpack:///./src/components/Map.vue?6ad8","webpack:///./src/shared.js","webpack:///./src/update.js","webpack:///./src/helpers.js","webpack:///./src/layers.js","webpack:///./src/shapes.js","webpack:///./src/map.js","webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?3baf","webpack:///./src/components/Map.vue","webpack:///./src/components/Sidebar.vue?06a8","webpack:///./src/components/Histogram.vue?bc7f","webpack:///src/components/Histogram.vue","webpack:///./src/components/Histogram.vue?11b6","webpack:///./src/components/Histogram.vue?d72a","webpack:///src/components/Sidebar.vue","webpack:///./src/components/Sidebar.vue?d975","webpack:///./src/components/Sidebar.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?bcb1","webpack:///./src/components/Map.vue?357b","webpack:///./src/components/Histogram.vue?f54f","webpack:///./src/components/Intro.vue?6183","webpack:///./src/components/LocationControl.vue?9aba","webpack:///./src/components/Sidebar.vue?652c","webpack:///./src/components/ZoomControl.vue?ecf3","webpack:///./src/components/Tutorial.vue?b206"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Layers_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Layers_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_About_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_About_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_15a66a4a_render","this$1","this","_vm","_h","$createElement","_c","_self","class","currentTutorialStep","attrs","id","isLoading","currentLayerLoaded","on","dismiss","introVisible","_e","aboutVisible","staticClass","currentLayerPath","layerChange","path","model","callback","$$v","expression","onLocation","loc","currentLocation","layers","zoomOut","currentZoom","zoomIn","href","click","$event","preventDefault","_v","_s","$t","isFuture","toggleFuture","newHistogram","x","y","currentHistogramX","currentHistogramY","newSchools","schoolCount","newName","interCommName","staticRenderFns","Introvue_type_template_id_37b4516e_render","_m","startFrench","startEnglish","Introvue_type_template_id_37b4516e_staticRenderFns","src","Introvue_type_script_lang_js_","props","methods","$i18n","locale","$emit","components_Introvue_type_script_lang_js_","component","componentNormalizer","options","__file","Intro","Tutorialvue_type_template_id_6f66359c_render","domProps","innerHTML","currentStepHtml","close","next","Tutorialvue_type_template_id_6f66359c_staticRenderFns","onKeyUp","e","which","keyCode","prev","Tutorialvue_type_script_lang_js_","mounted","document","body","addEventListener","beforeDestroy","removeEventListener","computed","concat","watch","components_Tutorialvue_type_script_lang_js_","Tutorial_component","Tutorial","Aboutvue_type_template_id_8316a872_render","Aboutvue_type_template_id_8316a872_staticRenderFns","Aboutvue_type_script_lang_js_","components_Aboutvue_type_script_lang_js_","About_component","About","ZoomControlvue_type_template_id_5ddc0a45_render","ZoomControlvue_type_template_id_5ddc0a45_staticRenderFns","ZoomControlvue_type_script_lang_js_","components_ZoomControlvue_type_script_lang_js_","ZoomControl_component","ZoomControl","LocationControlvue_type_template_id_67ed561b_render","locate","search","active","searchExpanded","toggleSearch","ref","type","keyup","LocationControlvue_type_template_id_67ed561b_staticRenderFns","LocationControlvue_type_script_lang_js_","_this","api","google","maps","places","Autocomplete","$refs","searchInput","setFields","setOptions","strictBounds","setBounds","north","config","viewport","topLatitude","south","bottomLatitude","west","leftLongitude","east","rightLongitude","addListener","place","getPlace","geometry","location","lat","lng","_this2","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","focus","components_LocationControlvue_type_script_lang_js_","LocationControl_component","LocationControl","Layersvue_type_template_id_22317917_render","_l","layer","hidden","style","background","active_color","color","title","select","loaded","Layersvue_type_template_id_22317917_staticRenderFns","Layersvue_type_script_lang_js_","loading","components_Layersvue_type_script_lang_js_","Layers_component","Layers","Mapvue_type_template_id_3cee02f9_render","hasFutureAvailable","futureColor","presentColor","backgroundColor","forestColor","waterColor","greenColor","currentUnit","Mapvue_type_template_id_3cee02f9_staticRenderFns","cachedLayers","map","mapElement","currentGeoLat","currentGeoLng","svg_EV","svg_circle_EV","interComms","voronoi","imgs","imgs_EV","update_parameters","markerElement","canvas","voronoi_shape","interComm_shape","firstVoronoiByInterComm","pathGenerator","defs_path","legend_element","color_legend_canvas","color_legend_svg","onSchools","onHistChange","onNewName","highlightedInterComm","initialBounds","markerIcon","lastMouseDownX","lastMouseDownY","voronoiContainment","interCommContainment","showCirclePreview","showFutureInsteadOfEV","lastMousePosition","currentChartIndex","currentChartIndexIsVoronoi","shared","_cachedLayers$current","Config","require","update_clip","clip_projectPoint","default_tl_point","latLngToLayerPoint","tl_lat","tl_lng","default_br_point","br_lat","br_lng","width","height","point","L","latLng","tx","ty","stream","clip_transform","d3","geo","transform","clip_path","projection","attr","update_EV_preview","mouseX","mouseY","updateCirclePreviewPath","layer_path","currentCircleLayerPath","svg_width","parseInt","substr","svg_height","svg_circle_width","svg_circle_height","magnifyingRatio","tl","br","tl_pixels","latLngToContainerPoint","pixels_on_left","pixels_on_top","magnified_tl_pixels","image_width","image_height","update_chart","layerURL","voro","info","future","entire_hist","voronoi_hist","interComm_hist","Urban_cooling","helpers_f","range","update_text_school","Ecole_path","pop","updateMarker","iconAnchor","updateMap","hide","console","log","color_present","color_future","EV_path","color_ev","updateCirclePreviewLayer","url","update","colorSchemeDict","0","interpolateOranges","1","interpolateRdBu","2","interpolateBlues","3","interpolateGnBu","4","interpolateRdYlGn","loadContainmentFile","fetch","then","res","json","JSON","parse","MAP_TILES","MAP_ATTRIB","createMap","element","zoomControl","fitBounds","setMaxBounds","getBounds","pad","base","tileLayer","minZoom","maxZoom","attribution","addTo","setView","LatLng","getZoom","isWithinParis","features","some","geoContains","setLocation","update_f","getColorsFromScheme","colorSchemeId","currentScheme","fillScale","scale_canvas","scale_svg","colorScale","minValue","maxValue","invertColorScheme","legendHeight","legendWidth","margin","top","right","bottom","left","node","ctx","getContext","legendScale","image","createImageData","rgb","g","b","putImageData","domain","legendAxis","axisRight","scale","scaleLinear","tickSize","ticks","svg","computeColorRange","percentiles","colors","domain_percentiles","unshift","domainLength","rangeLength","intermediateDomain","intermediateScale","linear","range_out","blankStyle","feature","opacity","fillOpacity","handleKeyEvent","charCode","helpers","loadLayer","truePath","pixels","tempContext","len","workersCount","finished","segmentLength","blockSize","voronoi_means","voronoi_counts","interComm_means","interComm_counts","onWorkEnded","canvasData","index","interComm_counts_portion","interComm_means_portion","voronoi_counts_portion","voronoi_means_portion","firstVoronoiByInterCommPortion","voronoi_hist_portion","interComm_hist_portion","hist_buckets","toDataURL","useColorScheme","colorScheme","layerUrl","domain_range","domain_continuous","range_continuous","worker","Worker","onmessage","getImageData","postMessage","voronoiContainmentData","interCommContainmentData","numVoronois","numInterComms","colorDomain","colorRange","setLayer","layerPath","currentGaoLng","_","min_value","max_value","setEVLayer","src_layers","oneIfInInterComm","interCommIndex","oneIfInInterComm_","defineVoronoi","emptyOpacity","fullOpacity","append","selectAll","enter","datum","properties","nomgroup","event","clientX","clientY","getBoundingClientRect","defineInterComms","fadedOpacity","Math","abs","BBox","getBBox","neBound","layerPointToLatLng","swBound","latLngBounds","shapes","src_map","EV_svg_element","EV_circle_svg_element","error","default_tl","default_br","setLocationFromCurrent","geoJson","projectPoint","defs","shape_EV","shapes_f","iconUrl","iconSize","createElement","layers_f","Mapvue_type_script_lang_js_","zoomMinus","zoomPlus","isEspacesVerts","currentLayerId","currentYear","Date","getFullYear","urlInterComm","urlVoronoi","urlInterCommContainment","urlVoronoiContainment","queue","defer","await","v","_displayMap","circle_svg","legend","_displayMap2","slicedToArray","keys","forEach","_ref","_ref2","after","before","components_Mapvue_type_script_lang_js_","Map_component","Map","Sidebarvue_type_template_id_4301fe4f_render","count","Sidebarvue_type_template_id_4301fe4f_staticRenderFns","alt","Histogramvue_type_template_id_101ab712_render","Histogramvue_type_template_id_101ab712_staticRenderFns","Histogramvue_type_script_lang_js_","updateChart","innerWidth","innerHeight","rangeRound","xAxis","yAxis","xLegend","text","xData","yData","currentLayer","layerScale","hist_legend","nonZero","filter","xMin","xMax","yMax","max","xs","ys","axisLeft","axisBottom","tickFormat","toPrecision","tickPadding","bars","merge","ceil","exit","remove","components_Histogramvue_type_script_lang_js_","Histogram_component","Histogram","Sidebarvue_type_script_lang_js_","components","components_Sidebarvue_type_script_lang_js_","Sidebar_component","Sidebar","defaultLayerPath","Appvue_type_script_lang_js_","reduce","sidebarVisible","logKey","src_Appvue_type_script_lang_js_","App_component","App","Vue","productionTip","use","VueI18n","render","h","i18n","messages","fr","en","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Map_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Map_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Histogram_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Histogram_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Intro_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Intro_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LocationControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LocationControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Sidebar_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Sidebar_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ZoomControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ZoomControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Tutorial_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Tutorial_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/app.1e5e0e2b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:[(\"tutorial-\" + _vm.currentTutorialStep)],attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.introVisible)?_c('Intro',{attrs:{\"isLoading\":!_vm.currentLayerLoaded},on:{\"dismiss\":function () { return _vm.introVisible = false; }}}):_vm._e()],1),(_vm.aboutVisible)?_c('About',{on:{\"dismiss\":function () { return _vm.aboutVisible = false; }}}):_vm._e(),_c('section',{staticClass:\"horizontal-split\"},[_c('Tutorial',{attrs:{\"currentLayerPath\":_vm.currentLayerPath},on:{\"layerChange\":function (path) { return this$1.currentLayerPath = path; }},model:{value:(_vm.currentTutorialStep),callback:function ($$v) {_vm.currentTutorialStep=$$v},expression:\"currentTutorialStep\"}}),_c('section',{staticClass:\"vertical-split\"},[_c('section',{staticClass:\"menu\"},[_c('LocationControl',{attrs:{\"onLocation\":function (loc) { return this$1.currentLocation = loc; }}}),_c('Layers',{attrs:{\"layers\":_vm.layers},model:{value:(_vm.currentLayerPath),callback:function ($$v) {_vm.currentLayerPath=$$v},expression:\"currentLayerPath\"}}),_c('ZoomControl',{on:{\"zoomOut\":function () { return _vm.currentZoom -= 1; },\"zoomIn\":function () { return _vm.currentZoom += 1; }}}),_c('a',{staticClass:\"about-button\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.aboutVisible = true; })($event)}}},[_vm._v(_vm._s(_vm.$t('titles.credits')))])],1),_c('Map',{attrs:{\"layers\":_vm.layers,\"currentLayerPath\":_vm.currentLayerPath,\"currentLocation\":_vm.currentLocation,\"currentZoom\":_vm.currentZoom,\"isFuture\":_vm.isFuture},on:{\"toggleFuture\":function () { return _vm.isFuture ^= true; },\"newHistogram\":function (x, y) {this$1.currentHistogramX = x; this$1.currentHistogramY = y;},\"newSchools\":function (n) { return this$1.schoolCount = n; },\"newName\":function (n) { return this$1.interCommName = n; }}}),_c('Sidebar',{attrs:{\"layers\":_vm.layers,\"currentLayerPath\":_vm.currentLayerPath,\"currentHistogramX\":_vm.currentHistogramX,\"currentHistogramY\":_vm.currentHistogramY,\"schoolCount\":_vm.schoolCount,\"interCommName\":_vm.interCommName}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"intro\"},[_vm._m(0),_c('p',[_vm._v(\"Dcouvrez l'influence de la nature sur votre vie  Paris.\")]),_c('section',{staticClass:\"buttons\"},[(_vm.isLoading)?_c('a',{staticClass:\"button loading\"},[_vm._v(\"Chargement\")]):[_c('a',{staticClass:\"button\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.startFrench($event)}}},[_c('i',{staticClass:\"flag-icon flag-icon-fr\"}),_vm._v(\" Commencer la visite\")]),_c('a',{staticClass:\"button\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.startEnglish($event)}}},[_c('i',{staticClass:\"flag-icon flag-icon-us\"}),_vm._v(\" Get started\")])]],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',[_vm._v(\"\\n    EcoParis\\n    \"),_c('img',{attrs:{\"src\":\"assets/parrot.svg\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"intro\">\n    <h1>\n      EcoParis\n      <img src=\"assets/parrot.svg\">\n    </h1>\n\n    <p>Dcouvrez l'influence de la nature sur votre vie  Paris.</p>\n\n    <section class=\"buttons\">\n      <a v-if=\"isLoading\" class=\"button loading\">Chargement</a>\n      <template v-else>\n        <a @click.prevent=\"startFrench\" href=\"#\" class=\"button\"><i class=\"flag-icon flag-icon-fr\"></i> Commencer la visite</a>\n        <a @click.prevent=\"startEnglish\" href=\"#\" class=\"button\"><i class=\"flag-icon flag-icon-us\"></i> Get started</a>\n      </template>\n    </section>\n  </section>\n</template>\n\n<script>\nexport default {\n  props: ['isLoading'],\n  methods: {\n    startFrench() {\n      this.$i18n.locale = 'fr'\n      this.$emit('dismiss')\n    },\n    startEnglish() {\n      this.$i18n.locale = 'en'\n      this.$emit('dismiss')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n/** Flags from https://github.com/lipis/flag-icon-css. **/\n$flag-path: '../../public/assets';\n\n.flag-icon-background {\n  background-size: contain;\n  background-position: 50%;\n  background-repeat: no-repeat;\n}\n\n.flag-icon {\n  @extend .flag-icon-background;\n  position: relative;\n  display: inline-block;\n  width: 1em;\n  margin-right: 0.4em;\n  line-height: 1em;\n  border-radius: 3px;\n  &:before {\n    content: '\\00a0';\n  }\n}\n\n@mixin flag-icon($country) {\n  .flag-icon-#{$country} {\n    background-image: url(#{$flag-path}/flag-#{$country}.svg);\n  }\n}\n\n@include flag-icon('fr');\n@include flag-icon('us');\n\n/** Introduction page. **/\n.intro {\n  z-index: 2000;\n  position: fixed;\n  display: flex;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  color: #fff;\n  background: linear-gradient(120deg, rgba(#84fab0, .98) 10%, rgba(#8fd3f4, .98) 100%);\n}\n\n.intro.fade-enter-active, .intro.fade-leave-active {\n  transition: opacity .3s;\n}\n\n.intro.fade-enter, .intro.fade-leave-to {\n  opacity: 0;\n}\n\n.intro h1, .intro p {\n  text-shadow: 0 0 2px rgba(0, 0, 0, .4);\n}\n\n.intro h1 {\n  font-family: 'Cedarville Cursive';\n  font-size: 38pt;\n  margin: 0 0 -.3rem;\n  position: relative;\n}\n\n.intro h1 img {\n  position: absolute;\n  width: 64px;\n  top: -8px;\n  right: -30px;\n}\n\n.intro p {\n  font-size: 21pt;\n  margin: 0;\n}\n\n.intro .buttons {\n  margin-top: 50px;\n}\n\n.intro .button {\n  margin-left: 10px;\n  margin-right: 10px;\n}\n\n.intro .button.loading {\n  cursor: not-allowed;\n\n  &:before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    background: rgba(#fff, .2);\n    animation: loading 4s infinite ease-in-out;\n  }\n}\n\n@keyframes loading {\n  0% {\n    left: 0;\n    width: 0%;\n  }\n\n  50% {\n    left: 0;\n    width: 100%;\n  }\n\n  100% {\n    left: 100%;\n    width: 0%;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Intro.vue?vue&type=template&id=37b4516e&\"\nimport script from \"./Intro.vue?vue&type=script&lang=js&\"\nexport * from \"./Intro.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Intro.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Intro.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"tutorial\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.currentStepHtml)}}),_c('a',{staticClass:\"button dark\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.close($event)}}},[_c('span',{staticClass:\"keycap\"},[_vm._v(\"ESC\")]),_vm._v(\" \"+_vm._s(_vm.$t('skip')))]),(_vm.value < 12)?_c('a',{staticClass:\"button dark full\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.next($event)}}},[_c('span',{staticClass:\"keycap\"},[_vm._v(\"\")]),_vm._v(\" \"+_vm._s(_vm.$t('next')))]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"tutorial\">\n    <p v-html=\"currentStepHtml\"></p>\n\n    <a href=\"#\" @click.prevent=\"close\" class=\"button dark\"><span class=\"keycap\">ESC</span> {{ $t('skip') }}</a>\n    <a v-if=\"value < 12\" href=\"#\" @click.prevent=\"next\" class=\"button dark full\"><span class=\"keycap\">&rarr;</span> {{ $t('next') }}</a>\n  </section>\n</template>\n\n<script>\n/**\n * Handles key presses to ESC,  and .\n */\nfunction onKeyUp(e) {\n  if (e && (e.which || e.keyCode) == 37) {\n    this.prev()\n  } else if (e && (e.which || e.keyCode) == 39) {\n    this.next()\n  } else if (e && (e.which || e.keyCode) == 27) {\n    this.close()\n  }\n}\n\nexport default {\n  props: ['value', 'currentLayerPath'],\n\n  mounted() {\n    // We have to register an event listener on the body to catch all keys.\n    document.body.addEventListener('keyup', onKeyUp.bind(this))\n  },\n\n  beforeDestroy() {\n    // Don't forget to remove the event listener before destroying the component.\n    document.body.removeEventListener('keypress', onKeyUp.bind(this))\n  },\n\n  methods: {\n    prev() {\n      if (this.value > 1) {\n        this.$emit('input', this.value - 1)\n      }\n    },\n\n    next() {\n      if (this.value == 5) {\n        // On step 5, going to the next step is equivalent to changing the layer to \"Nappe\".\n        this.$emit('layerChange', 'data/rasters/L_ref.json')\n      } else if (this.value == 11) {\n        // On step 11, going to the next step is equivalent to changing the layer to \"Hotspots\".\n        this.$emit('layerChange', 'data/rasters/correlation_ref.json')\n      } else if (this.value == 12) {\n        // Step 12 is the last step.\n        this.close()\n      } else {\n        this.$emit('input', this.value + 1)\n      }\n    },\n\n    close() {\n      this.$emit('input', null)\n    },\n  },\n\n  computed: {\n    currentStepHtml() {\n      return this.$t(`tutorial.${this.value || 12}`)\n    }\n  },\n\n  watch: {\n    currentLayerPath(path) {\n      if (this.value == 5 && path == 'data/rasters/L_ref.json') {\n        // Go to step 6 if we were in step 5 and the \"Nappe\" layer was chosen.\n        this.$emit('input', 6)\n      } else if (this.value == 11 && path == 'data/rasters/correlation_ref.json') {\n        // Go to step 12 if we were in step 11 and the \"Hotspots\" layer was chosen.\n        this.$emit('input', 12)\n      }\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\">\n#app:before {\n  content: '';\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 550;\n  background: rgba(#000, .4);\n}\n\n#app.tutorial-null:before {\n  display: none;\n}\n\n.keycap {\n  display: inline-block;\n  border: 1px solid #000;\n  padding: 2px 4px;\n  font-size: 0.8em;\n  line-height: 1em;\n  border-radius: 5px;\n  margin: 0 5px;\n}\n\n.tutorial {\n  display: flex;\n  flex-shrink: 0;\n  z-index: 1500;\n  align-items: center;\n  background: #fff;\n  box-shadow: 0 2px 4px rgba(#000, .2);\n  height: 68px;\n  box-sizing: border-box;\n  padding: 0 20px;\n\n  transition: margin-top .5s, visibility 1s;\n\n  .tutorial-null & {\n    margin-top: -70px;\n    visibility: hidden;\n  }\n}\n\n.tutorial p {\n  font-family: 'IBM Plex Sans', sans-serif;\n  font-size: 0.85em;\n  flex-grow: 1;\n  text-align: center;\n  margin: 0;\n}\n\n.tutorial .button {\n  font-size: 0.85em;\n  margin: 0;\n  margin-left: 15px;\n  flex-shrink: 0;\n  text-align: center;\n\n  .keycap {\n    margin: 0 10px 0 0;\n  }\n\n  &:last-child .keycap {\n    position: relative;\n    border-color: #fff;\n    padding-top: 1px;\n    padding-bottom: 3px;\n    top: -2px;\n  }\n}\n\n@mixin cover($rt: -1px, $rl: -1px, $rr: -1px, $rb: -1px) {\n  content: '';\n  display: block;\n  position: absolute;\n  top: $rt;\n  left: $rl;\n  right: $rr;\n  bottom: $rb;\n}\n\n/** Highlights for the different steps. */\n.tutorial-2 .map {\n  z-index: 1000;\n  position: relative;\n\n  &:before {\n    @include cover;\n    z-index: 10001;\n    box-shadow: inset 0 0 100px rgba(#000, .3);\n  }\n}\n\n.tutorial-3 .legend {\n  z-index: 1000;\n  box-shadow: 0 0 4px rgba(#000, .3);\n}\n\n.tutorial-4 .menu {\n  z-index: 1000;\n  \n  .zoom-control, .location-control, .layers {\n    box-shadow: 0 0 4px rgba(#000, .3);\n  }\n}\n\n.tutorial-5 .menu {\n  z-index: 1000;\n\n  .layers, .location-control, .zoom-control, .about-button {\n    position: relative;\n\n    &:before {\n      z-index: 1100;\n      @include cover;\n      background: rgba(#000, .4);\n    }\n  }\n\n  .layers [title=\"data/rasters/L_ref.json\"] {\n    z-index: 1500;\n    background: #fff;\n  }\n}\n\n.tutorial-6 .sidebar {\n  z-index: 1000;\n}\n\n.tutorial-7 .year {\n  z-index: 1000;\n  box-shadow: 0 0 4px rgba(#000, .3);\n}\n\n#app.tutorial-8:before {\n  display: none;\n}\n\n#app.tutorial-9:before {\n  display: none;\n}\n\n#app.tutorial-10:before {\n  display: none;\n}\n\n.tutorial-11 .menu {\n  z-index: 1000;\n\n  .layers, .location-control, .zoom-control, .about-button {\n    position: relative;\n\n    &:before {\n      z-index: 1100;\n      @include cover;\n      background: rgba(#000, .4);\n    }\n  }\n\n  .layers [title=\"data/rasters/correlation_ref.json\"] {\n    z-index: 1500;\n    background: #fff;\n  }\n}\n\n#app.tutorial-12:before {\n  display: none;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tutorial.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tutorial.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tutorial.vue?vue&type=template&id=6f66359c&\"\nimport script from \"./Tutorial.vue?vue&type=script&lang=js&\"\nexport * from \"./Tutorial.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tutorial.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Tutorial.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about-wrapper\"},[_c('a',{staticClass:\"about-close\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.$emit('dismiss')}}},[_vm._v(\"X\")]),_c('section',{staticClass:\"about-box\"},[_c('h2',[_vm._v(_vm._s(_vm.$t('credits.title')))]),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.what'))}}),_c('ul',[_c('li',[_vm._v(_vm._s(_vm.$t('credits.alex')))]),_c('li',[_vm._v(_vm._s(_vm.$t('credits.karthi')))]),_c('li',[_vm._v(_vm._s(_vm.$t('credits.romain')))])]),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.collaborators'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.credits-1'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.credits-2'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.thanks'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.logo'))}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"about-wrapper\">\n        <a href=\"#\" class=\"about-close\" @click.prevent=\"$emit('dismiss')\">X</a>\n        \n        <section class=\"about-box\">\n            <h2>{{ $t('credits.title') }}</h2>\n            <p v-html=\"$t('credits.what')\"></p>\n            <ul>\n                <li>{{ $t('credits.alex') }}</li>\n                <li>{{ $t('credits.karthi') }}</li>\n                <li>{{ $t('credits.romain') }}</li>\n            </ul>\n            <p v-html=\"$t('credits.collaborators')\"></p>\n            <p v-html=\"$t('credits.credits-1')\"></p>\n            <p v-html=\"$t('credits.credits-2')\"></p>\n            <p v-html=\"$t('credits.thanks')\"></p>\n            <p v-html=\"$t('credits.logo')\"></p>\n        </section>\n    </div>\n</template>\n\n<script>\nexport default {}\n</script>\n\n<style lang=\"scss\">\n.about-wrapper {\n    width: 45%;\n    height: 60%;\n    position: fixed;\n    top: 20%;\n    left: 18%;\n    z-index: 500;\n}\n\n.about-box {\n    width: 100%;\n    height: 100%;\n    box-shadow: 0 0 4px rgba(0, 0, 0, .2);\n    background: #fff;\n    padding: 40px;\n    box-sizing: border-box;\n    overflow: auto;\n\n    h2 {\n        margin-top: 0;\n    }\n\n    li {\n        font-size: .9em;\n    }\n\n    &:after {\n        content: \"\";\n        display: block;\n        height: 40px;\n        width: 100%;\n    }\n}\n\n.about-close {\n    height: 40px;\n    width: 40px;\n    box-shadow: -2px 0 2px rgba(#000, .2);\n    background: #fff;\n    outline: none;\n    font-size: 14pt;\n    line-height: 40px;\n    text-align: center;\n    text-decoration: none;\n    color: #000;\n    position: absolute;\n    left: -40px;\n    top: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./About.vue?vue&type=template&id=8316a872&\"\nimport script from \"./About.vue?vue&type=script&lang=js&\"\nexport * from \"./About.vue?vue&type=script&lang=js&\"\nimport style0 from \"./About.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"About.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"zoom-control\"},[_c('a',{staticClass:\"minus\",on:{\"click\":function($event){$event.preventDefault();_vm.$emit('zoomOut')}}},[_vm._v(\"-\")]),_c('a',{staticClass:\"plus\",on:{\"click\":function($event){$event.preventDefault();_vm.$emit('zoomIn')}}},[_vm._v(\"+\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"zoom-control\">\n    <a class=\"minus\" @click.prevent=\"$emit('zoomOut')\">-</a>\n    <a class=\"plus\" @click.prevent=\"$emit('zoomIn')\">+</a>\n  </section>\n</template>\n\n<script>\nexport default {}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.zoom-control {\n  width: 80px;\n\n  a {\n    cursor: pointer;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ZoomControl.vue?vue&type=template&id=5ddc0a45&\"\nimport script from \"./ZoomControl.vue?vue&type=script&lang=js&\"\nexport * from \"./ZoomControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ZoomControl.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ZoomControl.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"location-control\"},[_c('a',{staticClass:\"locate\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.locate($event)}}},[_c('i',{staticClass:\"fas fa-map-marker-alt\"})]),_c('div',{class:{search: true, active: _vm.searchExpanded}},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleSearch($event)}}},[(_vm.searchExpanded)?_c('i',{staticClass:\"fas fa-search-minus\"}):_c('i',{staticClass:\"fas fa-search-location\"})]),_c('input',{ref:\"searchInput\",staticClass:\"autocomplete\",attrs:{\"type\":\"text\"},on:{\"keyup\":function($event){if(!('button' in $event)&&$event.keyCode!==27){ return null; }_vm.searchExpanded = false}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"location-control\">\n    <a href=\"#\" class=\"locate\"\n        @click.prevent=\"locate\">\n      <i class=\"fas fa-map-marker-alt\"></i>\n    </a>\n    <div :class=\"{search: true, active: searchExpanded}\">\n      <a href=\"#\" @click.prevent=\"toggleSearch\">\n        <i v-if=\"searchExpanded\" class=\"fas fa-search-minus\"></i>\n        <i v-else class=\"fas fa-search-location\"></i>\n      </a>\n      <input type=\"text\" class=\"autocomplete\" ref=\"searchInput\"\n        @keyup.27=\"searchExpanded = false\">\n    </div>\n  </section>\n</template>\n\n<script>\nimport Config from '../config.json'\n\nexport default {\n  props: ['onLocation'],\n\n  data: () => ({\n    searchExpanded: false\n  }),\n\n  mounted() {\n    const api = new google.maps.places.Autocomplete(this.$refs.searchInput)\n    api.setFields(['geometry'])\n    api.setOptions({strictBounds: true})\n    api.setBounds({\n      north: Config.viewport.topLatitude,\n      south: Config.viewport.bottomLatitude,\n      west: Config.viewport.leftLongitude,\n      east: Config.viewport.rightLongitude,\n    })\n\n    api.addListener('place_changed', () => {\n      const place = api.getPlace()\n\n      if (!place.geometry) {\n        this.onLocation(null, null)\n        return\n      }\n\n      this.searchExpanded = false\n      this.onLocation([\n        place.geometry.location.lat(),\n        place.geometry.location.lng()\n      ])\n    })\n  },\n\n  methods: {\n    locate() {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(pos => {\n          if (pos){\n            this.onLocation([pos.coords.latitude, pos.coords.longitude])\n          }\n        })\n      }\n    },\n\n    toggleSearch() {\n      this.searchExpanded ^= true\n      this.$refs.searchInput.focus()\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.location-control a i {\n  color: #111;\n  font-size: 18px;\n}\n\n.location-control .search {\n  display: flex;\n  align-items: center;\n\n  a {\n    border: 0 !important;\n  }\n\n  .autocomplete {\n    transition: width .25s;\n    height: 30px;\n    width: 0;\n    padding: 0;\n    border: 0 none;\n  }\n}\n\n.location-control .search.active .autocomplete {\n  width: 300px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LocationControl.vue?vue&type=template&id=67ed561b&\"\nimport script from \"./LocationControl.vue?vue&type=script&lang=js&\"\nexport * from \"./LocationControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LocationControl.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"LocationControl.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"layers\"},[_c('h3',[_vm._v(_vm._s(_vm.$t('titles.layers')))]),_c('div',{staticClass:\"buttons\"},_vm._l((_vm.layers),function(layer,path){return (!layer.hidden)?_c('a',{key:path,class:{ active: _vm.value == layer.path },style:({'background': _vm.value == layer.path ? layer.active_color : layer.color}),attrs:{\"title\":path},on:{\"click\":function($event){$event.preventDefault();_vm.select(layer)}}},[_c('span',{staticClass:\"icon\",domProps:{\"innerHTML\":_vm._s(_vm.$t((\"layers.\" + (layer.id) + \".icon\")))}}),_c('span',[_vm._v(_vm._s(_vm.$t((\"layers.\" + (layer.id) + \".name\"))))]),(!layer.loaded)?_c('div',{staticClass:\"loader-tile-grid\"},[_c('div',{staticClass:\"loader-tile loader-tile1\"}),_c('div',{staticClass:\"loader-tile loader-tile2\"}),_c('div',{staticClass:\"loader-tile loader-tile3\"}),_c('div',{staticClass:\"loader-tile loader-tile4\"}),_c('div',{staticClass:\"loader-tile loader-tile5\"}),_c('div',{staticClass:\"loader-tile loader-tile6\"}),_c('div',{staticClass:\"loader-tile loader-tile7\"}),_c('div',{staticClass:\"loader-tile loader-tile8\"}),_c('div',{staticClass:\"loader-tile loader-tile9\"})]):_vm._e()]):_vm._e()}))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"layers\">\n    <h3>{{ $t('titles.layers') }}</h3>\n\n    <div class=\"buttons\">\n      <a v-for=\"(layer, path) in layers\"\n        v-if=\"!layer.hidden\"\n        :style=\"{'background': value == layer.path ? layer.active_color : layer.color}\"\n        :key=\"path\"\n        :title=\"path\"\n        :class=\"{ active: value == layer.path }\"\n\n        @click.prevent=\"select(layer)\">\n        <span class=\"icon\" v-html=\"$t(`layers.${layer.id}.icon`)\"></span>\n        <span>{{ $t(`layers.${layer.id}.name`) }}</span>\n\n        <div v-if=\"!layer.loaded\" class=\"loader-tile-grid\">\n          <div class=\"loader-tile loader-tile1\"></div>\n          <div class=\"loader-tile loader-tile2\"></div>\n          <div class=\"loader-tile loader-tile3\"></div>\n          <div class=\"loader-tile loader-tile4\"></div>\n          <div class=\"loader-tile loader-tile5\"></div>\n          <div class=\"loader-tile loader-tile6\"></div>\n          <div class=\"loader-tile loader-tile7\"></div>\n          <div class=\"loader-tile loader-tile8\"></div>\n          <div class=\"loader-tile loader-tile9\"></div>\n        </div>\n      </a>\n    </div>\n  </section>\n</template>\n\n<script>\nexport default {\n  props: ['layers', 'value'],\n\n  methods: {\n    select(layer) {\n      if (!layer.loading) {\n        this.$emit('input', layer.path)\n      }\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.layers {\n  max-height: 600px;\n  height: 80%;\n  width: 80px;\n  border: 1px solid #bbb;\n  box-shadow: 0 0 3px rgba(#000, .1);\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n}\n\n.layers .buttons {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.layers h3, .layers a {\n  text-transform: uppercase;\n}\n\n.layers h3 {\n  width: 100%;\n  margin: 0;\n  padding: 7px 0;\n}\n\n.layers a {\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  outline: none;\n  cursor: pointer;\n\n  height: 80px;\n  text-decoration: none;\n  border-bottom: 1px solid #bbb;\n  color: #333;\n  font-size: 10pt;\n\n  &.active {\n    background: #f3f3f3;\n    box-shadow: inset 0 0 2px rgba(0, 0, 0, .1);\n  }\n\n  &:first-child {\n    border-top: 1px solid #bbb;\n  }\n\n  .icon {\n    font-size: 1rem;\n    margin-bottom: 3px;\n  }\n}\n\n// Source: http://tobiasahlin.com/spinkit/\n.loader-tile-grid {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  cursor: not-allowed;\n}\n\n.loader-tile-grid .loader-tile {\n  width: 33%;\n  height: 33%;\n  background-color: #0002;\n  float: left;\n\n  animation: loader-tileGridScaleDelay 1.3s infinite ease-in-out;\n}\n\n.loader-tile-grid .loader-tile1 { animation-delay: 0.2s; }\n.loader-tile-grid .loader-tile2 { animation-delay: 0.3s; }\n.loader-tile-grid .loader-tile3 { animation-delay: 0.4s; }\n.loader-tile-grid .loader-tile4 { animation-delay: 0.1s; }\n.loader-tile-grid .loader-tile5 { animation-delay: 0.2s; }\n.loader-tile-grid .loader-tile6 { animation-delay: 0.3s; }\n.loader-tile-grid .loader-tile7 { animation-delay: 0s; }\n.loader-tile-grid .loader-tile8 { animation-delay: 0.1s; }\n.loader-tile-grid .loader-tile9 { animation-delay: 0.2s; }\n\n@keyframes loader-tileGridScaleDelay {\n  0%, 70%, 100% {\n    transform: scale3D(1, 1, 1);\n  } 35% {\n    transform: scale3D(0, 0, 1);\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Layers.vue?vue&type=template&id=22317917&\"\nimport script from \"./Layers.vue?vue&type=script&lang=js&\"\nexport * from \"./Layers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Layers.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Layers.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map-container\"},[_c('section',{ref:\"map\",staticClass:\"map\"}),_c('svg',{ref:\"circle_svg\",staticClass:\"EV-circle-svg\"}),_c('svg',{ref:\"svg\",staticClass:\"EV-svg\"}),(_vm.hasFutureAvailable && !_vm.isFuture)?_c('section',{staticClass:\"year\"},[_c('p',[_vm._v(\"2012\")]),_c('a',{style:({'color': _vm.futureColor}),attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.$emit('toggleFuture'); })($event)}}},[_c('i',{staticClass:\"fas fa-fast-forward\"})])]):(_vm.hasFutureAvailable)?_c('section',{staticClass:\"year\"},[_c('p',[_vm._v(\"2030\")]),_c('a',{style:({'color': _vm.presentColor}),attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.$emit('toggleFuture'); })($event)}}},[_c('i',{staticClass:\"fas fa-fast-backward\"})])]):_vm._e(),_c('section',{staticClass:\"legend\"},[_c('div',{ref:\"legend\",staticClass:\"legend-inner\"}),(_vm.isEspacesVerts)?_c('section',[_c('h3',[_vm._v(_vm._s(_vm.$t('legend.natural-spaces')))]),_c('figure',[_c('div',{staticClass:\"item\",style:({backgroundColor: _vm.forestColor})}),_c('figcaption',{domProps:{\"innerHTML\":_vm._s(_vm.$t('legend.wood'))}})]),_c('figure',[_c('div',{staticClass:\"item\",style:({backgroundColor: _vm.waterColor})}),_c('figcaption',{domProps:{\"innerHTML\":_vm._s(_vm.$t('legend.water'))}})]),_c('figure',[_c('div',{staticClass:\"item\",style:({backgroundColor: _vm.greenColor})}),_c('figcaption',{domProps:{\"innerHTML\":_vm._s(_vm.$t('legend.leisure'))}})])]):(_vm.currentUnit)?_c('section',[_c('p',[_vm._v(\"(\"+_vm._s(_vm.currentUnit)+\")\")])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//this file contains a set of variables. Those variables should be treated as global variables, and can be used anywhere\n//used because otherwise, we would have either a 800 lines file, or 15 parameters functions...\n\nvar cachedLayers = {} //placehoder for the layers, to compute them only once\n\nvar currentLayerPath = \"\" //path of the currently selected layer\n\nvar map = null //reference to the leaflet map\n\nvar mapElement = null\n\nvar currentGeoLat = null //current latitude of the cursor\n\nvar currentGeoLng = null //current longitude of the cursos\n\nvar svg_EV = null //reference to the svg of the \"espaces verts\"\n\nvar svg_circle_EV = null //reference to the svg of the circle around the cursot\n\nvar interComms = null //reference to the interComms element, i.e. a d3.selectAll(\"path\")\n\nvar voronoi = null //reference to the voronoi element, i.e. a d3.selectAll(\"path\")\n\nvar imgs = null //reference to the current layer image, i.e. a d3.selectAll(\"image\")\n\nvar imgs_EV = null //reference to the \"espaces verts\" image, i.e. a d3.selectAll(\"image\")\n\nvar update_parameters = {} //parameters used by the update function, such as tl/br coordinates, or a \"hide\" boolean\n\nvar markerElement = null //reference to marker element, i.e. a d3.selectAll(\"image\")\n\nvar canvas = null //reference to the canvas used to generate layers\n\nvar voronoi_shape = null //shapes of the voronois, content of the geojson\n\nvar interComm_shape = null //shapes of the interComms, content of the geojson\n\nvar firstVoronoiByInterComm = [] //array containing infos about the id of the first voronoi inside a given interComm, since voronoi ids are consecutive (e.g. ids 0-7 are inside interComm 0)\n\nvar pathGenerator = null //pathGenerator, used to project paths (latLng) on the map\n\nvar defs_path = null //reference to the d3.selectAll(\"path\") used to crop the layer to the current voronoi area\n\nvar legend_element = null //element (div) that will contain the layer legend\n\nvar color_legend_canvas = null //element (canvas) that will contain the layer legend (the colors)\n\nvar color_legend_svg = null //element (div) that will contain the layer legend (the labels)\n\nvar onSchools = null //onSchools callback function, called when the number of schools changes (e.g. we hovered another area)\n\nvar onHistChange = null //onHistChange callback function, called when the histogram must be changed (e.g. we hovered another area)\n\nvar onNewName = null //onNewName callback function, called when the current intercomm name has changed\n\nvar highlightedInterComm = -1 //id of the currently highlighted interComm\n\nvar initialBounds = null //initial bounds of the map (set to paris)\n\nvar markerIcon = {} //informations about the marker icon\n\nvar lastMouseDownX = 0 //coordinates of the last mouse Down event\n\nvar lastMouseDownY = 0 //coordinates of the last mouse Down event\n\nvar voronoiContainment = null //precomputed containment tests for the voronois\n\nvar interCommContainment = null //precomputed containment tests for the interComms\n\nvar showCirclePreview = true //do we show the circle preview, or do we hide it?\n\nvar showFutureInsteadOfEV = false //do we show the future preview in the circle instead of the EV?\n\nvar lastMousePosition = {x:0,y:0} //last known position of the mouse\n\nvar isFuture = false\n\nvar currentCircleLayerPath = \"\"\n\nvar currentChartIndex = -1\n\nvar currentChartIndexIsVoronoi = false\n\nexport default {cachedLayers,\n\t\t\t\tcurrentLayerPath,\n\t\t\t\tmap,\n\t\t\t\tmapElement,\n\t\t\t\tcurrentGeoLat,\n\t\t\t\tcurrentGeoLng,\n\t\t\t\tsvg_EV,\n\t\t\t\tsvg_circle_EV,\n\t\t\t\tinterComms,\n\t\t\t\tvoronoi,\n\t\t\t\timgs,\n\t\t\t\timgs_EV,\n\t\t\t\tupdate_parameters,\n\t\t\t\tmarkerElement,\n\t\t\t\tcanvas,\n\t\t\t\tvoronoi_shape,\n\t\t\t\tinterComm_shape,\n\t\t\t\tfirstVoronoiByInterComm,\n\t\t\t\tpathGenerator,\n\t\t\t\tdefs_path,\n\t\t\t\tlegend_element,\n\t\t\t\tcolor_legend_canvas,\n\t\t\t\tcolor_legend_svg,\n\t\t\t\tonSchools,\n\t\t\t\tonHistChange,\n\t\t\t\tonNewName,\n\t\t\t\thighlightedInterComm,\n\t\t\t\tinitialBounds,\n\t\t\t\tmarkerIcon,\n\t\t\t\tlastMouseDownX,\n\t\t\t\tlastMouseDownY,\n\t\t\t\tvoronoiContainment,\n\t\t\t\tinterCommContainment,\n\t\t\t\tshowCirclePreview,\n\t\t\t\tshowFutureInsteadOfEV,\n\t\t\t\tlastMousePosition,\n\t\t\t\tisFuture,\n\t\t\t\tcurrentLayerPath,\n\t\t\t\tcurrentChartIndex,\n\t\t\t\tcurrentChartIndexIsVoronoi}","var Config = require('./config.json')\nimport helpers_f from './helpers.js'\nimport shared from './shared.js'\n\nfunction update_clip() {\n  var map = shared.map\n  var cachedLayers = shared.cachedLayers\n  var currentLayerPath = shared.currentLayerPath\n  var defs_path = shared.defs_path\n  function clip_projectPoint(x, y) {\n\n    if (!cachedLayers[currentLayerPath]){\n      return\n    }\n    var default_tl_point = map.latLngToLayerPoint([cachedLayers[currentLayerPath].tl_lat, cachedLayers[currentLayerPath].tl_lng])\n    var default_br_point = map.latLngToLayerPoint([cachedLayers[currentLayerPath].br_lat, cachedLayers[currentLayerPath].br_lng])\n\n    var width = (default_br_point.x - default_tl_point.x)\n    var height = (default_br_point.y - default_tl_point.y)\n\n    var point = map.latLngToLayerPoint(L.latLng(y, x))\n\n    var tx = (point.x - default_tl_point.x) / (default_br_point.x - default_tl_point.x) * (width - 1)\n    var ty = (point.y - default_tl_point.y) / (default_br_point.y - default_tl_point.y) * (height - 1)\n\n    this.stream.point(tx, ty);\n  }\n\n  var clip_transform = d3.geo.transform({\n    point: clip_projectPoint\n  });\n  var clip_path = d3.geo.path()\n    .projection(clip_transform);\n  defs_path.attr(\"d\", clip_path)\n}\n\nfunction update_EV_preview(mouseX,mouseY){\n  updateCirclePreviewPath()\n  var svg_EV = shared.svg_EV\n  var svg_circle_EV = shared.svg_circle_EV\n  var map = shared.map\n  var cachedLayers = shared.cachedLayers\n  var imgs_EV = shared.imgs_EV\n\n  var layer_path = shared.currentCircleLayerPath\n  if (!cachedLayers[layer_path] || !shared.showCirclePreview){\n    shared.svg_EV.style(\"display\",\"none\")\n    shared.svg_circle_EV.style(\"display\",\"none\")\n    return\n  }\n\n  var svg_width = parseInt(svg_EV.style(\"width\").substr(0,svg_EV.style(\"width\").length-2))\n  var svg_height = parseInt(svg_EV.style(\"height\").substr(0,svg_EV.style(\"width\").length-2))\n  var svg_circle_width = parseInt(svg_circle_EV.style(\"width\").substr(0,svg_circle_EV.style(\"width\").length-2))\n  var svg_circle_height = parseInt(svg_circle_EV.style(\"height\").substr(0,svg_circle_EV.style(\"width\").length-2))\n\n  svg_EV.style(\"top\",(mouseY - svg_height - 15)+\"px\")\n  svg_EV.style(\"left\",(mouseX + 15)+\"px\")\n  svg_EV.style(\"display\",\"\")\n\n  svg_circle_EV.style(\"top\",(mouseY - svg_circle_height/2)+\"px\")\n  svg_circle_EV.style(\"left\",(mouseX - svg_circle_width/2)+\"px\")\n  svg_circle_EV.style(\"display\",\"\")\n\n  var magnifyingRatio = svg_width/svg_circle_width\n\n  var tl = L.latLng(cachedLayers[layer_path].tl_lat,cachedLayers[layer_path].tl_lng)\n  var br = L.latLng(cachedLayers[layer_path].br_lat,cachedLayers[layer_path].br_lng)\n\n  var tl_pixels = map.latLngToContainerPoint(tl)\n  var br_pixels = map.latLngToContainerPoint(br)\n\n  var pixels_on_left = mouseX - tl_pixels.x\n  var pixels_on_top = mouseY - tl_pixels.y\n\n  var magnified_tl_pixels = L.point(mouseX - pixels_on_left * magnifyingRatio,\n                                    mouseY - pixels_on_top * magnifyingRatio)\n\n  var image_width = (map.latLngToLayerPoint(br).x - map.latLngToLayerPoint(tl).x) * magnifyingRatio\n  var image_height = (map.latLngToLayerPoint(br).y - map.latLngToLayerPoint(tl).y) * magnifyingRatio\n\n  imgs_EV.attr('width', image_width)\n  imgs_EV.attr('height', image_height)\n\n  imgs_EV.attr(\"transform\",\n    \"translate(\" +\n      (+ magnified_tl_pixels.x - mouseX + svg_width/2) + \",\" +\n      (+ magnified_tl_pixels.y - mouseY + svg_height/2) + \")\"\n  )\n}\n\nfunction update_chart(layerURL) {\n  var i = shared.currentChartIndex\n  var voro = shared.currentChartIndexIsVoronoi\n  var cachedLayers = shared.cachedLayers\n  var info = cachedLayers[layerURL]\n\n  if (shared.isFuture && Config.layers[layerURL].future){\n    info = cachedLayers[Config.layers[layerURL].future]\n  }\n  if (!info) {\n    return;\n  }\n  var data=[]\n  if (i < 0){ //none selected, show data about entire Paris region\n    data = info.entire_hist\n  }\n  else if (voro == true) {\n    data = info.voronoi_hist[i]\n  } else {\n    data = info.interComm_hist[i]\n  }\n\n  //TODO: don't exclude Urban cooling, but right now the layer has only three different values so it looks way better with 0 values\n  if (layerURL != Config.Urban_cooling){\n    data[0]=0 // ignore 0 values\n  }\n  \n  shared.onHistChange(helpers_f.range(256),data)\n\n}\n\nfunction update_text_school(layerURL){\n  var i = shared.currentChartIndex\n  var voro = shared.currentChartIndexIsVoronoi\n  var cachedLayers = shared.cachedLayers\n  if(layerURL == Config.Urban_cooling){\n    var info = cachedLayers[Config.Ecole_path]\n    if (!info) {\n        return;\n    }\n    var data=[]\n    if (i < 0){\n      data = info.entire_hist.slice(-1).pop()\n    }\n    else if (voro == true) {\n      data = info.voronoi_hist[i].slice(-1).pop()\n    } else {\n      data = info.interComm_hist[i].slice(-1).pop()\n    }\n    shared.onSchools(data)\n  }\n  else{\n    shared.onSchools(null)\n  }\n}\n\n/**\n * Updates the marker element on the map with the right coordinates.\n */\nfunction updateMarker() {\n  var map = shared.map\n  var currentGeoLat = shared.currentGeoLat\n  var currentGeoLng = shared.currentGeoLng\n  var markerElement = shared.markerElement\n  if (currentGeoLat && currentGeoLng) {\n    const point = map.latLngToLayerPoint([currentGeoLat, currentGeoLng])\n    const x = point.x - shared.markerIcon.iconAnchor[0]\n    const y = point.y - shared.markerIcon.iconAnchor[1]\n    markerElement.attr('visibility', 'visible')\n    markerElement.attr('transform', `translate(${x}, ${y})`)\n  } else {\n    markerElement.attr('visibility', 'hidden')\n  }\n}\n\nfunction updateMap() {//add here everything that could potentially change\n  var map = shared.map\n  var cachedLayers = shared.cachedLayers\n  var voronoi = shared.voronoi\n  var interComms = shared.interComms\n  var imgs = shared.imgs\n  var imgs_EV = shared.imgs_EV\n  var update_parameters = shared.update_parameters\n  var path = shared.pathGenerator\n\n  if (update_parameters.hide) {\n    console.log('hidden!')\n    interComms.attr('visibility', 'hidden')\n    voronoi.attr('visibility', 'hidden')\n    imgs.attr('visibility', 'hidden')\n    imgs_EV.attr('visibility', 'hidden')\n    return;\n  } else {\n    interComms.attr('visibility', 'visible')\n    voronoi.attr('visibility', 'visible')\n    imgs.attr('visibility', 'visible')\n    imgs_EV.attr('visibility', 'visible')\n  }\n\n  var tl = update_parameters.tl\n  var br = update_parameters.br\n\n  console.log('UPDATING')\n  var width = (map.latLngToLayerPoint(br).x - map.latLngToLayerPoint(tl).x)\n  var height = (map.latLngToLayerPoint(br).y - map.latLngToLayerPoint(tl).y)\n  imgs.attr(\"transform\",\n    function(d) {\n      var point = map.latLngToLayerPoint(tl)\n      return \"translate(\" +\n        point.x + \",\" +\n        point.y + \")\";\n    }\n  )\n\n  imgs.attr('width', width)\n  imgs.attr('height', height)\n  interComms.attr(\"d\", path)\n  voronoi.attr(\"d\", path)\n  update_clip()\n  updateMarker()\n  shared.svg_EV.style(\"display\",\"none\")\n  shared.svg_circle_EV.style(\"display\",\"none\")\n}\n\nfunction updateCirclePreviewPath(){\n  if (shared.showFutureInsteadOfEV && Config.layers[shared.currentLayerPath].future){ //if show future/present\n    if (shared.isFuture){ //if show present\n      shared.currentCircleLayerPath = shared.currentLayerPath\n      shared.svg_circle_EV.style(\"border-color\",Config.color_present)\n      shared.svg_EV.style(\"border-color\",Config.color_present)\n    }\n    else{ //if show future\n      shared.currentCircleLayerPath = Config.layers[shared.currentLayerPath].future\n      shared.svg_circle_EV.style(\"border-color\",Config.color_future)\n      shared.svg_EV.style(\"border-color\",Config.color_future)\n    }\n  }\n  else{ //if show EV\n    shared.currentCircleLayerPath = Config.EV_path\n    shared.svg_circle_EV.style(\"border-color\",Config.color_ev)\n    shared.svg_EV.style(\"border-color\",Config.color_ev)\n  }\n}\n\nfunction updateCirclePreviewLayer(){\n  updateCirclePreviewPath()\n  var layer_path = shared.currentCircleLayerPath\n  if (!shared.cachedLayers[layer_path] || !shared.showCirclePreview){\n    return\n  }\n  shared.imgs_EV.attr(\"xlink:href\", shared.cachedLayers[layer_path].url)\n}\n\nexport default{update_clip,update_EV_preview,update_chart,update_text_school,updateMarker,updateMap,updateCirclePreviewPath,updateCirclePreviewLayer}","const colorSchemeDict = {\n  0:d3.interpolateOranges,\n  1:d3.interpolateRdBu,\n  2:d3.interpolateBlues,\n  3:d3.interpolateGnBu,\n  4:d3.interpolateRdYlGn,\n}\n\nimport shared from './shared.js'\nimport update_f from './update.js'\nvar Config = require('./config.json')\n\n/**\n * Loads a JSON containment file and parses it.\n */\nfunction loadContainmentFile (url) {\n  return fetch(url)\n    .then(res => res.json())\n    .then(json => {\n      json.data = JSON.parse(json.data)\n      return json\n    })\n}\n\nconst MAP_TILES = 'https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png'\nconst MAP_ATTRIB = '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n/**\n * Creates a Leaflet map of the Paris area and returns it.\n */\nfunction createMap (element) {\n  shared.map = L.map(element, {\n    zoomControl: false\n  })\n  var map = shared.map\n  map.fitBounds(shared.initialBounds)\n  map.setMaxBounds(map.getBounds().pad(0.025))\n\n  const base = L.tileLayer(MAP_TILES, {\n    minZoom: 9,\n    maxZoom: 14, // Toner Light won't zoom further than 14.\n    attribution: MAP_ATTRIB\n  })\n\n  base.addTo(map)\n\n  map.setView(new L.LatLng(48.856614,2.3522219),map.getZoom()+2) // zoom more on Paris, initially\n}\n\n/**\n * Returns whether a given point is within the Paris region.\n */\nfunction isWithinParis(point) {\n  return shared.interComm_shape.features.some(s => d3.geoContains(s, point))\n}\n\n/**\n * Sets the position of the geolocation marker.\n */\nfunction setLocation (lat, lng) {\n  if (!lat || !lng || !isWithinParis([lng, lat])) {\n    lat = null\n    lng = null\n    shared.map.fitBounds(shared.initialBounds)\n  } else {\n    //console.log(lat,lng)\n    shared.map.setView(new L.LatLng(lat, lng),11)\n    //shared.map.setZoom(11)\n  }\n\n  shared.currentGeoLat = lat\n  shared.currentGeoLng = lng\n  update_f.updateMarker()\n}\n\n\nfunction getColorsFromScheme (colorSchemeId){\n  var currentScheme = colorSchemeDict[colorSchemeId]\n  var range = []\n  for (var i=0; i<256; ++i){\n    range.push(currentScheme(i/255))\n  }\n  \n  return range\n}\n\n\n// create continuous color legend\nfunction fillScale (scale_canvas, scale_svg, colorScale, minValue, maxValue, invertColorScheme) {\n  const legendHeight = 200\n  const legendWidth = 70\n  const margin = {top: 5, right: 30, bottom: 5, left: 0}\n\n  var canvas = scale_canvas\n    .attr(\"height\", legendHeight - margin.top - margin.bottom)\n    .attr(\"width\", 1)\n    .style(\"height\", (legendHeight - margin.top - margin.bottom) + \"px\")\n    .style(\"width\", (legendWidth - margin.left - margin.right) + \"px\")\n    .style(\"position\", \"absolute\")\n    .style(\"top\", (margin.top) + \"px\")\n    .style(\"left\", (margin.left) + \"px\")\n    .node();\n\n  var ctx = canvas.getContext(\"2d\");\n\n  var legendScale = height =>\n    colorScale(((legendHeight - margin.top - margin.bottom) - height)/ (legendHeight - margin.top - margin.bottom) * 255)\n\n  var image = ctx.createImageData(1, (legendHeight - margin.top - margin.bottom));\n\n  for (var i=0; i<legendHeight - margin.top - margin.bottom; ++i){\n    var c = d3.rgb(legendScale(i));\n    var pos = i*4;\n\n    if (invertColorScheme){\n      pos = (legendHeight - margin.top - margin.bottom - 1)*4 - i*4\n    }\n    image.data[pos] = c.r;\n    image.data[pos + 1] = c.g;\n    image.data[pos + 2] = c.b;\n    image.data[pos + 3] = 255;\n  }\n  \n  ctx.putImageData(image, 0, 0);\n\n  var domain = [maxValue, minValue]\n  if (invertColorScheme){\n    domain = [minValue, maxValue]\n  }\n  var legendAxis = d3.axisRight()\n    .scale(d3.scaleLinear().domain(domain).range([1, legendHeight - margin.bottom - margin.top - 1]))\n    .tickSize(6)\n    .ticks(8);\n\n  var svg = scale_svg\n    .attr(\"height\", `${legendHeight}px`)\n    .attr(\"width\", `${legendWidth}px`)\n    .style(\"position\", \"absolute\")\n    .style(\"left\", \"0px\")\n    .style(\"top\", \"0px\")\n\n  svg\n    .select(\"g\")\n    .attr(\"class\", \"axis\")\n    .attr(\"transform\", `translate(${legendWidth - margin.left - margin.right}, ${margin.top - 1})`)\n    .call(legendAxis);\n}\n\n\nfunction computeColorRange (percentiles,colors){\n  var domain_percentiles = percentiles.slice()\n  domain_percentiles.unshift(0)\n  domain_percentiles.push(255)\n\n  var domainLength = domain_percentiles.length\n  var rangeLength  = colors.length\n\n  var intermediateDomain = []\n  for (var i=0; i<rangeLength; ++i){\n    intermediateDomain[i] = i/(rangeLength-1)\n  }\n  var intermediateScale = d3.scale.linear().domain(intermediateDomain).range(colors)\n\n  var range_out = []\n  for (var i=0; i<domainLength; ++i){\n    var t = i/(domainLength-1)\n    range_out.push(intermediateScale(t))\n  }\n  return [domain_percentiles,range_out]\n}\n\n\nfunction blankStyle (feature) {\n  return {\n    opacity: 0,\n    fillOpacity: 0\n  };\n}\n\nfunction range (length){\n  var range = []\n  for (var i=0; i<length; ++i){\n    range[i]=i\n  }\n  return range\n}\n\nfunction handleKeyEvent(e){\n  if (e && (e.charCode || e.keyCode) == 120){ // 'x' key\n    shared.showCirclePreview = ! shared.showCirclePreview\n  }\n  if (e && (e.charCode || e.keyCode) == 32){ // space bar\n    shared.showFutureInsteadOfEV = ! shared.showFutureInsteadOfEV\n  }\n  update_f.updateCirclePreviewLayer()\n  update_f.update_EV_preview(shared.lastMousePosition.x,shared.lastMousePosition.y)\n}\n\nexport default {loadContainmentFile,createMap,setLocation,getColorsFromScheme,fillScale,computeColorRange,blankStyle,range,handleKeyEvent}","var Config = require('./config.json')\nimport helpers_f from './helpers.js'\nimport shared from './shared.js'\nimport update_f from './update.js'\n\n\n/**\n * Loads, pre-processes and caches the layer with the given path.\n * This includes:\n * - Fetching the layer's JSON data;\n * - Fetching containment files.\n * - Preparing arrays for means, counts and histograms.\n * - Dispatching those computations to worker threads.\n */\nfunction loadLayer(path, isFuture, callback) {\n  var canvas = shared.canvas\n  var voronoi_shape = shared.voronoi_shape\n  var interComm_shape = shared.interComm_shape\n  if (shared.cachedLayers[path]) {\n    callback();\n    return;\n  }\n\n  let truePath = path\n  if (isFuture) {\n    truePath = Config.layers[path].future\n  }\n\n  fetch(truePath)\n    .then(res => res.json())\n    .then(json => {\n      console.log('Preloaded layer:', truePath)\n      \n      json.data = JSON.parse(json.data)\n      json.percentiles = JSON.parse(json.percentiles)\n\n      var pixels = json.data;\n\n      canvas.width = json.width\n      canvas.height = json.height\n\n      var tempContext = canvas.getContext(\"2d\");\n      tempContext.createImageData(canvas.width, canvas.height);\n\n      var len = canvas.height * canvas.width;\n      var workersCount = 1;\n      var finished = 0;\n      var segmentLength = len / workersCount;\n      var blockSize = canvas.height / workersCount;\n\n      //initalize means and counts arrays\n      var voronoi_means = []\n      var voronoi_counts = []\n      var voronoi_hist = {}\n      var entire_hist = []\n\n\n      for (var i=0; i<256; ++i){\n        entire_hist[i] = 0\n      }\n\n      for (var i = 0; i < voronoi_shape.features.length; ++i) {\n        voronoi_counts[i] = 0\n        voronoi_means[i] = 0\n        voronoi_hist[i] = []\n        for (var j=0; j<256; ++j){\n          voronoi_hist[i][j]=0\n        }\n      }\n\n      var interComm_means = []\n      var interComm_counts = []\n      var interComm_hist = {}\n\n      for (var i = 0; i < interComm_shape.features.length; ++i) {\n        interComm_counts[i] = 0\n        interComm_means[i] = 0\n        interComm_hist[i] = []\n        for (var j=0; j<256; ++j){\n          interComm_hist[i][j]=0\n        }\n      }\n\n      shared.firstVoronoiByInterComm = []\n      var firstVoronoiByInterComm = shared.firstVoronoiByInterComm\n\n      for (var i = 0; i < interComm_shape.features.length; ++i) {\n        firstVoronoiByInterComm[i] = 10000 //bigger than the max, ~670\n      }\n\n      // Return a promise.\n      var onWorkEnded = function(e) {\n        var canvasData = e.data.result;\n        var index = e.data.index;\n\n        var interComm_counts_portion = e.data.interComm_counts\n        var interComm_means_portion = e.data.interComm_means\n        var voronoi_counts_portion = e.data.voronoi_counts\n        var voronoi_means_portion = e.data.voronoi_means\n        var firstVoronoiByInterCommPortion = e.data.firstVoronoiByInterComm\n        var voronoi_hist_portion = e.data.voronoi_hist\n        var interComm_hist_portion = e.data.interComm_hist\n\n        for (var i = 0; i < voronoi_shape.features.length; ++i) {\n          voronoi_counts[i] += voronoi_counts_portion[i]\n          voronoi_means[i] += voronoi_means_portion[i]\n\n          for (var j=0; j<256; ++j){\n            voronoi_hist[i][j] += voronoi_hist_portion[i][j]\n          }\n        }\n\n        for (var i = 0; i < interComm_shape.features.length; ++i) {\n          interComm_counts[i] += interComm_counts_portion[i]\n          interComm_means[i] += interComm_means_portion[i]\n\n          for (var j=0; j<256; ++j){\n            interComm_hist[i][j] += interComm_hist_portion[i][j]\n            entire_hist[j] += interComm_hist_portion[i][j]\n          }\n          \n\n          if (firstVoronoiByInterComm[i] > firstVoronoiByInterCommPortion[i]) {\n            firstVoronoiByInterComm[i] = firstVoronoiByInterCommPortion[i]\n          }\n        }\n\n        tempContext.putImageData(canvasData, 0, blockSize * index);\n        finished++;\n\n        if (finished == workersCount) {\n          if(path == Config.Ecole_path){\n            // Here we count the number of schools\n              for (var i = 0; i < voronoi_shape.features.length; ++i) {\n                  voronoi_means[i] /= 255\n              }\n              for (var i = 0; i < interComm_shape.features.length; ++i) {\n                  interComm_means[i] /= 255\n              }\n          }\n          else{\n            for (var i = 0; i < voronoi_shape.features.length; ++i) {\n              if (voronoi_counts[i] != 0) {\n                voronoi_means[i] /= voronoi_counts[i]\n              }\n            }\n            for (var i = 0; i < interComm_shape.features.length; ++i) {\n              if (interComm_counts[i] != 0) {\n                interComm_means[i] /= interComm_counts[i]\n              }\n            }\n          }\n              \n          var hist_buckets = [70, 140]; //TODO: change acodring to layer (hard-coded...)\n\n          var value = canvas.toDataURL(\"png\");\n\n          update_f.updateCirclePreviewLayer()//refresh the EV overlay, the layer we want might be ready now\n\n          var colorScale = null\n          if (Config.layers[path] && Config.layers[path].useColorScheme){\n            var domain = helpers_f.range(256)\n            var range = helpers_f.getColorsFromScheme(Config.layers[path].colorScheme)\n          \n            colorScale = d3.scale.linear()\n              .range(range).domain(domain)\n          }\n          \n          if (Config.layers[path] && Config.layers[path].useColorScheme){\n            range = helpers_f.getColorsFromScheme(Config.layers[path].colorScheme)\n          }\n          \n          shared.cachedLayers[truePath] = {\n            \"url\": value,\n            \"tl_lat\": json.tl_lat,\n            \"tl_lng\": json.tl_lng,\n            \"br_lat\": json.br_lat,\n            \"br_lng\": json.br_lng,\n            \"width\": canvas.width,\n            \"height\": canvas.height,\n            \"voronoi_means\": voronoi_means,\n            \"interComm_means\": interComm_means,\n            \"voronoi_hist\": voronoi_hist,\n            \"entire_hist\":entire_hist,\n            \"interComm_hist\": interComm_hist,\n            \"hist_buckets\": hist_buckets,\n            \"percentiles\" : json.percentiles,\n            \"layerUrl\": truePath,\n            \"colorScale\": colorScale\n          }\n\n          console.log('Processed layer:', truePath)\n\n          callback();\n        }\n      };\n\n      // FIXME(liautaud): Nested callbacks is a code smell.\n\n      var domain = helpers_f.range(256)\n      var range = []\n      if (Config.layers[path] && Config.layers[path].useColorScheme){\n        range = helpers_f.getColorsFromScheme(Config.layers[path].colorScheme)\n      }\n      else{\n        var domain_range = helpers_f.computeColorRange(json.percentiles,Config.layers[path].colors)\n        var domain_continuous = domain_range[0]\n        var range_continuous = domain_range[1]\n        const colorScale = d3.scale.linear()\n          .range(range_continuous).domain(domain_continuous)\n\n        for (var i=0; i<256; ++i){\n          var color = d3.rgb(colorScale(i))\n          range.push(\"rgb(\"+color.r+\",\"+color.g+\",\"+color.b+\")\")\n        }\n      }\n\n      for (var index = 0; index < workersCount; index++) {\n        var worker = new Worker(\"assets/pictureProcessor.js\");\n        worker.onmessage = onWorkEnded;\n        var canvasData = tempContext.getImageData(0, blockSize * index, canvas.width, blockSize);\n        worker.postMessage({\n          canvasData: canvasData,\n          pixels: pixels,\n          index: index,\n          length: segmentLength,\n          width: canvas.width,\n          height: canvas.height,\n          voronoiContainmentData: shared.voronoiContainment.data,\n          interCommContainmentData: shared.interCommContainment.data,\n          numVoronois: voronoi_shape.features.length,\n          numInterComms: interComm_shape.features.length,\n          tl_lat: json.tl_lat,\n          tl_lng: json.tl_lng,\n          br_lat: json.br_lat,\n          br_lng: json.br_lng,\n          colorDomain: domain,\n          colorRange: range\n        });\n      }\n    })\n\n  // TODO(liautaud): Return a Promise.\n}\n\n\n/**\n * Changes the current layer to the one with a given path.\n */\nfunction setLayer(layerPath, isFuture) {\n  var update_parameters = shared.update_parameters\n  var imgs = shared.imgs\n\n  if (!layerPath) {\n    update_parameters.hide = true\n    update_f.updateMap()\n    return;\n  }\n\n  let truePath = layerPath\n  if (isFuture) {\n    truePath = Config.layers[layerPath].future\n  }\n\n  this.loadLayer(layerPath, isFuture, () => {\n\n  if (layerPath == Config.EV_path){ //TODO: add parameter \"AlwaysShowLayer\" in config?\n      imgs.attr(\"clip-path\", \"\")\n    }\n    else{\n      imgs.attr(\"clip-path\", \"url(#clip)\")\n    }\n\n    // Once the layer is loaded, we can get it from the cache.\n    const layer = shared.cachedLayers[truePath]\n\n    update_parameters.tl = new L.LatLng(layer.tl_lat, layer.tl_lng)\n    update_parameters.br = new L.LatLng(layer.br_lat, layer.br_lng)\n    update_parameters.currentGeoLat = shared.currentGeoLat\n    update_parameters.currentGaoLng = shared.currentGeoLng\n\n    var min = 0\n    var max = 255\n\n    var domain = []\n    var range = []\n    if (Config.layers[layerPath].useColorScheme){\n      domain = helpers_f.range(256)\n      range = helpers_f.getColorsFromScheme(Config.layers[layerPath].colorScheme,Config.layers[layerPath].invertColorScheme)\n    }\n    else{\n      var domain_range =helpers_f.computeColorRange(layer.percentiles,Config.layers[layerPath].colors)\n      domain = domain_range[0]\n      range = domain_range[1]\n    }\n\n\n    \n\n    const colorScale = layer.colorScale\n    shared.voronoi.style('fill', function(_, i){\n      //console.log(layer.voronoi_means[i],colorScale(layer.voronoi_means[i]))\n      if (layerPath == Config.EV_path){\n        return \"#00000011\" //transparent\n      }\n      return colorScale(layer.voronoi_means[i])})\n\n    min = 0//Math.min(...layer.interComm_means)\n    max = 255//Math.max(...layer.interComm_means)\n\n    shared.interComms.style('fill', function(_, i){\n      //console.log(layer.interComm_means[i],colorScale(layer.interComm_means[i]))\n      if (shared.highlightedInterComm != -1) { // i.e. we are zoomed in\n        if (i != shared.highlightedInterComm) {\n            return \"#000\"\n          \n        } else {\n          //should never happen\n        }\n      } else { // we are not zoomed in\n        if (!Config.layers[layerPath].useColorScheme){\n          return \"#00000011\"\n        }\n        return colorScale(layer.interComm_means[i])\n      }})\n      \n\n\n    // Reset the width and height of the canvas.\n    shared.canvas.width = layer.width\n    shared.canvas.height = layer.height\n\n    // Update the bounding box and current coordinates.\n    update_parameters.hide = false\n\n    update_f.updateMap()\n    shared.currentLayerPath = layerPath\n    imgs.attr('xlink:href', layer.url)\n\n    d3.select(shared.legend_element).style(\"display\",\"none\")\n\n    if (layerPath != Config.EV_path){\n      d3.select(shared.legend_element).style(\"display\",\"block\")\n      helpers_f.fillScale(shared.color_legend_canvas,shared.color_legend_svg,colorScale,Config.layers[layerPath].min_value,Config.layers[layerPath].max_value,Config.layers[layerPath].invertColorScheme)\n    }\n  })\n\n  shared.isFuture = isFuture\n\n  update_f.updateCirclePreviewLayer()\n\n  update_f.update_chart(shared.currentLayerPath)\n  update_f.update_text_school(shared.currentLayerPath)\n\n  update_f.update_EV_preview(shared.lastMousePosition.x,shared.lastMousePosition.y)\n}\n\nfunction setEVLayer(path){\n  shared.imgs_EV.attr(\"xlink:href\", shared.cachedLayers[Config.EV_path].url)\n}\n\nexport default {loadLayer,setLayer,setEVLayer}","var Config = require('./config.json')\nimport helpers_f from './helpers.js'\nimport shared from './shared.js'\nimport update_f from'./update.js'\n\n/**\n * returns a function that, gived data p and voronoi index j, returns one if and only if the voronoi j is inside the interComm interCommIndex\n */\nfunction oneIfInInterComm(interCommIndex) {\n  function oneIfInInterComm_(p, j) {\n    if (shared.firstVoronoiByInterComm[interCommIndex] <= j && (interCommIndex == shared.interComm_shape.features.length - 1 || shared.firstVoronoiByInterComm[interCommIndex + 1] > j)) {\n      return 1\n    } else {\n      return 0\n    }\n  }\n  return oneIfInInterComm_\n}\n\n/**\n * Defines the voronoi entity. Given an svg container (and some opacity parameters), will return a d3.selectAll(\"path\") element defining the inner areas (i.e. voronois)\n */\nfunction defineVoronoi(svg,emptyOpacity,fullOpacity){\n  return svg.append(\"g\").selectAll(\"path\")\n    .data(shared.voronoi_shape.features)\n    .enter().append('path')\n    .attr('d', shared.pathGenerator)\n    .attr('vector-effect', 'non-scaling-stroke')\n    .style('stroke', \"#666\")\n    .style(\"fill-opacity\", emptyOpacity)\n    .style(\"stroke-opacity\", emptyOpacity)\n    .on(\"mouseover\", function(d, i) { \n      // when the mouse hovers it, it should show the data behind, and become transparent\n      d3.select(this).style('fill-opacity', emptyOpacity);\n\n      //update the data clip to show the layer inside this voronoi\n      shared.defs_path.datum(d.geometry)\n      update_f.update_clip()\n\n      //additionally, update the right elements according to current voronoi\n      shared.currentChartIndex = i\n      shared.currentChartIndexIsVoronoi = true\n      update_f.update_chart(shared.currentLayerPath)\n      update_f.update_text_school(shared.currentLayerPath)\n\n      if (shared.highlightedInterComm != -1){\n        shared.onNewName(shared.interComm_shape.features[shared.highlightedInterComm].properties.nomgroup)\n      }\n    })\n    .on(\"mouseout\", function(d, i) {\n      //when the mouse goes out of this area, we should revert changes\n      if (shared.highlightedInterComm != -1) {\n        //if we are inside an interComm, fill again voronois inside the current interComm\n        d3.select(this).style('fill-opacity', oneIfInInterComm(shared.highlightedInterComm)(d, i));\n        d3.select(this).style('stroke-opacity', oneIfInInterComm(shared.highlightedInterComm)(d, i));\n      }\n\n      //revert clip for this area\n      shared.defs_path.datum([])\n      update_f.update_clip()\n      shared.svg_EV.style(\"display\",\"none\")\n      shared.svg_circle_EV.style(\"display\",\"none\")\n\n      shared.currentChartIndex = -1 // none selected, display data about entire Paris\n      update_f.update_chart(shared.currentLayerPath)\n      update_f.update_text_school(shared.currentLayerPath)\n\n      shared.lastMousePosition={x:-300,y:-300}\n    })\n    .on(\"dblclick\", function(d, i) {\n      shared.interComms.style(\"pointer-events\", \"all\")\n      shared.map.fitBounds(shared.initialBounds) // zoom back to paris\n      shared.highlightedInterComm = -1\n\n      shared.interComms.style(\"fill\", function(_,j){\n        if (!Config.layers[shared.currentLayerPath].useColorScheme){\n          return \"#00000011\"\n        }\n        return shared.cachedLayers[shared.currentLayerPath].colorScale(shared.cachedLayers[shared.currentLayerPath].interComm_means[j])\n      })\n      shared.interComms.style(\"fill-opacity\", fullOpacity)\n      shared.voronoi.style(\"fill-opacity\", emptyOpacity)\n      shared.voronoi.style(\"stroke-opacity\", emptyOpacity)\n\n      shared.defs_path.datum([])\n      update_f.update_clip()\n      shared.svg_EV.style(\"display\",\"none\")\n      shared.svg_circle_EV.style(\"display\",\"none\")\n    })\n    .on(\"mousemove\",function(){\n      if (d3.event && d3.event.clientX && d3.event.clientY && shared.currentLayerPath != Config.EV_path){\n        shared.lastMousePosition={x:d3.event.clientX,y:d3.event.clientY - shared.mapElement.getBoundingClientRect().top}\n        update_f.update_EV_preview(shared.lastMousePosition.x,shared.lastMousePosition.y)\n      }\n      else{\n        shared.svg_EV.style(\"display\",\"none\")\n        shared.svg_circle_EV.style(\"display\",\"none\")\n      }\n    })\n    .on(\"mousedown\",function(){\n      if (d3.event && d3.event.clientX && d3.event.clientY && shared.currentLayerPath != Config.EV_path){\n        shared.lastMouseDownX = d3.event.clientX\n        shared.lastMouseDownY = d3.event.clientY - shared.mapElement.getBoundingClientRect().top\n      }\n    });\n}\n\n/**\n * Defines the voronoi entity. Given an svg container (and some opacity parameters), will return a d3.selectAll(\"path\") element defining the inner areas (i.e. voronois)\n */\nfunction defineInterComms(svg,emptyOpacity,fadedOpacity,fullOpacity){\n  return svg.append(\"g\").selectAll(\"path\")\n    .data(shared.interComm_shape.features)\n    .enter().append('path')\n    .attr('d', shared.path)\n    .attr('vector-effect', 'non-scaling-stroke')\n    .style('stroke', \"#333\")\n    .attr(\"fill\", \"#fff\")\n    .attr(\"fill-opacity\", fullOpacity)\n    .style(\"pointer-events\", \"all\")\n    .on(\"mouseover\", function(d, i) {\n      if (shared.highlightedInterComm != -1) { // i.e. we are zoomed in\n        if (i != shared.highlightedInterComm) {\n          if (!Config.layers[shared.currentLayerPath].useColorScheme){\n            d3.select(this).style(\"fill\",\"#00000011\")\n          }\n          else{\n            d3.select(this).style(\"fill\",shared.cachedLayers[shared.currentLayerPath].colorScale(shared.cachedLayers[shared.currentLayerPath].interComm_means[i]))\n          }\n          \n          d3.select(this).style('fill-opacity', fullOpacity);\n        } else {\n          //should never happen\n        }\n      } else { // we are zoomed in a particular interComm\n        d3.select(this).style('fill-opacity', fadedOpacity);\n      }\n      shared.currentChartIndex = i\n      shared.currentChartIndexIsVoronoi = false\n      update_f.update_chart(shared.currentLayerPath)\n      update_f.update_text_school(shared.currentLayerPath)\n\n      //console.log(shared.interComm_shape.features[i].properties.nomgroup)\n      shared.onNewName(shared.interComm_shape.features[i].properties.nomgroup)\n    })\n    .on(\"mouseout\", function(d, i) {\n      if (shared.highlightedInterComm != -1) { // i.e. we are not zoomed in\n        if (i != shared.highlightedInterComm) {\n          d3.select(this).style(\"fill\",\"#000\")\n          d3.select(this).style('fill-opacity', fadedOpacity);\n        } else {\n          //should never happen\n        }\n      } else { // we are zoomed in a particular interComm\n        d3.select(this).style('fill-opacity', fullOpacity);\n      }\n      shared.svg_EV.style(\"display\",\"none\")\n      shared.svg_circle_EV.style(\"display\",\"none\")\n\n      shared.currentChartIndex = -1 // none selected, display data about entire Paris\n      update_f.update_chart(shared.currentLayerPath)\n      update_f.update_text_school(shared.currentLayerPath)\n      \n      shared.lastMousePosition={x:-300,y:-300} //be sure not to display the preview circle!\n      shared.onNewName('')\n    })\n    .on(\"click\", function(d, i) {\n      if (!d3.event || !d3.event.clientX || !d3.event.clientY ||\n          Math.abs(d3.event.clientX - shared.lastMouseDownX) >= 5 || Math.abs(d3.event.clientY  - shared.mapElement.getBoundingClientRect().top - shared.lastMouseDownY) >= 5){\n        return\n      }\n      shared.interComms.style(\"pointer-events\", \"all\") // now we can click/hover on every department\n      d3.select(this).style(\"pointer-events\", \"none\") // except the current one!\n\n      shared.interComms.style(\"fill\",\"#000\")\n      shared.interComms.style('fill-opacity', fadedOpacity);\n      d3.select(this).style('fill-opacity', emptyOpacity);\n      shared.highlightedInterComm = i\n\n\n      shared.voronoi.style(\"fill-opacity\", oneIfInInterComm(i))\n      shared.voronoi.style(\"stroke-opacity\", oneIfInInterComm(i))\n\n      var BBox = d3.select(this).node().getBBox()\n      var neBound = shared.map.layerPointToLatLng(L.point(BBox.x, BBox.y))\n      var swBound = shared.map.layerPointToLatLng(L.point(BBox.x + BBox.width, BBox.y + BBox.height))\n      shared.map.fitBounds(L.latLngBounds(neBound, swBound)) // zoom to department\n      shared.svg_EV.attr(\"style\",\"display:none;\")\n      shared.svg_circle_EV.attr(\"style\",\"display:none;\")\n    })\n    .on(\"mousemove\",function(){\n      if (d3.event && d3.event.clientX && d3.event.clientY && shared.currentLayerPath != Config.EV_path){\n        shared.lastMousePosition={x:d3.event.clientX,y:d3.event.clientY - shared.mapElement.getBoundingClientRect().top}\n        update_f.update_EV_preview(shared.lastMousePosition.x,shared.lastMousePosition.y)\n      }\n      else{\n        shared.svg_EV.style(\"display\",\"none\")\n        shared.svg_circle_EV.style(\"display\",\"none\")\n      }\n    })\n    .on(\"mousedown\",function(){\n      if (d3.event && d3.event.clientX && d3.event.clientY){\n        //console.log(d3.event)\n        shared.lastMouseDownX = d3.event.clientX\n        shared.lastMouseDownY = d3.event.clientY - shared.mapElement.getBoundingClientRect().top\n      }\n    });\n}\n\nexport default {defineVoronoi,defineInterComms}","import Config from './config.json'\n\nimport helpers_f from './helpers.js'\nimport update_f from './update.js'\nimport layers_f from './layers.js'\nimport shapes_f from './shapes.js'\nimport shared from './shared.js'\n\nexport default function(element, EV_svg_element, EV_circle_svg_element, legend_element, error, interComm_shape, voronoi_shape, interCommContainment, voronoiContainment, onHistChange, onSchools, onNewName) {\n  shared.interComm_shape = interComm_shape\n  shared.voronoi_shape = voronoi_shape\n  shared.onHistChange = onHistChange\n  shared.onSchools = onSchools\n  shared.onNewName = onNewName\n  shared.legend_element = legend_element\n  shared.interCommContainment = interCommContainment\n  shared.voronoiContainment = voronoiContainment\n  shared.mapElement = element\n\n  document.body.addEventListener(\"keypress\",helpers_f.handleKeyEvent)\n\n  const default_tl = new L.LatLng(\n    Config.viewport.topLatitude,\n    Config.viewport.leftLongitude\n  )\n  const default_br = new L.LatLng(\n    Config.viewport.bottomLatitude,\n    Config.viewport.rightLongitude\n  )\n  shared.initialBounds = L.latLngBounds(default_tl, default_br)\n\n  d3.select(legend_element).style(\"display\",\"none\")\n  shared.color_legend_canvas = d3.select(legend_element)\n    .append(\"canvas\")\n\n  shared.color_legend_svg = d3.select(legend_element)\n    .append(\"svg\")\n  shared.color_legend_svg.append(\"g\")\n\n\n  /**\n   * Sets the position of the geolocation marker to the current position\n   * of the user (computed using the Geolocation API).\n   */\n  function setLocationFromCurrent() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(pos => {\n        helpers_f.setLocation(pos.coords.latitude, pos.coords.longitude)\n      })\n    }\n  }\n\n  setLocationFromCurrent()\n\n  helpers_f.createMap(element) //TODO: if the window is small, the zoom is too far (> 14) and the map is grey, untill we zoom in\n\n  L.geoJson(interComm_shape, {\n    style: helpers_f.blankStyle\n  }).addTo(shared.map); //needed! otherwise a svg isn't generated, we use this one for practical purposes\n\n  var svg = d3.select(element).select(\".leaflet-zoom-animated\")\n\n  function projectPoint(x, y) {\n    var point = shared.map.latLngToLayerPoint(new L.LatLng(y, x));\n    this.stream.point(point.x, point.y);\n  }\n  var transform = d3.geo.transform({\n    point: projectPoint\n  });\n  shared.pathGenerator = d3.geo.path()\n    .projection(transform);\n\n  var defs = svg.append(\"defs\");\n  shared.defs_path = defs.append(\"path\")\n    .attr(\"id\", \"clip_path\")\n\n  defs.append(\"clipPath\")\n    .attr(\"id\", \"clip\")\n    .append(\"use\")\n    .attr(\"xlink:href\", \"#clip_path\");\n\n  shared.imgs = svg.selectAll(\"image\").data([0])\n    .enter()\n    .append(\"svg:image\")\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr(\"xlink:href\", \"\")\n    .attr(\"clip-path\", \"\")\n    .attr(\"preserveAspectRatio\",\"none\")\n    .style(\"object-fit\",\"cover\")\n\n  update_f.update_clip()\n\n\n  var emptyOpacity = 0\n  var fadedOpacity = 0.4\n  var semiFullOpacity = 0.7\n  var fullOpacity = 1\n\n  shared.svg_EV = d3.select(EV_svg_element)\n    .attr(\"style\",\"display:none;\")\n\n  shared.svg_circle_EV = d3.select(EV_circle_svg_element)\n    .attr(\"style\",\"display:none;\")\n\n  shared.imgs_EV = shared.svg_EV.selectAll(\"image\").data([0])\n    .enter()\n    .append(\"svg:image\")\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr(\"xlink:href\", \"\")\n    .attr(\"preserveAspectRatio\",\"none\")\n    .style(\"object-fit\",\"cover\")\n\n  var shape_EV = shared.svg_EV.append(\"g\")\n  shape_EV\n    .selectAll(\"path\")\n    .data([interComm_shape.features[0]])\n    .enter().append('path')\n    .attr('vector-effect', 'non-scaling-stroke')\n    .style('stroke', \"#000\")\n    .style(\"fill-opacity\", 0)\n    .style(\"stroke-opacity\", 1)\n\n\n  shared.voronoi = shapes_f.defineVoronoi(svg,emptyOpacity,fullOpacity)\n\n  shared.interComms = shapes_f.defineInterComms(svg,emptyOpacity,fadedOpacity,fullOpacity)\n\n  shared.markerIcon = {\n    iconUrl: 'assets/marker.png',\n    iconSize: [24, 24],\n    iconAnchor: [12, 24]\n  }\n\n  shared.markerElement = svg.append(\"g\").selectAll(\"image\").data([0])\n    .enter()\n    .append(\"svg:image\")\n    .attr(\"xlink:href\", shared.markerIcon.iconUrl)\n    .attr(\"width\", shared.markerIcon.iconSize[0])\n    .attr(\"height\", shared.markerIcon.iconSize[1])\n    .attr('visibility', 'hidden')\n    .style(\"pointer-events\", \"none\")\n\n  shared.canvas = document.createElement(\"canvas\")\n\n  shared.update_parameters = {\n    hide: true,\n  };\n\n  shared.map.on('viewreset', function(){update_f.updateMap()})\n\n  const zoomOut = shared.map.zoomOut.bind(shared.map)\n  const zoomIn = shared.map.zoomIn.bind(shared.map)\n\n  return [layers_f.loadLayer, layers_f.setLayer, helpers_f.setLocation, layers_f.setEVLayer, zoomOut, zoomIn]\n}","<template>\n  <div class=\"map-container\">\n    <section ref=\"map\" class=\"map\"></section>\n\n    <svg ref=\"circle_svg\" class=\"EV-circle-svg\"></svg> \n    <svg ref=\"svg\" class=\"EV-svg\"></svg>\n\n    <section class=\"year\" v-if=\"hasFutureAvailable && !isFuture\">\n      <p>2012</p>\n      <a href=\"#\" @click.prevent=\"() => $emit('toggleFuture')\"\n        v-bind:style=\"{'color': futureColor}\">\n        <i class=\"fas fa-fast-forward\"></i>\n      </a>\n    </section>\n    <section class=\"year\" v-else-if=\"hasFutureAvailable\">\n      <p>2030</p>\n      <a href=\"#\" @click.prevent=\"() => $emit('toggleFuture')\"\n        v-bind:style=\"{'color': presentColor}\">\n        <i class=\"fas fa-fast-backward\"></i>\n      </a>\n    </section>\n\n    <section class=\"legend\">\n      <div ref=\"legend\" class=\"legend-inner\"></div>\n\n      <section v-if=\"isEspacesVerts\">\n        <h3>{{ $t('legend.natural-spaces') }}</h3>\n\n        <figure>\n          <div class=\"item\" :style=\"{backgroundColor: forestColor}\"></div>\n          <figcaption v-html=\"$t('legend.wood')\"></figcaption>\n        </figure>\n        <figure>\n          <div class=\"item\" :style=\"{backgroundColor: waterColor}\"></div>\n          <figcaption v-html=\"$t('legend.water')\"></figcaption>\n        </figure>\n        <figure>\n          <div class=\"item\" :style=\"{backgroundColor: greenColor}\"></div>\n          <figcaption v-html=\"$t('legend.leisure')\"></figcaption>\n        </figure>\n      </section>\n\n      <section v-else-if=\"currentUnit\">\n        <p>({{ currentUnit }})</p>\n      </section>\n    </section>\n  </div>\n</template>\n\n<script>\nimport Config from '../config.json'\nimport displayMap from '../map'\nimport helpers_f from '../helpers.js'\n\nexport default {\n  props: ['layers', 'currentLayerPath', 'currentLocation', 'currentZoom', 'isFuture'],\n  data: () => ({\n    loadLayer: () => {},\n    setLayer: () => {},\n    setLocation: () => {},\n    setEVLayer: () => {},\n    zoomMinus: () => {},\n    zoomPlus: () => {},\n  }),\n\n  computed: {\n    isEspacesVerts() {\n      return this.currentLayerPath == Config.EV_path\n    },\n    \n    currentLayerId() {\n      return Config.layers[this.currentLayerPath].id\n    },\n\n    currentUnit() {\n      if (this.currentLayerPath) {\n        return this.$t(`layers.${this.currentLayerId}.unit`)\n      }\n    },\n\n    forestColor() {\n      return Config.layers[Config.EV_path].colors[0]\n    },\n\n    waterColor() {\n      return Config.layers[Config.EV_path].colors[1]\n    },\n\n    greenColor() {\n      return Config.layers[Config.EV_path].colors[2]\n    },\n\n    futureColor() {\n      return Config.color_future\n    },\n\n    presentColor() {\n      return Config.color_present\n    },\n\n    currentYear() {\n      return new Date().getFullYear()\n    },\n\n    hasFutureAvailable() {\n      return !!Config.layers[this.currentLayerPath].future\n    }\n  },\n\n  /**\n   * Triggers when the component has been mounted.\n   * This is used to create the Leaflet map and bind the event handlers.\n   */\n  mounted () {\n    var urlInterComm = 'data/intercommunalites.geojson'\n    var urlVoronoi = 'data/voronois.json'\n    var urlInterCommContainment = 'data/intercomm_cont.json'\n    var urlVoronoiContainment = 'data/voronoi_cont.json'\n\n    queue()\n      .defer(d3.json, urlInterComm)\n      .defer(d3.json, urlVoronoi)\n      .await((e, d, v) => {\n        helpers_f.loadContainmentFile(urlVoronoiContainment).then(voronoiContainment => {\n          helpers_f.loadContainmentFile(urlInterCommContainment).then(interCommContainment => {\n            // FIXME(liautaud): Please, clean up this mess.\n            [this.loadLayer, this.setLayer, this.setLocation, this.setEVLayer, this.zoomMinus, this.zoomPlus] =\n              displayMap(\n                this.$refs.map,\n                this.$refs.svg,\n                this.$refs.circle_svg,\n                this.$refs.legend,\n                e, d, v, interCommContainment, voronoiContainment,\n                (x, y) => this.$emit('newHistogram', x, y),\n                n => this.$emit('newSchools', n),\n                n => this.$emit('newName',n)\n              )\n\n            Object.keys(Config.layers).forEach(layerPath => {\n              this.layers[layerPath].path=layerPath;\n\n              // Preload all the layers.\n              this.loadLayer(\n                layerPath,\n                false,\n                () => {\n                  this.layers[layerPath].loaded = true\n                  \n                  if (layerPath == Config.EV_path){\n                    //this.setEVLayer(layerPath)\n                  }          \n                }\n              )\n\n              // Also preload the future layers when applicable.\n              if (Config.layers[layerPath].future) {\n                console.log('Preloading future layer:', Config.layers[layerPath].future)\n                this.loadLayer(layerPath, true, () => {})\n              }\n            })\n\n            this.setLayer(this.currentLayerPath)\n          })\n        })\n      })\n  },\n\n  watch: {\n    /**\n     * Watches changes to the currentLayerPath prop, and updates the map.\n     */\n    currentLayerPath() {\n      this.setLayer(this.currentLayerPath, this.hasFutureAvailable && this.isFuture)\n    },\n\n    /**\n     * Watches changes to the isFuture prop, and updates the map.\n     */\n    isFuture() {\n      this.setLayer(this.currentLayerPath, this.hasFutureAvailable && this.isFuture)\n    },\n\n    /**\n     * Watches changes to the currentLocation prop, and updates the marker.\n     */\n    currentLocation([lat, lng]) {\n      this.setLocation(lat, lng)\n    },\n\n    /**\n     * Watches changes to the currentZoom prop, and updates the marker.\n     */\n    currentZoom(after, before) {\n      // FIXME(liautaud): This only takes +/-1 changes into account.\n      // It's a dirty hack anyway, we should hold the currentZoom instead.\n      if (after < before) {\n        this.zoomMinus()\n      } else {\n        this.zoomPlus()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.map-container {\n  flex-grow: 1;\n  position: relative;\n}\n\n.map {\n  width: 100%;\n  height: 100%;\n}\n\n.leaflet-overlay-pane {\n  mix-blend-mode: multiply;\n\n  image {\n    image-rendering: optimizespeed;\n  }\n}\n\n.leaflet-top, .leaflet-bottom {\n  z-index: 300 !important;\n}\n\n.EV-svg {\n  border-radius: 50%;\n  width: 120px;\n  height: 120px;\n  border: 3px solid;\n  border-color:#000;\n  box-shadow: 0 0 3px rgba(#000, .3);\n  position: absolute;\n  background: #fff;\n  display: flex;\n  pointer-events: none;\n  top: -120px;\n  margin-left: -20px;\n  margin-bottom: -20px;\n\n  image {\n    image-rendering: optimizespeed;\n  }\n}\n\n.EV-circle-svg {\n  border-radius: 50%;\n  width: 80px;\n  height: 80px;\n  border: 2px dashed;\n  border-color:rgba(#000,0.7);\n  position: absolute;\n  background: #fff0;\n  display: flex;\n  pointer-events: none;\n  top: -120px;\n}\n\n.year {\n  position: absolute;\n  top: 35px;\n  right: 25px;\n\n  box-shadow: 0 0 2px rgba(0, 0, 0, .3);\n  background: #fff;\n\n  display: flex;\n\n  p {\n    margin: 5px 20px;\n    color: #666;\n    font-size: 25pt;\n    font-family: 'IBM Plex Sans', sans-serif;\n  }\n\n  a {\n    display: flex;\n    align-items: center;\n    border-left: 1px solid #ddd;\n    font-size: 18pt;\n    outline: none;\n    text-decoration: none;\n    padding: 15px;\n    color: #444;\n  }\n}\n\n.legend {\n  position: absolute;\n  bottom: 40px;\n  right: 30px;\n  text-align: center;\n  padding: 5px 10px;\n\n  box-shadow: 0 0 2px rgba(0, 0, 0, .3);\n  background: #fff;\n\n  h3 {\n    text-transform: uppercase;\n    margin: 5px;\n  }\n\n  p, figcaption {\n    font-size: .6em;\n    font-style: italic;\n    margin: 0 auto;\n  }\n\n  figure {\n    margin: 15px 10px;\n  }\n\n  .item {\n    width: 70px;\n    height: 28px;\n    border: 1px solid #000;\n    margin: 5px auto;\n  }\n}\n\n.legend-inner {\n  height: 200px;\n  width: 70px;\n  margin: 0 auto 10px;\n  position: relative;\n}\n\n.legend-inner canvas {\n  box-sizing: border-box;\n  border: 1px solid #000;\n  border-right: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=3cee02f9&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Map.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"sidebar\"},[(!_vm.isEspacesVerts && _vm.currentLayerPath && _vm.layers[_vm.currentLayerPath].loaded)?[_c('article',[_c('h2',[_vm._v(_vm._s(_vm.$t((\"layers.\" + _vm.currentLayerId + \".title\"))))]),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.$t((\"layers.\" + _vm.currentLayerId + \".content\")))}})]),_c('article',{staticClass:\"contextual-info\"},[(_vm.interCommName)?_c('h4',[_vm._v(\"\\n        \"+_vm._s(_vm.interCommName)+\"\\n      \")]):_c('h4',[_vm._v(\"\\n        \"+_vm._s(_vm.$t('sidebar.whole-region'))+\"\\n      \")]),(_vm.interCommName && _vm.schoolCount)?_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('sidebar.child-count', {count: _vm.schoolCount}))}}):_vm._e(),_c('Histogram',{attrs:{\"x\":_vm.currentHistogramX,\"y\":_vm.currentHistogramY,\"currentLayerPath\":_vm.currentLayerPath}})],1)]:[_c('article',[_c('h2',[_vm._v(_vm._s(_vm.$t('intro.title')))]),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('intro.about'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('intro.start'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('intro.future'))}})]),_c('article',{staticClass:\"about\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('intro.credits'))}}),_vm._m(0)])]],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"slideshow\"},[_c('a',{attrs:{\"href\":\"https://www.epfl.ch/\"}},[_c('img',{attrs:{\"src\":\"assets/epfl.png\",\"alt\":\"Logo EPFL\"}})]),_c('a',{attrs:{\"href\":\"https://naturalcapitalproject.stanford.edu/\"}},[_c('img',{attrs:{\"src\":\"assets/natcap.jpg\",\"alt\":\"Logo NatCap\"}})])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"histogram\"},[_c('svg',{ref:\"svg\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"histogram\">\n    <svg ref=\"svg\"></svg>\n  </section>\n</template>\n\n<script>\nimport Config from '../config.json'\nimport helpers from '../helpers.js'\n\nexport default {\n  props: ['x', 'y', 'currentLayerPath'],\n  data: () => ({\n    updateChart: data => {},\n  }),\n  \n  mounted() {\n    // Define the dimensions of the histogram.\n    const margin = {top: 5, right: 10, bottom: 45, left: 65}\n    const width = 380\n    const height = 250\n    const innerWidth = width - margin.left - margin.right \n    const innerHeight = height - margin.top - margin.bottom\n\n    // Define the X and Y scales.\n    const x = d3.scaleLinear().rangeRound([0, innerWidth])\n    const y = d3.scaleLinear().rangeRound([innerHeight, 0])\n\n    // Prepare the SVG element.\n    const svg = d3.select(this.$refs.svg)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\")\n        .attr(\"transform\", `translate(${margin.left}, ${margin.top})`)\n\n    // Add the two axes.\n    const xAxis = svg.append(\"g\")\n      .attr(\"transform\", `translate(0, ${innerHeight})`)\n    const yAxis = svg.append(\"g\")\n\n    // Add the legend.\n    const yLegend = svg.append(\"text\")\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"x\", 0 - (innerHeight / 2))\n      .attr(\"y\", 0 - margin.left)\n      .attr(\"dy\", \"1em\")\n      .style(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"9pt\")\n      .style(\"font-style\", \"italic\")\n      .text(this.$t('sidebar.number-points'))\n\n    const xLegend = svg.append(\"text\")             \n        .attr(\"transform\", `translate(${innerWidth / 2} , ${height - 10})`)\n        .style(\"text-anchor\", \"middle\")\n        .style(\"font-size\", \"9pt\")\n        .style(\"font-style\", \"italic\")\n        .text(this.$t(`layers.${this.currentLayerId}.hist_legend`))\n\n    /**\n     * Updates the histogram using new data for the bars.\n     */\n    this.updateChart = (xData, yData) => {\n      const data = xData.map((x, i) => ({x, y: yData[i]}))\n      \n      // Define a \"layer scale\", which maps values on the X axis\n      // to the real values according to the current layer's scale.\n      const currentLayer = Config.layers[this.currentLayerPath]\n      const layerScale = d3.scaleLinear()\n        .domain([0, 255])\n        .range([currentLayer.min_value, currentLayer.max_value])\n\n      // Also define a \"color scale\", so that the bars in the\n      // histogram can have the same color as in the legend.\n      const colorScale = d3.scale.linear()\n        .range(helpers.getColorsFromScheme(currentLayer.colorScheme))\n        .domain(xData)\n\n      // Update the legend text.\n      xLegend.text(currentLayer.hist_legend)\n\n      // Find the x and y minimums and maximums.\n      const nonZero = xData.filter(x => yData[x] > 0)\n      const xMin = nonZero[0]\n      const xMax = nonZero.slice(-1)[0]\n      const yMax = d3.max(yData)\n\n      // Apply the domains to the scales.\n      const xs = x.domain([xMin, xMax])\n      const ys = y.domain([0, yMax])\n\n      // Update the axes.\n      yAxis.call(d3.axisLeft(ys))\n      xAxis.call(\n        d3.axisBottom(xs)\n          .ticks(5)\n          .tickFormat(t => layerScale(t).toPrecision(3))\n          .tickPadding(6)\n      )\n\n      // Update the bars.\n      const bars = svg.selectAll(\"rect\")\n        .data(data, d => d.x)\n      bars\n        .enter()\n          .append(\"rect\")\n          .attr(\"class\", \"bar\")\n          .attr(\"x\", 1)\n        .merge(bars)\n          .attr(\"transform\", d => `translate(${xs(d.x)}, ${ys(d.y)})`)\n          .attr(\"width\", d => Math.ceil(innerWidth / (xMax - xMin)) + 1)\n          .attr(\"height\", d => innerHeight - ys(d.y))\n          .attr(\"fill\", d => colorScale(d.x))\n        .exit()\n          .remove()\n    }\n\n    this.updateChart(this.x, this.y)\n  },\n\n  watch: {\n    /**\n     * Watches changes to the x prop, and updates the histogram.\n     */\n    x() {\n      this.updateChart(this.x, this.y)\n    }\n  },\n\n  computed: {\n    currentLayerId() {\n      return Config.layers[this.currentLayerPath].id\n    }\n  }\n}\n</script>\n\n<style>\n.histogram {\n  margin-left: -10px;\n  margin-right: -10px;\n}\n\n.histogram svg {\n  display: block;\n  margin: 0 auto;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Histogram.vue?vue&type=template&id=101ab712&\"\nimport script from \"./Histogram.vue?vue&type=script&lang=js&\"\nexport * from \"./Histogram.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Histogram.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Histogram.vue\"\nexport default component.exports","<template>\n  <section class=\"sidebar\">\n    <template v-if=\"!isEspacesVerts && currentLayerPath && layers[currentLayerPath].loaded\">\n      <article>\n        <h2>{{ $t(`layers.${currentLayerId}.title`) }}</h2>\n        <div v-html=\"$t(`layers.${currentLayerId}.content`)\"></div>\n      </article>\n\n      <article class=\"contextual-info\">\n        <h4 v-if=\"interCommName\">\n          {{interCommName}}\n        </h4>\n\n        <h4 v-else>\n          {{ $t('sidebar.whole-region') }}\n        </h4>\n\n        <p\n          v-if=\"interCommName && schoolCount\" \n          v-html=\"$t('sidebar.child-count', {count: schoolCount})\">\n        </p>\n\n        <Histogram\n          :x=\"currentHistogramX\"\n          :y=\"currentHistogramY\"\n          :currentLayerPath=\"currentLayerPath\" />\n      </article>\n    </template>\n\n    <template v-else>\n      <article>\n        <h2>{{ $t('intro.title') }}</h2>\n        <p v-html=\"$t('intro.about')\"></p>\n        <p v-html=\"$t('intro.start')\"></p>\n        <p v-html=\"$t('intro.future')\"></p>\n      </article>\n\n      <article class=\"about\">\n        <p v-html=\"$t('intro.credits')\"></p>\n\n        <section class=\"slideshow\">\n          <a href=\"https://www.epfl.ch/\">\n            <img src=\"assets/epfl.png\" alt=\"Logo EPFL\">\n          </a>\n          <a href=\"https://naturalcapitalproject.stanford.edu/\">\n            <img src=\"assets/natcap.jpg\" alt=\"Logo NatCap\">\n          </a>\n        </section>\n      </article>\n    </template>\n  </section>\n</template>\n\n<script>\nimport Config from '../config.json'\nimport Histogram from './Histogram.vue'\n\nexport default {\n  props: ['layers', 'currentLayerPath', 'currentHistogramX', 'currentHistogramY', 'schoolCount', 'interCommName'],\n  components: { Histogram },\n  computed: {\n    isEspacesVerts() {\n      return this.currentLayerPath == Config.EV_path;\n    },\n\n    currentLayerId() {\n      return Config.layers[this.currentLayerPath].id\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.sidebar {\n  z-index: 500;\n  width: 460px;\n  max-width: 30%;\n  box-sizing: border-box;\n  padding: 35px;\n  font-size: 0.94em;\n\n  background: #fff;\n  box-shadow: 0 0 2px rgba(0, 0, 0, .3);\n  overflow: auto;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.sidebar .contextual-info {\n  position: relative;\n  padding: 10px 0 0;\n\n  &::before {\n    content: '';\n    position: absolute;\n    display: block;\n    border-top: 1px solid #e9e9e9;\n    left: -35px;\n    right: -35px;\n    top: 0;\n  }\n\n  h4 {\n    font-size: .9em;\n    font-variant-caps: small-caps;\n  }\n}\n\n.sidebar p {\n  margin: 30px 0;\n}\n\n.sidebar ul {\n  margin-bottom: 30px;\n}\n\n.sidebar h2 {\n  margin-top: 0;\n  letter-spacing: -1px;\n  font-size: 1.25em;\n}\n\n.sidebar .about {\n  font-style: italic;\n}\n\n.sidebar .slideshow {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  margin: 40px 0 20px;\n\n  a {\n    height: 90px;\n  }\n\n  img {\n    height: 100%;\n  }\n}\n\n.sidebar .button {\n  margin: 5px 0 10px;\n  font-size: 0.85em;\n  display: inline-block;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sidebar.vue?vue&type=template&id=4301fe4f&\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Sidebar.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Sidebar.vue\"\nexport default component.exports","<template>\n  <div id=\"app\" :class=\"[`tutorial-${currentTutorialStep}`]\">\n    \n    <transition name=\"fade\">\n      <Intro\n        v-if=\"introVisible\"\n        :isLoading=\"!currentLayerLoaded\"\n        @dismiss=\"() => introVisible = false\" />\n    </transition>\n\n    <About v-if=\"aboutVisible\" @dismiss=\"() => aboutVisible = false\" />\n\n    <section class=\"horizontal-split\">\n      <Tutorial\n        v-model=\"currentTutorialStep\"\n        :currentLayerPath=\"currentLayerPath\"\n        @layerChange=\"path => this.currentLayerPath = path\" />\n\n      <section class=\"vertical-split\">\n        <section class=\"menu\">\n          <LocationControl\n            :onLocation=\"loc => this.currentLocation = loc\" />\n          <Layers\n            :layers=\"layers\"\n            v-model=\"currentLayerPath\" />\n          <ZoomControl\n            @zoomOut=\"() => currentZoom -= 1\"\n            @zoomIn=\"() => currentZoom += 1\" />\n\n          <a href=\"#\" class=\"about-button\"\n            @click.prevent=\"() => aboutVisible = true\">{{ $t('titles.credits') }}</a>\n        </section>\n\n        <Map\n          :layers=\"layers\"\n          :currentLayerPath=\"currentLayerPath\"\n          :currentLocation=\"currentLocation\"\n          :currentZoom=\"currentZoom\"\n          :isFuture=\"isFuture\"\n          @toggleFuture=\"() => isFuture ^= true\"\n          @newHistogram=\"(x, y) => {this.currentHistogramX = x; this.currentHistogramY = y;}\" \n          @newSchools=\"n => this.schoolCount = n\" \n          @newName=\"n => this.interCommName = n\" />\n        <Sidebar\n          :layers=\"layers\"\n          :currentLayerPath=\"currentLayerPath\"\n          :currentHistogramX=\"currentHistogramX\"\n          :currentHistogramY=\"currentHistogramY\"\n          :schoolCount=\"schoolCount\"\n          :interCommName=\"interCommName\" />\n      </section>\n    </section>\n  </div>\n</template>\n\n<script>\nimport Config from './config.json'\n\nimport Intro from './components/Intro.vue'\nimport Tutorial from './components/Tutorial.vue'\nimport About from './components/About.vue'\nimport ZoomControl from './components/ZoomControl.vue'\nimport LocationControl from './components/LocationControl.vue'\nimport Layers from './components/Layers.vue'\nimport Map from './components/Map.vue'\nimport Sidebar from './components/Sidebar.vue'\n\n/** The layer that should first be loaded. */\nconst defaultLayerPath = Config.EV_path\n\nexport default {\n  components: { Intro, Tutorial, About, ZoomControl, LocationControl, Layers, Map, Sidebar },\n\n  data: () => ({\n    layers: Object.keys(Config.layers).reduce((m, layerPath) => {\n      m[layerPath] = Config.layers[layerPath]\n      m[layerPath].loaded = false\n      m[layerPath].path = layerPath\n      return m\n    }, {}),\n\n    isFuture: false,\n    currentLayerPath: defaultLayerPath,\n\n    currentZoom: 0,\n    currentLocation: null,\n    currentHistogramX: null,\n    currentHistogramY: null,\n\n    introVisible: true,\n    sidebarVisible: false,\n    aboutVisible: false,\n\n    currentTutorialStep: 1,\n\n    interCommName: \"\",\n    schoolCount: null,\n  }),\n\n  computed: {\n    currentLayerLoaded() {\n      return this.layers[this.currentLayerPath].loaded\n    }\n  },\n\n  methods: {\n    logKey(e) {\n      console.log(e)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\nhtml, body {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  font-size: 15pt;\n}\n\n#app {\n  width: 100%;\n  height: 100%;\n  font-family: 'IBM Plex Sans', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\nh2 {\n  font-size: 1.2rem;\n}\n\nh3 {\n  color: #666;\n  font-size: 11pt;\n  font-weight: normal;\n  text-align: center;\n}\n\nh4 {\n  color: #666;\n  font-size: 16pt;\n  font-weight: normal;\n  text-align: center;\n}\n\np, ul {\n  font-family: 'Crimson Text', serif;\n}\n\n.button {\n  text-decoration: none;\n  margin: 1.2rem;\n  font-size: 14pt;\n  padding: 9px 13px;\n  border: 1px solid #fff;\n  color: #fff;\n  text-transform: uppercase;\n  font-weight: 300;\n  transition: padding .2s;\n  position: relative;\n  outline: none;\n  text-shadow: 0 0 2px rgba(#000, .2);\n  box-shadow: 0 0 2px rgba(#000, .2), inset 0 0 2px rgba(#000, .2);\n  font-family: 'IBM Plex Sans', sans-serif;\n\n  &:hover {\n    padding: 9px 16px;\n  }\n\n  &.dark {\n    color: #000;\n    border-color: #000;\n  }\n\n  &.dark.full {\n    background: #000;\n    color: #fff;\n  }\n}\n\n.menu {\n  z-index: 500;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 50px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.horizontal-split {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n}\n\n.vertical-split {\n  display: flex;\n  flex-grow: 1;\n  background: #000;\n  position: relative;\n}\n\n// TODO(liautaud): Create mixins and move everything\n// back in their respective files.\n.zoom-control, .location-control {\n  height: 40px;\n  border: 1px solid #bbb;\n  box-shadow: 0 0 3px rgba(#000, .2);\n  background: #fff;\n  display: flex;\n  margin: 20px 0;\n  flex-basis: content;\n\n  a {\n    outline: none;\n    height: 40px;\n    width: 39px;\n    font-family: 'Courier New';\n    font-size: 18pt;\n    line-height: 40px;\n    text-align: center;\n    text-decoration: none;\n    color: #000;\n  }\n\n  a:first-child {\n    border-right: 1px solid #bbb;\n  }\n}\n\n.zoom-control {\n  margin-bottom: 0;\n}\n\n.about-button {\n  display: block;\n  text-align: center;\n  height: 40px;\n  width: 80px;\n  line-height: 40px;\n  border: 1px solid #bbb;\n  border-top: 0;\n  box-shadow: 0 0 3px rgba(#000, .2);\n  background: #fff;\n  text-transform: uppercase;\n  color: #666;\n  font-size: 10pt;\n  text-decoration: none;\n}\n\n#espacesVerts {\n  height: 300px;\n  width: 100%;\n  margin-top: 25px;\n  margin-bottom: 5px;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=15a66a4a&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import Vue from 'vue'\nimport VueI18n from 'vue-i18n'\nimport App from './App.vue'\n\n// Load the translation locales.\nimport fr from './locales/fr.json'\nimport en from './locales/en.json'\n\nVue.config.productionTip = false\nVue.use(VueI18n)\n\nnew Vue({\n  render: h => h(App),\n  i18n: new VueI18n({\n    locale: 'fr',\n    messages: {fr, en},\n  }),\n}).$mount('#app')\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tutorial.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tutorial.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}