{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Layers.vue?83df","webpack:///./src/components/About.vue?410e","webpack:///./src/App.vue?560b","webpack:///./src/components/Intro.vue?8163","webpack:///src/components/Intro.vue","webpack:///./src/components/Intro.vue?21f1","webpack:///./src/components/Intro.vue?44cf","webpack:///./src/components/About.vue?3c4c","webpack:///src/components/About.vue","webpack:///./src/components/About.vue?f71c","webpack:///./src/components/About.vue?a6dc","webpack:///./src/components/ZoomControl.vue?7d7c","webpack:///src/components/ZoomControl.vue","webpack:///./src/components/ZoomControl.vue?b509","webpack:///./src/components/ZoomControl.vue?f0d9","webpack:///./src/components/LocationControl.vue?f2d2","webpack:///src/components/LocationControl.vue","webpack:///./src/components/LocationControl.vue?071a","webpack:///./src/components/LocationControl.vue?8075","webpack:///./src/components/Layers.vue?40b6","webpack:///src/components/Layers.vue","webpack:///./src/components/Layers.vue?1d7e","webpack:///./src/components/Layers.vue","webpack:///./src/components/Map.vue?9dc8","webpack:///./src/shared.js","webpack:///./src/update.js","webpack:///./src/helpers.js","webpack:///./src/layers.js","webpack:///./src/shapes.js","webpack:///./src/map.js","webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?3baf","webpack:///./src/components/Map.vue","webpack:///./src/components/Sidebar.vue?bfd5","webpack:///./src/components/Histogram.vue?5f99","webpack:///src/components/Histogram.vue","webpack:///./src/components/Histogram.vue?11b6","webpack:///./src/components/Histogram.vue?d72a","webpack:///src/components/Sidebar.vue","webpack:///./src/components/Sidebar.vue?d975","webpack:///./src/components/Sidebar.vue?ebf3","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js","webpack:///./src/App.vue?bcb1","webpack:///./src/components/Map.vue?357b","webpack:///./src/components/Intro.vue?6183","webpack:///./src/components/LocationControl.vue?9aba","webpack:///./src/components/Histogram.vue?f3a7","webpack:///./src/components/Sidebar.vue?652c","webpack:///./src/components/ZoomControl.vue?ecf3"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Layers_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Layers_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_About_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_About_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_d358e788_render","this$1","this","_vm","_h","$createElement","_c","_self","attrs","id","isLoading","currentLayerLoaded","on","dismiss","introVisible","_e","aboutVisible","staticClass","onLocation","loc","currentLocation","layers","model","callback","$$v","currentLayerPath","expression","zoomOut","currentZoom","zoomIn","href","click","$event","preventDefault","_v","isFuture","toggleFuture","newHistogram","x","y","currentHistogramX","currentHistogramY","newSchools","schoolCount","staticRenderFns","Introvue_type_template_id_69034d8b_render","_m","$emit","Introvue_type_template_id_69034d8b_staticRenderFns","src","Introvue_type_script_lang_js_","props","components_Introvue_type_script_lang_js_","component","componentNormalizer","options","__file","Intro","Aboutvue_type_template_id_dde62ab2_render","Aboutvue_type_template_id_dde62ab2_staticRenderFns","Aboutvue_type_script_lang_js_","components_Aboutvue_type_script_lang_js_","About_component","About","ZoomControlvue_type_template_id_1fc96b4c_render","ZoomControlvue_type_template_id_1fc96b4c_staticRenderFns","ZoomControlvue_type_script_lang_js_","components_ZoomControlvue_type_script_lang_js_","ZoomControl_component","ZoomControl","LocationControlvue_type_template_id_af920352_render","locate","class","search","active","searchExpanded","toggleSearch","ref","type","keyup","keyCode","LocationControlvue_type_template_id_af920352_staticRenderFns","LocationControlvue_type_script_lang_js_","mounted","_this","api","google","maps","places","Autocomplete","$refs","searchInput","setFields","setOptions","strictBounds","setBounds","north","config","viewport","topLatitude","south","bottomLatitude","west","leftLongitude","east","rightLongitude","addListener","place","getPlace","geometry","location","lat","lng","methods","_this2","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","focus","keypressSearch","e","alert","JSON","stringify","components_LocationControlvue_type_script_lang_js_","LocationControl_component","LocationControl","Layersvue_type_template_id_56fe9083_render","_l","layer","hidden","path","select","domProps","innerHTML","_s","icon","loaded","Layersvue_type_template_id_56fe9083_staticRenderFns","Layersvue_type_script_lang_js_","loading","components_Layersvue_type_script_lang_js_","Layers_component","Layers","Mapvue_type_template_id_2ecf4384_render","hasFutureAvailable","currentYear","style","backgroundColor","forestColor","waterColor","greenColor","currentUnit","Mapvue_type_template_id_2ecf4384_staticRenderFns","cachedLayers","map","currentGeoLat","currentGeoLng","svg_EV","svg_circle_EV","interComms","voronoi","imgs","imgs_EV","update_parameters","markerElement","canvas","voronoi_shape","interComm_shape","firstVoronoiByInterComm","pathGenerator","defs_path","legend_element","color_legend_canvas","color_legend_svg","onSchools","onHistChange","highlightedInterComm","initialBounds","markerIcon","lastMouseDownX","lastMouseDownY","shared","Config","require","update_clip","clip_projectPoint","default_tl_point","latLngToLayerPoint","tl_lat","tl_lng","default_br_point","br_lat","br_lng","width","height","point","L","latLng","tx","ty","stream","clip_transform","d3","geo","transform","clip_path","projection","attr","update_EV_preview","mouseX","mouseY","layer_path","EV_path","svg_width","parseInt","substr","svg_height","svg_circle_width","svg_circle_height","magnifyingRatio","tl","br","tl_pixels","latLngToContainerPoint","pixels_on_left","pixels_on_top","magnified_tl_pixels","image_width","image_height","update_chart","layerURL","voro","info","voronoi_hist","interComm_hist","helpers_f","range","update_text_school","Urban_cooling","Ecole_path","pop","updateMarker","iconAnchor","concat","updateMap","hide","console","log","update","colorSchemeDict","0","interpolateOranges","1","interpolateRdBu","2","interpolateBlues","3","interpolateGnBu","4","interpolateReds","loadContainmentFile","url","fetch","then","res","json","parse","MAP_TILES","MAP_ATTRIB","createMap","element","zoomControl","fitBounds","setMaxBounds","getBounds","base","tileLayer","minZoom","maxZoom","attribution","addTo","isWithinParis","features","some","geoContains","setLocation","setView","LatLng","update_f","getColorsFromScheme","colorSchemeId","currentScheme","fillScale","scale_canvas","scale_svg","colorScale","minValue","maxValue","legendHeight","legendWidth","margin","top","right","bottom","left","node","ctx","getContext","legendScale","image","createImageData","rgb","g","b","putImageData","legendAxis","axisRight","scale","scaleLinear","domain","tickSize","ticks","svg","computeColorRange","percentiles","colors","domain_percentiles","unshift","domainLength","rangeLength","intermediateDomain","intermediateScale","linear","range_out","blankStyle","feature","opacity","fillOpacity","helpers","loadLayer","truePath","future","pixels","tempContext","len","workersCount","finished","segmentLength","blockSize","voronoi_means","voronoi_counts","interComm_means","interComm_counts","onWorkEnded","canvasData","index","interComm_counts_portion","interComm_means_portion","voronoi_counts_portion","voronoi_means_portion","firstVoronoiByInterCommPortion","voronoi_hist_portion","interComm_hist_portion","hist_buckets","toDataURL","layerUrl","useColorScheme","colorScheme","domain_range","domain_continuous","range_continuous","color","voronoiContainment","interCommContainment","worker","Worker","onmessage","getImageData","postMessage","voronoiContainmentData","interCommContainmentData","numVoronois","numInterComms","colorDomain","colorRange","setLayer","layerPath","currentGaoLng","_","min_value","max_value","setEVLayer","src_layers","oneIfInInterComm","interCommIndex","oneIfInInterComm_","defineVoronoi","emptyOpacity","fullOpacity","append","selectAll","enter","datum","event","clientX","clientY","defineInterComms","fadedOpacity","Math","abs","BBox","getBBox","neBound","layerPointToLatLng","swBound","latLngBounds","shapes","src_map","EV_svg_element","EV_circle_svg_element","error","default_tl","default_br","setLocationFromCurrent","geoJson","projectPoint","defs","shape_EV","shapes_f","iconUrl","iconSize","document","createElement","layers_f","Mapvue_type_script_lang_js_","zoomMinus","zoomPlus","computed","isEspacesVerts","unit","Date","getFullYear","urlInterComm","urlVoronoi","queue","defer","await","v","_displayMap","circle_svg","legend","_displayMap2","slicedToArray","keys","forEach","watch","_ref","_ref2","after","before","components_Mapvue_type_script_lang_js_","Map_component","Map","Sidebarvue_type_template_id_e4bc5b9a_render","title","content","Sidebarvue_type_template_id_e4bc5b9a_staticRenderFns","alt","Histogramvue_type_template_id_ef8ec4ce_render","Histogramvue_type_template_id_ef8ec4ce_staticRenderFns","updatePlot","that","Plotly","react","graph","histfunc","xbins","end","size","start","displayModeBar","Histogramvue_type_script_lang_js_","components_Histogramvue_type_script_lang_js_","Histogram_component","Histogram","Sidebarvue_type_script_lang_js_","components","components_Sidebarvue_type_script_lang_js_","Sidebar_component","Sidebar","defaultLayerPath","Appvue_type_script_lang_js_","reduce","sidebarVisible","src_Appvue_type_script_lang_js_","App_component","App","Vue","productionTip","render","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Map_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Map_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Intro_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Intro_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LocationControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LocationControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Histogram_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Histogram_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Sidebar_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Sidebar_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ZoomControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ZoomControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/app.0790053a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.introVisible)?_c('Intro',{attrs:{\"isLoading\":!_vm.currentLayerLoaded},on:{\"dismiss\":function () { return _vm.introVisible = false; }}}):_vm._e()],1),(_vm.aboutVisible)?_c('About',{on:{\"dismiss\":function () { return _vm.aboutVisible = false; }}}):_vm._e(),_c('section',{staticClass:\"menu\"},[_c('LocationControl',{attrs:{\"onLocation\":function (loc) { return this$1.currentLocation = loc; }}}),_c('Layers',{attrs:{\"layers\":_vm.layers},model:{value:(_vm.currentLayerPath),callback:function ($$v) {_vm.currentLayerPath=$$v},expression:\"currentLayerPath\"}}),_c('ZoomControl',{on:{\"zoomOut\":function () { return _vm.currentZoom -= 1; },\"zoomIn\":function () { return _vm.currentZoom += 1; }}}),_c('a',{staticClass:\"about-button\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.aboutVisible = true; })($event)}}},[_vm._v(\"À propos\")])],1),_c('section',{staticClass:\"container\"},[_c('Map',{attrs:{\"layers\":_vm.layers,\"currentLayerPath\":_vm.currentLayerPath,\"currentLocation\":_vm.currentLocation,\"currentZoom\":_vm.currentZoom,\"isFuture\":_vm.isFuture},on:{\"toggleFuture\":function () { return _vm.isFuture ^= true; },\"newHistogram\":function (x, y) {this$1.currentHistogramX = x; this$1.currentHistogramY = y;},\"newSchools\":function (n) { return this$1.schoolCount = n; }}}),_c('Sidebar',{attrs:{\"layers\":_vm.layers,\"currentLayerPath\":_vm.currentLayerPath,\"currentHistogramX\":_vm.currentHistogramX,\"currentHistogramY\":_vm.currentHistogramY,\"schoolCount\":_vm.schoolCount}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"intro\"},[_vm._m(0),_c('p',[_vm._v(\"Découvrez l'influence de la nature sur votre vie à Paris.\")]),_c('section',{staticClass:\"buttons\"},[(_vm.isLoading)?_c('a',{staticClass:\"button loading\"},[_vm._v(\"Chargement\")]):_c('a',{staticClass:\"button\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.$emit('dismiss')}}},[_vm._v(\"Commencer la visite\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',[_vm._v(\"\\n    EcoParis\\n    \"),_c('img',{attrs:{\"src\":\"assets/parrot.svg\"}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <section class=\"intro\">\r\n    <h1>\r\n      EcoParis\r\n      <img src=\"assets/parrot.svg\">\r\n    </h1>\r\n\r\n    <p>Découvrez l'influence de la nature sur votre vie à Paris.</p>\r\n\r\n    <section class=\"buttons\">\r\n      <a v-if=\"isLoading\" class=\"button loading\">Chargement</a>\r\n      <a v-else @click.prevent=\"$emit('dismiss')\" href=\"#\" class=\"button\">Commencer la visite</a>\r\n    </section>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: ['isLoading']\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" type=\"text/scss\">\r\n.intro {\r\n  z-index: 1001;\r\n  position: fixed;\r\n  display: flex;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  color: #fff;\r\n  background: linear-gradient(120deg, rgba(#84fab0, .98) 10%, rgba(#8fd3f4, .98) 100%);\r\n}\r\n\r\n.intro.fade-enter-active, .intro.fade-leave-active {\r\n  transition: opacity .3s;\r\n}\r\n\r\n.intro.fade-enter, .intro.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.intro h1, .intro p {\r\n  text-shadow: 0 0 2px rgba(0, 0, 0, .4);\r\n}\r\n\r\n.intro h1 {\r\n  font-family: 'Cedarville Cursive';\r\n  font-size: 38pt;\r\n  margin: 0 0 -.3rem;\r\n  position: relative;\r\n}\r\n\r\n.intro h1 img {\r\n  position: absolute;\r\n  width: 64px;\r\n  top: -8px;\r\n  right: -30px;\r\n}\r\n\r\n.intro p {\r\n  font-size: 21pt;\r\n  margin: 0;\r\n}\r\n\r\n.intro .buttons {\r\n  margin-top: 50px;\r\n}\r\n\r\n.intro .button {\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.intro .button.loading {\r\n  cursor: not-allowed;\r\n\r\n  &:before {\r\n    content: '';\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    background: rgba(#fff, .2);\r\n    animation: loading 4s infinite ease-in-out;\r\n  }\r\n}\r\n\r\n@keyframes loading {\r\n  0% {\r\n    left: 0;\r\n    width: 0%;\r\n  }\r\n\r\n  50% {\r\n    left: 0;\r\n    width: 100%;\r\n  }\r\n\r\n  100% {\r\n    left: 100%;\r\n    width: 0%;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Intro.vue?vue&type=template&id=69034d8b&\"\nimport script from \"./Intro.vue?vue&type=script&lang=js&\"\nexport * from \"./Intro.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Intro.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Intro.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about-wrapper\"},[_c('a',{staticClass:\"about-close\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.$emit('dismiss')}}},[_vm._v(\"X\")]),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"about-box\"},[_c('h2',[_vm._v(\"Réalisation et remerciements.\")]),_c('p',[_vm._v(\"EcoParis a été conçu par trois étudiants de l'EPFL pendant le semestre d'automne 2018 dans le cadre du cours de \"),_c('a',{attrs:{\"href\":\"https://edu.epfl.ch/coursebook/en/data-visualization-COM-480\"}},[_vm._v(\"Data Visualization\")]),_vm._v(\".\")]),_c('ul',[_c('li',[_vm._v(\"Alex Ferragni, Master d'Informatique\")]),_c('li',[_vm._v(\"Karthigan Sinnathamby, Master en Data Science\")]),_c('li',[_vm._v(\"Romain Liautaud, Master en Systèmes de Communication\")])]),_c('p',[_vm._v(\"Ce projet a été réalisé en colloboration avec \"),_c('a',{attrs:{\"href\":\"https://naturalcapitalproject.stanford.edu/\"}},[_vm._v(\"Natural Capital Project\")]),_vm._v(\" de Stanford dont la mission consiste \\n        à développer des approches scientifiques pour mettre en avant les bénéfices de la nature aux yeux de la société dans le but d'incorporer le patrimoine naturel dans la prise de décision.\")]),_c('p',[_vm._v(\"Les données sur les services de rétention des nutriments, recharge des nappes, et pollinisation ont été créées par Emmanuel Fauré pour son \"),_c('a',{attrs:{\"href\":\"https://www.dropbox.com/s/s4ccqoz7yg38sgw/Faure_memoire.pdf?dl=0\"}},[_vm._v(\"mémoire de thèse de Master\")]),_vm._v(\" et restent préliminaires. Le calcul des données ainsi que les limitations sont décrites dans le mémoire.\")]),_c('p',[_vm._v(\"Les données sur le service de rafraîchissement ne sont fournies qu'à titre illustratif, en attendant les résultat des travaux du projet \"),_c('a',{attrs:{\"href\":\"https://idefese.wordpress.com/\"}},[_vm._v(\"IDEFESE\")]),_vm._v(\".\\n        Les données sur les \"),_c('a',{attrs:{\"href\":\"http://data.iau-idf.fr/datasets?q=espaces+verts&sort_by=relevance\"}},[_vm._v(\"espaces verts\")]),_vm._v(\" et sur \\n        le \"),_c('a',{attrs:{\"href\":\"http://data.iau-idf.fr/datasets?q=r%C3%A9seau+hydrographique+principal+simplifi%C3%A9+d%27%C3%8Ele-de-france&sort_by=relevance\"}},[_vm._v(\" réseau hydrographique \")]),_vm._v(\" proviennent de l'IAU Ile-de-France.\")]),_c('p',[_vm._v(\"Nos remerciements à Perrine Hamel, hydrologue du Natural Capital Project, pour la supervision du projet.\")]),_c('p',[_vm._v(\"Le logo du perroquet a été réalisé par \"),_c('a',{attrs:{\"href\":\"https://www.flaticon.com/authors/freepik\"}},[_vm._v(\"Freepik\")]),_vm._v(\" pour \"),_c('a',{attrs:{\"href\":\"http://www.flaticon.com/\"}},[_vm._v(\"Flaticon\")]),_vm._v(\".\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"about-wrapper\">\r\n        <a href=\"#\" class=\"about-close\" @click.prevent=\"$emit('dismiss')\">X</a>\r\n        \r\n        <section class=\"about-box\">\r\n            <h2>Réalisation et remerciements.</h2>\r\n\r\n            <p>EcoParis a été conçu par trois étudiants de l'EPFL pendant le semestre d'automne 2018 dans le cadre du cours de <a href=\"https://edu.epfl.ch/coursebook/en/data-visualization-COM-480\">Data Visualization</a>.</p>\r\n\r\n            <ul>\r\n                <li>Alex Ferragni, Master d'Informatique</li>\r\n                <li>Karthigan Sinnathamby, Master en Data Science</li>\r\n                <li>Romain Liautaud, Master en Systèmes de Communication</li>\r\n            </ul>\r\n\r\n            <p>Ce projet a été réalisé en colloboration avec <a href=\"https://naturalcapitalproject.stanford.edu/\">Natural Capital Project</a> de Stanford dont la mission consiste \r\n            à développer des approches scientifiques pour mettre en avant les bénéfices de la nature aux yeux de la société dans le but d'incorporer le patrimoine naturel dans la prise de décision.</p>\r\n\r\n            <p>Les données sur les services de rétention des nutriments, recharge des nappes, et pollinisation ont été créées par Emmanuel Fauré pour son <a href=\"https://www.dropbox.com/s/s4ccqoz7yg38sgw/Faure_memoire.pdf?dl=0\">mémoire de thèse de Master</a> et restent préliminaires. Le calcul des données ainsi que les limitations sont décrites dans le mémoire.</p>\r\n            \r\n            <p>Les données sur le service de rafraîchissement ne sont fournies qu'à titre illustratif, en attendant les résultat des travaux du projet <a href=\"https://idefese.wordpress.com/\">IDEFESE</a>.\r\n            Les données sur les <a href=\"http://data.iau-idf.fr/datasets?q=espaces+verts&sort_by=relevance\">espaces verts</a> et sur \r\n            le <a href=\"http://data.iau-idf.fr/datasets?q=r%C3%A9seau+hydrographique+principal+simplifi%C3%A9+d%27%C3%8Ele-de-france&sort_by=relevance\"> réseau hydrographique </a> proviennent de l'IAU Ile-de-France.</p>\r\n            \r\n            <p>Nos remerciements à Perrine Hamel, hydrologue du Natural Capital Project, pour la supervision du projet.</p>\r\n            \r\n            <p>Le logo du perroquet a été réalisé par <a href=\"https://www.flaticon.com/authors/freepik\">Freepik</a> pour <a href=\"http://www.flaticon.com/\">Flaticon</a>.</p>\r\n        </section>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.about-wrapper {\r\n    width: 45%;\r\n    height: 60%;\r\n    position: fixed;\r\n    top: 20%;\r\n    left: 18%;\r\n    z-index: 500;\r\n}\r\n\r\n.about-box {\r\n    width: 100%;\r\n    height: 100%;\r\n    box-shadow: 0 0 4px rgba(0, 0, 0, .2);\r\n    background: #fff;\r\n    padding: 40px;\r\n    box-sizing: border-box;\r\n    overflow: auto;\r\n\r\n    h2 {\r\n        margin-top: 0;\r\n    }\r\n\r\n    li {\r\n        font-size: .9em;\r\n    }\r\n\r\n    &:after {\r\n        content: \"\";\r\n        display: block;\r\n        height: 40px;\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n.about-close {\r\n    height: 40px;\r\n    width: 40px;\r\n    box-shadow: -2px 0 2px rgba(#000, .2);\r\n    background: #fff;\r\n    outline: none;\r\n    font-size: 14pt;\r\n    line-height: 40px;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    color: #000;\r\n    position: absolute;\r\n    left: -40px;\r\n    top: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./About.vue?vue&type=template&id=dde62ab2&\"\nimport script from \"./About.vue?vue&type=script&lang=js&\"\nexport * from \"./About.vue?vue&type=script&lang=js&\"\nimport style0 from \"./About.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"About.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"zoom-control\"},[_c('a',{staticClass:\"minus\",on:{\"click\":function($event){$event.preventDefault();_vm.$emit('zoomOut')}}},[_vm._v(\"-\")]),_c('a',{staticClass:\"plus\",on:{\"click\":function($event){$event.preventDefault();_vm.$emit('zoomIn')}}},[_vm._v(\"+\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <section class=\"zoom-control\">\r\n    <a class=\"minus\" @click.prevent=\"$emit('zoomOut')\">-</a>\r\n    <a class=\"plus\" @click.prevent=\"$emit('zoomIn')\">+</a>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nexport default {}\r\n</script>\r\n\r\n<style lang=\"scss\" type=\"text/scss\">\r\n.zoom-control {\r\n  width: 80px;\r\n\r\n  a {\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ZoomControl.vue?vue&type=template&id=1fc96b4c&\"\nimport script from \"./ZoomControl.vue?vue&type=script&lang=js&\"\nexport * from \"./ZoomControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ZoomControl.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ZoomControl.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"location-control\"},[_c('a',{staticClass:\"locate\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.locate($event)}}},[_c('i',{staticClass:\"fas fa-map-marker-alt\"})]),_c('div',{class:{search: true, active: _vm.searchExpanded}},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleSearch($event)}}},[(_vm.searchExpanded)?_c('i',{staticClass:\"fas fa-search-minus\"}):_c('i',{staticClass:\"fas fa-search-location\"})]),_c('input',{ref:\"searchInput\",staticClass:\"autocomplete\",attrs:{\"type\":\"text\"},on:{\"keyup\":function($event){if(!('button' in $event)&&$event.keyCode!==27){ return null; }_vm.searchExpanded = false}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <section class=\"location-control\">\r\n    <a href=\"#\" class=\"locate\"\r\n        @click.prevent=\"locate\">\r\n      <i class=\"fas fa-map-marker-alt\"></i>\r\n    </a>\r\n    <div :class=\"{search: true, active: searchExpanded}\">\r\n      <a href=\"#\" @click.prevent=\"toggleSearch\">\r\n        <i v-if=\"searchExpanded\" class=\"fas fa-search-minus\"></i>\r\n        <i v-else class=\"fas fa-search-location\"></i>\r\n      </a>\r\n      <input type=\"text\" class=\"autocomplete\" ref=\"searchInput\"\r\n        @keyup.27=\"searchExpanded = false\">\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport Config from '../config.json'\r\n\r\nexport default {\r\n  props: ['onLocation'],\r\n\r\n  data: () => ({\r\n    searchExpanded: false\r\n  }),\r\n\r\n  mounted() {\r\n    const api = new google.maps.places.Autocomplete(this.$refs.searchInput)\r\n    api.setFields(['geometry'])\r\n    api.setOptions({strictBounds: true})\r\n    api.setBounds({\r\n      north: Config.viewport.topLatitude,\r\n      south: Config.viewport.bottomLatitude,\r\n      west: Config.viewport.leftLongitude,\r\n      east: Config.viewport.rightLongitude,\r\n    })\r\n\r\n    api.addListener('place_changed', () => {\r\n      const place = api.getPlace()\r\n\r\n      if (!place.geometry) {\r\n        this.onLocation(null, null)\r\n        return\r\n      }\r\n\r\n      this.searchExpanded = false\r\n      this.onLocation([\r\n        place.geometry.location.lat(),\r\n        place.geometry.location.lng()\r\n      ])\r\n    })\r\n  },\r\n\r\n  methods: {\r\n    locate() {\r\n      if (navigator.geolocation) {\r\n        navigator.geolocation.getCurrentPosition(pos => {\r\n          if (pos){\r\n            this.onLocation([pos.coords.latitude, pos.coords.longitude])\r\n          }\r\n        })\r\n      }\r\n    },\r\n\r\n    toggleSearch() {\r\n      this.searchExpanded ^= true\r\n      this.$refs.searchInput.focus()\r\n    },\r\n\r\n    keypressSearch(e) {\r\n      alert(JSON.stringify(e))\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" type=\"text/scss\">\r\n.location-control a i {\r\n  color: #111;\r\n  font-size: 18px;\r\n}\r\n\r\n.location-control .search {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  a {\r\n    border: 0 !important;\r\n  }\r\n\r\n  .autocomplete {\r\n    transition: width .25s;\r\n    height: 30px;\r\n    width: 0;\r\n    padding: 0;\r\n    border: 0 none;\r\n  }\r\n}\r\n\r\n.location-control .search.active .autocomplete {\r\n  width: 300px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LocationControl.vue?vue&type=template&id=af920352&\"\nimport script from \"./LocationControl.vue?vue&type=script&lang=js&\"\nexport * from \"./LocationControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LocationControl.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"LocationControl.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"layers\"},[_c('h3',[_vm._v(\"Couches\")]),_c('div',{staticClass:\"buttons\"},_vm._l((_vm.layers),function(layer){return (!layer.hidden)?_c('a',{class:{ active: _vm.value == layer.path },on:{\"click\":function($event){$event.preventDefault();_vm.select(layer)}}},[_c('span',{staticClass:\"icon\",domProps:{\"innerHTML\":_vm._s(layer.icon)}}),_c('span',[_vm._v(_vm._s(layer.name))]),(!layer.loaded)?_c('div',{staticClass:\"loader-tile-grid\"},[_c('div',{staticClass:\"loader-tile loader-tile1\"}),_c('div',{staticClass:\"loader-tile loader-tile2\"}),_c('div',{staticClass:\"loader-tile loader-tile3\"}),_c('div',{staticClass:\"loader-tile loader-tile4\"}),_c('div',{staticClass:\"loader-tile loader-tile5\"}),_c('div',{staticClass:\"loader-tile loader-tile6\"}),_c('div',{staticClass:\"loader-tile loader-tile7\"}),_c('div',{staticClass:\"loader-tile loader-tile8\"}),_c('div',{staticClass:\"loader-tile loader-tile9\"})]):_vm._e()]):_vm._e()}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <section class=\"layers\">\r\n    <h3>Couches</h3>\r\n\r\n    <div class=\"buttons\">\r\n      <a v-for=\"layer in layers\"\r\n        v-if=\"!layer.hidden\"\r\n        :class=\"{ active: value == layer.path }\"\r\n        @click.prevent=\"select(layer)\">\r\n        <span class=\"icon\" v-html=\"layer.icon\"></span>\r\n        <span>{{ layer.name }}</span>\r\n\r\n        <div v-if=\"!layer.loaded\" class=\"loader-tile-grid\">\r\n          <div class=\"loader-tile loader-tile1\"></div>\r\n          <div class=\"loader-tile loader-tile2\"></div>\r\n          <div class=\"loader-tile loader-tile3\"></div>\r\n          <div class=\"loader-tile loader-tile4\"></div>\r\n          <div class=\"loader-tile loader-tile5\"></div>\r\n          <div class=\"loader-tile loader-tile6\"></div>\r\n          <div class=\"loader-tile loader-tile7\"></div>\r\n          <div class=\"loader-tile loader-tile8\"></div>\r\n          <div class=\"loader-tile loader-tile9\"></div>\r\n        </div>\r\n      </a>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  props: ['layers', 'value'],\r\n\r\n  methods: {\r\n    select(layer) {\r\n      if (!layer.loading) {\r\n        this.$emit('input', layer.path)\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" type=\"text/scss\">\r\n.layers {\r\n  max-height: 600px;\r\n  height: 80%;\r\n  width: 80px;\r\n  border: 1px solid #bbb;\r\n  box-shadow: 0 0 3px rgba(#000, .1);\r\n  background: #fff;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.layers .buttons {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n\r\n.layers h3, .layers a {\r\n  text-transform: uppercase;\r\n}\r\n\r\n.layers h3 {\r\n  width: 100%;\r\n  margin: 0;\r\n  padding: 7px 0;\r\n}\r\n\r\n.layers a {\r\n  display: flex;\r\n  position: relative;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  outline: none;\r\n  cursor: pointer;\r\n\r\n  height: 80px;\r\n  text-decoration: none;\r\n  border-bottom: 1px solid #bbb;\r\n  color: #333;\r\n  font-size: 10pt;\r\n\r\n  &.active {\r\n    background: #f3f3f3;\r\n    box-shadow: inset 0 0 2px rgba(0, 0, 0, .1);\r\n  }\r\n\r\n  &:first-child {\r\n    border-top: 1px solid #bbb;\r\n  }\r\n\r\n  .icon {\r\n    font-size: 1rem;\r\n    margin-bottom: 3px;\r\n  }\r\n}\r\n\r\n// Source: http://tobiasahlin.com/spinkit/\r\n.loader-tile-grid {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.loader-tile-grid .loader-tile {\r\n  width: 33%;\r\n  height: 33%;\r\n  background-color: #eee;\r\n  float: left;\r\n\r\n  animation: loader-tileGridScaleDelay 1.3s infinite ease-in-out;\r\n}\r\n\r\n.loader-tile-grid .loader-tile1 { animation-delay: 0.2s; }\r\n.loader-tile-grid .loader-tile2 { animation-delay: 0.3s; }\r\n.loader-tile-grid .loader-tile3 { animation-delay: 0.4s; }\r\n.loader-tile-grid .loader-tile4 { animation-delay: 0.1s; }\r\n.loader-tile-grid .loader-tile5 { animation-delay: 0.2s; }\r\n.loader-tile-grid .loader-tile6 { animation-delay: 0.3s; }\r\n.loader-tile-grid .loader-tile7 { animation-delay: 0s; }\r\n.loader-tile-grid .loader-tile8 { animation-delay: 0.1s; }\r\n.loader-tile-grid .loader-tile9 { animation-delay: 0.2s; }\r\n\r\n@keyframes loader-tileGridScaleDelay {\r\n  0%, 70%, 100% {\r\n    transform: scale3D(1, 1, 1);\r\n  } 35% {\r\n    transform: scale3D(0, 0, 1);\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Layers.vue?vue&type=template&id=56fe9083&\"\nimport script from \"./Layers.vue?vue&type=script&lang=js&\"\nexport * from \"./Layers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Layers.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Layers.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map-container\"},[_c('section',{ref:\"map\",staticClass:\"map\"}),_c('svg',{ref:\"circle_svg\",staticClass:\"EV-circle-svg\"}),_c('svg',{ref:\"svg\",staticClass:\"EV-svg\"}),(_vm.hasFutureAvailable && !_vm.isFuture)?_c('section',{staticClass:\"year\"},[_c('p',[_vm._v(_vm._s(_vm.currentYear))]),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.$emit('toggleFuture'); })($event)}}},[_c('i',{staticClass:\"fas fa-fast-forward\"})])]):(_vm.hasFutureAvailable)?_c('section',{staticClass:\"year\"},[_c('p',[_vm._v(\"2025\")]),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.$emit('toggleFuture'); })($event)}}},[_c('i',{staticClass:\"fas fa-fast-backward\"})])]):_vm._e(),_c('section',{staticClass:\"legend\"},[_c('div',{ref:\"legend\",staticClass:\"legend-inner\"}),(_vm.isEspacesVerts)?_c('section',[_c('h3',[_vm._v(\"Espace naturels\")]),_c('figure',[_c('div',{staticClass:\"item\",style:({backgroundColor: _vm.forestColor})}),_c('figcaption',[_vm._v(\"Espaces boisés\")])]),_c('figure',[_c('div',{staticClass:\"item\",style:({backgroundColor: _vm.waterColor})}),_vm._m(0)]),_c('figure',[_c('div',{staticClass:\"item\",style:({backgroundColor: _vm.greenColor})}),_vm._m(1)])]):(_vm.currentUnit)?_c('section',[_c('p',[_vm._v(\"(\"+_vm._s(_vm.currentUnit)+\")\")])]):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('figcaption',[_vm._v(\"Fleuves et \"),_c('br'),_vm._v(\"espaces en eau\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('figcaption',[_vm._v(\"Espaces verts et \"),_c('br'),_vm._v(\"espaces de loisirs\")])}]\n\nexport { render, staticRenderFns }","//this file contains a set of variables. Those variables should be treated as global variables, and can be used anywhere\r\n//used because otherwise, we would have either a 800 lines file, or 15 parameters functions...\r\n\r\nvar cachedLayers = {} //placehoder for the layers, to compute them only once\r\n\r\nvar currentLayerPath = \"\" //path of the currently selected layer\r\n\r\nvar map = null //reference to the leaflet map\r\n\r\nvar currentGeoLat = null //current latitude of the cursor\r\n\r\nvar currentGeoLng = null //current longitude of the cursos\r\n\r\nvar svg_EV = null //reference to the svg of the \"espaces verts\"\r\n\r\nvar svg_circle_EV = null //reference to the svg of the circle around the cursot\r\n\r\nvar interComms = null //reference to the interComms element, i.e. a d3.selectAll(\"path\")\r\n\r\nvar voronoi = null //reference to the voronoi element, i.e. a d3.selectAll(\"path\")\r\n\r\nvar imgs = null //reference to the current layer image, i.e. a d3.selectAll(\"image\")\r\n\r\nvar imgs_EV = null //reference to the \"espaces verts\" image, i.e. a d3.selectAll(\"image\")\r\n\r\nvar update_parameters = {} //parameters used by the update function, such as tl/br coordinates, or a \"hide\" boolean\r\n\r\nvar markerElement = null //reference to marker element, i.e. a d3.selectAll(\"image\")\r\n\r\nvar canvas = null //reference to the canvas used to generate layers\r\n\r\nvar voronoi_shape = null //shapes of the voronois, content of the geojson\r\n\r\nvar interComm_shape = null //shapes of the interComms, content of the geojson\r\n\r\nvar firstVoronoiByInterComm = [] //array containing infos about the id of the first voronoi inside a given interComm, since voronoi ids are consecutive (e.g. ids 0-7 are inside interComm 0)\r\n\r\nvar pathGenerator = null //pathGenerator, used to project paths (latLng) on the map\r\n\r\nvar defs_path = null //reference to the d3.selectAll(\"path\") used to crop the layer to the current voronoi area\r\n\r\nvar legend_element = null //element (div) that will contain the layer legend\r\n\r\nvar color_legend_canvas = null //element (canvas) that will contain the layer legend (the colors)\r\n\r\nvar color_legend_svg = null //element (div) that will contain the layer legend (the labels)\r\n\r\nvar onSchools = null //onSchools callback function, called when the number of schools changes (e.g. we hovered another area)\r\n\r\nvar onHistChange = null //onHistChange callback function, called when the histogram must be changed (e.g. we hovered another area)\r\n\r\nvar highlightedInterComm = -1 //id of the currently highlighted interComm\r\n\r\nvar initialBounds = null //initial bounds of the map (set to paris)\r\n\r\nvar markerIcon = {} //informations about the marker icon\r\n\r\nvar lastMouseDownX = 0 //coordinates of the last mouse Down event\r\n\r\nvar lastMouseDownY = 0 //coordinates of the last mouse Down event\r\n\r\nexport default {cachedLayers,\r\n\t\t\t\tcurrentLayerPath,\r\n\t\t\t\tmap,\r\n\t\t\t\tcurrentGeoLat,\r\n\t\t\t\tcurrentGeoLng,\r\n\t\t\t\tsvg_EV,\r\n\t\t\t\tsvg_circle_EV,\r\n\t\t\t\tinterComms,\r\n\t\t\t\tvoronoi,\r\n\t\t\t\timgs,\r\n\t\t\t\timgs_EV,\r\n\t\t\t\tupdate_parameters,\r\n\t\t\t\tmarkerElement,\r\n\t\t\t\tcanvas,\r\n\t\t\t\tvoronoi_shape,\r\n\t\t\t\tinterComm_shape,\r\n\t\t\t\tfirstVoronoiByInterComm,\r\n\t\t\t\tpathGenerator,\r\n\t\t\t\tdefs_path,\r\n\t\t\t\tlegend_element,\r\n\t\t\t\tcolor_legend_canvas,\r\n\t\t\t\tcolor_legend_svg,\r\n\t\t\t\tonSchools,\r\n\t\t\t\tonHistChange,\r\n\t\t\t\thighlightedInterComm,\r\n\t\t\t\tinitialBounds,\r\n\t\t\t\tmarkerIcon,\r\n\t\t\t\tlastMouseDownX,\r\n\t\t\t\tlastMouseDownY}","var Config = require('./config.json')\r\nimport helpers_f from './helpers.js'\r\nimport shared from './shared.js'\r\n\r\nfunction update_clip() {\r\n  var map = shared.map\r\n  var cachedLayers = shared.cachedLayers\r\n  var currentLayerPath = shared.currentLayerPath\r\n  var defs_path = shared.defs_path\r\n  function clip_projectPoint(x, y) {\r\n\r\n    var default_tl_point = map.latLngToLayerPoint([cachedLayers[currentLayerPath].tl_lat, cachedLayers[currentLayerPath].tl_lng])\r\n    var default_br_point = map.latLngToLayerPoint([cachedLayers[currentLayerPath].br_lat, cachedLayers[currentLayerPath].br_lng])\r\n\r\n    var width = (default_br_point.x - default_tl_point.x)\r\n    var height = (default_br_point.y - default_tl_point.y)\r\n\r\n    var point = map.latLngToLayerPoint(L.latLng(y, x))\r\n\r\n    var tx = (point.x - default_tl_point.x) / (default_br_point.x - default_tl_point.x) * (width - 1)\r\n    var ty = (point.y - default_tl_point.y) / (default_br_point.y - default_tl_point.y) * (height - 1)\r\n\r\n    this.stream.point(tx, ty);\r\n  }\r\n\r\n  var clip_transform = d3.geo.transform({\r\n    point: clip_projectPoint\r\n  });\r\n  var clip_path = d3.geo.path()\r\n    .projection(clip_transform);\r\n  defs_path.attr(\"d\", clip_path)\r\n}\r\n\r\nfunction update_EV_preview(mouseX,mouseY){\r\n  var svg_EV = shared.svg_EV\r\n  var svg_circle_EV = shared.svg_circle_EV\r\n  var map = shared.map\r\n  var cachedLayers = shared.cachedLayers\r\n  var imgs_EV = shared.imgs_EV\r\n\r\n  var layer_path = Config.EV_path\r\n  if (!cachedLayers[Config.EV_path]){\r\n    return\r\n  }\r\n\r\n  var svg_width = parseInt(svg_EV.style(\"width\").substr(0,svg_EV.style(\"width\").length-2))\r\n  var svg_height = parseInt(svg_EV.style(\"height\").substr(0,svg_EV.style(\"width\").length-2))\r\n  var svg_circle_width = parseInt(svg_circle_EV.style(\"width\").substr(0,svg_circle_EV.style(\"width\").length-2))\r\n  var svg_circle_height = parseInt(svg_circle_EV.style(\"height\").substr(0,svg_circle_EV.style(\"width\").length-2))\r\n\r\n  svg_EV.attr(\"style\",\"top:\"+(mouseY - svg_height - 15)+\"px; left:\"+(mouseX +15)+\"px; display:'';\")\r\n  shared.svg_circle_EV.attr(\"style\",\"top:\"+(mouseY - svg_circle_height/2)+\"px; left:\"+(mouseX - svg_circle_width/2)+\"px; display:'';\")\r\n\r\n  var magnifyingRatio = svg_width/svg_circle_width\r\n\r\n  var tl = L.latLng(cachedLayers[layer_path].tl_lat,cachedLayers[layer_path].tl_lng)\r\n  var br = L.latLng(cachedLayers[layer_path].br_lat,cachedLayers[layer_path].br_lng)\r\n\r\n  var tl_pixels = map.latLngToContainerPoint(tl)\r\n  var br_pixels = map.latLngToContainerPoint(br)\r\n\r\n  var pixels_on_left = mouseX - tl_pixels.x\r\n  var pixels_on_top = mouseY - tl_pixels.y\r\n\r\n  var magnified_tl_pixels = L.point(mouseX - pixels_on_left * magnifyingRatio,\r\n                                    mouseY - pixels_on_top * magnifyingRatio)\r\n\r\n  var image_width = (map.latLngToLayerPoint(br).x - map.latLngToLayerPoint(tl).x) * magnifyingRatio\r\n  var image_height = (map.latLngToLayerPoint(br).y - map.latLngToLayerPoint(tl).y) * magnifyingRatio\r\n\r\n  imgs_EV.attr('width', image_width)\r\n  imgs_EV.attr('height', image_height)\r\n\r\n  imgs_EV.attr(\"transform\",\r\n    \"translate(\" +\r\n      (+ magnified_tl_pixels.x - mouseX + svg_width/2) + \",\" +\r\n      (+ magnified_tl_pixels.y - mouseY + svg_height/2) + \")\"\r\n  )\r\n}\r\n\r\nfunction update_chart(i,layerURL,voro) {\r\n  var cachedLayers = shared.cachedLayers\r\n  var info = cachedLayers[layerURL]\r\n  if (!info) {\r\n    return;\r\n  }\r\n  var data=[]\r\n  if (voro == true) {\r\n    data = info.voronoi_hist[i]\r\n  } else {\r\n    data = info.interComm_hist[i]\r\n  }\r\n\r\n  data[0]=0 // ignore 0 values\r\n  shared.onHistChange(helpers_f.range(256),data)\r\n\r\n}\r\n\r\nfunction update_text_school(i,layerURL,voro){\r\n  var cachedLayers = shared.cachedLayers\r\n  if(layerURL==Config.Urban_cooling){\r\n    var info = cachedLayers[Config.Ecole_path]\r\n    if (!info) {\r\n        return;\r\n    }\r\n    var data=[]\r\n    if (voro == true) {\r\n      data = info.voronoi_hist[i].slice(-1).pop()\r\n    } else {\r\n      data = info.interComm_hist[i].slice(-1).pop()\r\n    }\r\n    shared.onSchools(data)\r\n  }\r\n  else{\r\n    shared.onSchools(null)\r\n  }\r\n}\r\n\r\n/**\r\n * Updates the marker element on the map with the right coordinates.\r\n */\r\nfunction updateMarker() {\r\n  var map = shared.map\r\n  var currentGeoLat = shared.currentGeoLat\r\n  var currentGeoLng = shared.currentGeoLng\r\n  var markerElement = shared.markerElement\r\n  if (currentGeoLat && currentGeoLng) {\r\n    const point = map.latLngToLayerPoint([currentGeoLat, currentGeoLng])\r\n    const x = point.x - shared.markerIcon.iconAnchor[0]\r\n    const y = point.y - shared.markerIcon.iconAnchor[1]\r\n    markerElement.attr('visibility', 'visible')\r\n    markerElement.attr('transform', `translate(${x}, ${y})`)\r\n  } else {\r\n    markerElement.attr('visibility', 'hidden')\r\n  }\r\n}\r\n\r\nfunction updateMap() {//add here everything that could potentially change\r\n  var map = shared.map\r\n  var cachedLayers = shared.cachedLayers\r\n  var voronoi = shared.voronoi\r\n  var interComms = shared.interComms\r\n  var imgs = shared.imgs\r\n  var imgs_EV = shared.imgs_EV\r\n  var update_parameters = shared.update_parameters\r\n  var path = shared.pathGenerator\r\n\r\n  if (update_parameters.hide) {\r\n    console.log('hidden!')\r\n    interComms.attr('visibility', 'hidden')\r\n    voronoi.attr('visibility', 'hidden')\r\n    imgs.attr('visibility', 'hidden')\r\n    imgs_EV.attr('visibility', 'hidden')\r\n    return;\r\n  } else {\r\n    interComms.attr('visibility', 'visible')\r\n    voronoi.attr('visibility', 'visible')\r\n    imgs.attr('visibility', 'visible')\r\n    imgs_EV.attr('visibility', 'visible')\r\n  }\r\n\r\n  var tl = update_parameters.tl\r\n  var br = update_parameters.br\r\n\r\n  console.log('UPDATING')\r\n  var width = (map.latLngToLayerPoint(br).x - map.latLngToLayerPoint(tl).x)\r\n  var height = (map.latLngToLayerPoint(br).y - map.latLngToLayerPoint(tl).y)\r\n  imgs.attr(\"transform\",\r\n    function(d) {\r\n      var point = map.latLngToLayerPoint(tl)\r\n      return \"translate(\" +\r\n        point.x + \",\" +\r\n        point.y + \")\";\r\n    }\r\n  )\r\n\r\n  imgs.attr('width', width)\r\n  imgs.attr('height', height)\r\n  interComms.attr(\"d\", path)\r\n  voronoi.attr(\"d\", path)\r\n  update_clip()\r\n  updateMarker()\r\n  shared.svg_EV.attr(\"style\",\"display:none;\")\r\n  shared.svg_circle_EV.attr(\"style\",\"display:none;\")\r\n}\r\n\r\nexport default{update_clip,update_EV_preview,update_chart,update_text_school,updateMarker,updateMap}","const colorSchemeDict = {\r\n  0:d3.interpolateOranges,\r\n  1:d3.interpolateRdBu,\r\n  2:d3.interpolateBlues,\r\n  3:d3.interpolateGnBu,\r\n  4:d3.interpolateReds,\r\n}\r\n\r\nimport shared from './shared.js'\r\nimport update_f from './update.js'\r\n\r\n/**\r\n * Loads a JSON containment file and parses it.\r\n */\r\nfunction loadContainmentFile (url) {\r\n  return fetch(url)\r\n    .then(res => res.json())\r\n    .then(json => {\r\n      json.data = JSON.parse(json.data)\r\n      return json\r\n    })\r\n}\r\n\r\nconst MAP_TILES = 'https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png'\r\nconst MAP_ATTRIB = '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n/**\r\n * Creates a Leaflet map of the Paris area and returns it.\r\n */\r\nfunction createMap (element) {\r\n  shared.map = L.map(element, {\r\n    zoomControl: false\r\n  })\r\n  var map = shared.map\r\n  map.fitBounds(shared.initialBounds)\r\n  map.setMaxBounds(map.getBounds())\r\n\r\n  const base = L.tileLayer(MAP_TILES, {\r\n    minZoom: 9,\r\n    maxZoom: 14, // Toner Light won't zoom further than 14.\r\n    attribution: MAP_ATTRIB\r\n  })\r\n\r\n  base.addTo(map)\r\n}\r\n\r\n/**\r\n * Returns whether a given point is within the Paris region.\r\n */\r\nfunction isWithinParis(point) {\r\n  return shared.interComm_shape.features.some(s => d3.geoContains(s, point))\r\n}\r\n\r\n/**\r\n * Sets the position of the geolocation marker.\r\n */\r\nfunction setLocation (lat, lng) {\r\n  if (!lat || !lng || !isWithinParis([lng, lat])) {\r\n    lat = null\r\n    lng = null\r\n    shared.map.fitBounds(shared.initialBounds)\r\n  } else {\r\n    //console.log(lat,lng)\r\n    shared.map.setView(new L.LatLng(lat, lng),11)\r\n    //shared.map.setZoom(11)\r\n  }\r\n\r\n  shared.currentGeoLat = lat\r\n  shared.currentGeoLng = lng\r\n  update_f.updateMarker()\r\n}\r\n\r\n\r\nfunction getColorsFromScheme (colorSchemeId){\r\n  var currentScheme = colorSchemeDict[colorSchemeId]\r\n  var range = []\r\n  for (var i=0; i<256; ++i){\r\n    range.push(currentScheme(i/255))\r\n  }\r\n  return range\r\n}\r\n\r\n\r\n// create continuous color legend\r\nfunction fillScale (scale_canvas, scale_svg, colorScale, minValue, maxValue) {\r\n  const legendHeight = 200\r\n  const legendWidth = 70\r\n  const margin = {top: 5, right: 30, bottom: 5, left: 0}\r\n\r\n  var canvas = scale_canvas\r\n    .attr(\"height\", legendHeight - margin.top - margin.bottom)\r\n    .attr(\"width\", 1)\r\n    .style(\"height\", (legendHeight - margin.top - margin.bottom) + \"px\")\r\n    .style(\"width\", (legendWidth - margin.left - margin.right) + \"px\")\r\n    .style(\"position\", \"absolute\")\r\n    .style(\"top\", (margin.top) + \"px\")\r\n    .style(\"left\", (margin.left) + \"px\")\r\n    .node();\r\n\r\n  var ctx = canvas.getContext(\"2d\");\r\n\r\n  var legendScale = height =>\r\n    colorScale(((legendHeight - margin.top - margin.bottom) - height)/ (legendHeight - margin.top - margin.bottom) * 255)\r\n\r\n  var image = ctx.createImageData(1, (legendHeight - margin.top - margin.bottom));\r\n\r\n  for (var i=0; i<legendHeight - margin.top - margin.bottom; ++i){\r\n    var c = d3.rgb(legendScale(i));\r\n    image.data[4*i] = c.r;\r\n    image.data[4*i + 1] = c.g;\r\n    image.data[4*i + 2] = c.b;\r\n    image.data[4*i + 3] = 255;\r\n  }\r\n  \r\n  ctx.putImageData(image, 0, 0);\r\n\r\n  var legendAxis = d3.axisRight()\r\n    .scale(d3.scaleLinear().domain([maxValue, minValue]).range([1, legendHeight - margin.bottom - margin.top - 1]))\r\n    .tickSize(6)\r\n    .ticks(8);\r\n\r\n  var svg = scale_svg\r\n    .attr(\"height\", `${legendHeight}px`)\r\n    .attr(\"width\", `${legendWidth}px`)\r\n    .style(\"position\", \"absolute\")\r\n    .style(\"left\", \"0px\")\r\n    .style(\"top\", \"0px\")\r\n\r\n  svg\r\n    .select(\"g\")\r\n    .attr(\"class\", \"axis\")\r\n    .attr(\"transform\", `translate(${legendWidth - margin.left - margin.right}, ${margin.top - 1})`)\r\n    .call(legendAxis);\r\n}\r\n\r\n\r\nfunction computeColorRange (percentiles,colors){\r\n  var domain_percentiles = percentiles.slice()\r\n  domain_percentiles.unshift(0)\r\n  domain_percentiles.push(255)\r\n\r\n  var domainLength = domain_percentiles.length\r\n  var rangeLength  = colors.length\r\n\r\n  var intermediateDomain = []\r\n  for (var i=0; i<rangeLength; ++i){\r\n    intermediateDomain[i] = i/(rangeLength-1)\r\n  }\r\n  var intermediateScale = d3.scale.linear().domain(intermediateDomain).range(colors)\r\n\r\n  var range_out = []\r\n  for (var i=0; i<domainLength; ++i){\r\n    var t = i/(domainLength-1)\r\n    range_out.push(intermediateScale(t))\r\n  }\r\n  return [domain_percentiles,range_out]\r\n}\r\n\r\n\r\nfunction blankStyle (feature) {\r\n  return {\r\n    opacity: 0,\r\n    fillOpacity: 0\r\n  };\r\n}\r\n\r\nfunction range (length){\r\n  var range = []\r\n  for (var i=0; i<length; ++i){\r\n    range[i]=i\r\n  }\r\n  return range\r\n}\r\n\r\nexport default {loadContainmentFile,createMap,setLocation,getColorsFromScheme,fillScale,computeColorRange,blankStyle,range}","var Config = require('./config.json')\r\nimport helpers_f from './helpers.js'\r\nimport shared from './shared.js'\r\nimport update_f from './update.js'\r\n\r\n\r\n/**\r\n * Loads, pre-processes and caches the layer with the given path.\r\n * This includes:\r\n * - Fetching the layer's JSON data;\r\n * - Fetching containment files.\r\n * - Preparing arrays for means, counts and histograms.\r\n * - Dispatching those computations to worker threads.\r\n */\r\nfunction loadLayer(path, isFuture, callback) {\r\n  var canvas = shared.canvas\r\n  var voronoi_shape = shared.voronoi_shape\r\n  var interComm_shape = shared.interComm_shape\r\n  if (shared.cachedLayers[path]) {\r\n    callback();\r\n    return;\r\n  }\r\n\r\n  let truePath = path\r\n  if (isFuture) {\r\n    truePath = Config.layers[path].future\r\n  }\r\n\r\n  fetch(truePath)\r\n    .then(res => res.json())\r\n    .then(json => {\r\n      console.log('Preloaded layer:', truePath)\r\n      \r\n      json.data = JSON.parse(json.data)\r\n      json.percentiles = JSON.parse(json.percentiles)\r\n\r\n      var pixels = json.data;\r\n\r\n      canvas.width = json.width\r\n      canvas.height = json.height\r\n\r\n      var tempContext = canvas.getContext(\"2d\");\r\n      tempContext.createImageData(canvas.width, canvas.height);\r\n\r\n      var len = canvas.height * canvas.width;\r\n      var workersCount = 1;\r\n      var finished = 0;\r\n      var segmentLength = len / workersCount;\r\n      var blockSize = canvas.height / workersCount;\r\n\r\n      //initalize means and counts arrays\r\n      var voronoi_means = []\r\n      var voronoi_counts = []\r\n      var voronoi_hist = {}\r\n\r\n      for (var i = 0; i < voronoi_shape.features.length; ++i) {\r\n        voronoi_counts[i] = 0\r\n        voronoi_means[i] = 0\r\n        voronoi_hist[i] = []\r\n        for (var j=0; j<256; ++j){\r\n          voronoi_hist[i][j]=0\r\n        }\r\n      }\r\n\r\n      var interComm_means = []\r\n      var interComm_counts = []\r\n      var interComm_hist = {}\r\n\r\n      for (var i = 0; i < interComm_shape.features.length; ++i) {\r\n        interComm_counts[i] = 0\r\n        interComm_means[i] = 0\r\n        interComm_hist[i] = []\r\n        for (var j=0; j<256; ++j){\r\n          interComm_hist[i][j]=0\r\n        }\r\n      }\r\n\r\n      shared.firstVoronoiByInterComm = []\r\n      var firstVoronoiByInterComm = shared.firstVoronoiByInterComm\r\n\r\n      for (var i = 0; i < interComm_shape.features.length; ++i) {\r\n        firstVoronoiByInterComm[i] = 10000 //bigger than the max, ~670\r\n      }\r\n\r\n      // Return a promise.\r\n      var onWorkEnded = function(e) {\r\n        var canvasData = e.data.result;\r\n        var index = e.data.index;\r\n\r\n        var interComm_counts_portion = e.data.interComm_counts\r\n        var interComm_means_portion = e.data.interComm_means\r\n        var voronoi_counts_portion = e.data.voronoi_counts\r\n        var voronoi_means_portion = e.data.voronoi_means\r\n        var firstVoronoiByInterCommPortion = e.data.firstVoronoiByInterComm\r\n        var voronoi_hist_portion = e.data.voronoi_hist\r\n        var interComm_hist_portion = e.data.interComm_hist\r\n\r\n        for (var i = 0; i < voronoi_shape.features.length; ++i) {\r\n          voronoi_counts[i] += voronoi_counts_portion[i]\r\n          voronoi_means[i] += voronoi_means_portion[i]\r\n\r\n          for (var j=0; j<256; ++j){\r\n            voronoi_hist[i][j] += voronoi_hist_portion[i][j]\r\n          }\r\n        }\r\n\r\n        for (var i = 0; i < interComm_shape.features.length; ++i) {\r\n          interComm_counts[i] += interComm_counts_portion[i]\r\n          interComm_means[i] += interComm_means_portion[i]\r\n\r\n          for (var j=0; j<256; ++j){\r\n            interComm_hist[i][j] += interComm_hist_portion[i][j]\r\n          }\r\n          \r\n\r\n          if (firstVoronoiByInterComm[i] > firstVoronoiByInterCommPortion[i]) {\r\n            firstVoronoiByInterComm[i] = firstVoronoiByInterCommPortion[i]\r\n          }\r\n        }\r\n\r\n        tempContext.putImageData(canvasData, 0, blockSize * index);\r\n        finished++;\r\n\r\n        if (finished == workersCount) {\r\n          if(path == Config.Ecole_path){\r\n            // Here we count the number of schools\r\n              for (var i = 0; i < voronoi_shape.features.length; ++i) {\r\n                  voronoi_means[i] /= 255\r\n              }\r\n              for (var i = 0; i < interComm_shape.features.length; ++i) {\r\n                  interComm_means[i] /= 255\r\n              }\r\n          }\r\n          else{\r\n            for (var i = 0; i < voronoi_shape.features.length; ++i) {\r\n              if (voronoi_counts[i] != 0) {\r\n                voronoi_means[i] /= voronoi_counts[i]\r\n              }\r\n            }\r\n            for (var i = 0; i < interComm_shape.features.length; ++i) {\r\n              if (interComm_counts[i] != 0) {\r\n                interComm_means[i] /= interComm_counts[i]\r\n              }\r\n            }\r\n          }\r\n              \r\n          var hist_buckets = [70, 140]; //TODO: change acodring to layer (hard-coded...)\r\n\r\n          var value = canvas.toDataURL(\"png\");\r\n          //imgs.attr(\"xlink:href\", value)\r\n          \r\n          shared.cachedLayers[truePath] = {\r\n            \"url\": value,\r\n            \"tl_lat\": json.tl_lat,\r\n            \"tl_lng\": json.tl_lng,\r\n            \"br_lat\": json.br_lat,\r\n            \"br_lng\": json.br_lng,\r\n            \"width\": canvas.width,\r\n            \"height\": canvas.height,\r\n            \"voronoi_means\": voronoi_means,\r\n            \"interComm_means\": interComm_means,\r\n            \"voronoi_hist\": voronoi_hist,\r\n            \"interComm_hist\": interComm_hist,\r\n            \"hist_buckets\": hist_buckets,\r\n            \"percentiles\" : json.percentiles,\r\n            \"layerUrl\": truePath\r\n          }\r\n\r\n          console.log('Processed layer:', truePath)\r\n\r\n          callback();\r\n        }\r\n      };\r\n\r\n      // FIXME(liautaud): Nested callbacks is a code smell.\r\n      // FIXME(liautaud): This should be done only once.\r\n\r\n      var domain = helpers_f.range(256)\r\n      var range = []\r\n      if (Config.layers[path] && Config.layers[path].useColorScheme){\r\n        range = helpers_f.getColorsFromScheme(Config.layers[path].colorScheme)\r\n      }\r\n      else{\r\n        var domain_range = helpers_f.computeColorRange(json.percentiles,Config.layers[path].colors)\r\n        var domain_continuous = domain_range[0]\r\n        var range_continuous = domain_range[1]\r\n        const colorScale = d3.scale.linear()\r\n          .range(range_continuous).domain(domain_continuous)\r\n\r\n        for (var i=0; i<256; ++i){\r\n          var color = d3.rgb(colorScale(i))\r\n          range.push(\"rgb(\"+color.r+\",\"+color.g+\",\"+color.b+\")\")\r\n        }\r\n      }\r\n\r\n      helpers_f.loadContainmentFile(\"data/voronoi_cont.json\").then(voronoiContainment => {\r\n        helpers_f.loadContainmentFile(\"data/intercomm_cont.json\").then(interCommContainment => {\r\n          for (var index = 0; index < workersCount; index++) {\r\n            var worker = new Worker(\"assets/pictureProcessor.js\");\r\n            worker.onmessage = onWorkEnded;\r\n            var canvasData = tempContext.getImageData(0, blockSize * index, canvas.width, blockSize);\r\n            worker.postMessage({\r\n              canvasData: canvasData,\r\n              pixels: pixels,\r\n              index: index,\r\n              length: segmentLength,\r\n              width: canvas.width,\r\n              height: canvas.height,\r\n              voronoiContainmentData: voronoiContainment.data,\r\n              interCommContainmentData: interCommContainment.data,\r\n              numVoronois: voronoi_shape.features.length,\r\n              numInterComms: interComm_shape.features.length,\r\n              tl_lat: json.tl_lat,\r\n              tl_lng: json.tl_lng,\r\n              br_lat: json.br_lat,\r\n              br_lng: json.br_lng,\r\n              colorDomain: domain,\r\n              colorRange: range\r\n            });\r\n          }\r\n        })\r\n      })\r\n    })\r\n\r\n  // TODO(liautaud): Return a Promise.\r\n}\r\n\r\n\r\n/**\r\n * Changes the current layer to the one with a given path.\r\n */\r\nfunction setLayer(layerPath, isFuture) {\r\n  var update_parameters = shared.update_parameters\r\n  var imgs = shared.imgs\r\n\r\n  if (!layerPath) {\r\n    update_parameters.hide = true\r\n    update_f.updateMap()\r\n    return;\r\n  }\r\n\r\n  let truePath = layerPath\r\n  if (isFuture) {\r\n    truePath = Config.layers[layerPath].future\r\n  }\r\n\r\n  this.loadLayer(layerPath, isFuture, () => {\r\n  if (layerPath == Config.EV_path){ //TODO: add parameter \"AlwaysShowLayer\" in config?\r\n      imgs.attr(\"clip-path\", \"\")\r\n    }\r\n    else{\r\n      imgs.attr(\"clip-path\", \"url(#clip)\")\r\n    }\r\n\r\n    // Once the layer is loaded, we can get it from the cache.\r\n    const layer = shared.cachedLayers[truePath]\r\n\r\n    update_parameters.tl = new L.LatLng(layer.tl_lat, layer.tl_lng)\r\n    update_parameters.br = new L.LatLng(layer.br_lat, layer.br_lng)\r\n    update_parameters.currentGeoLat = shared.currentGeoLat\r\n    update_parameters.currentGaoLng = shared.currentGeoLng\r\n\r\n    var min = 0\r\n    var max = 255\r\n\r\n    var domain = []\r\n    var range = []\r\n    if (Config.layers[layerPath].useColorScheme){\r\n      domain = helpers_f.range(256)\r\n      range = helpers_f.getColorsFromScheme(Config.layers[layerPath].colorScheme)\r\n    }\r\n    else{\r\n      var domain_range =helpers_f.computeColorRange(layer.percentiles,Config.layers[layerPath].colors)\r\n      domain = domain_range[0]\r\n      range = domain_range[1]\r\n    }\r\n\r\n\r\n    \r\n\r\n    const colorScale = d3.scale.linear()\r\n      .range(range).domain(domain)\r\n    shared.voronoi.attr('fill', (_, i) =>{\r\n      //console.log(layer.voronoi_means[i],colorScale(layer.voronoi_means[i]))\r\n      if (layerPath == Config.EV_path){\r\n        return \"#00000011\" //transparent\r\n      }\r\n      return colorScale(layer.voronoi_means[i])})\r\n\r\n    min = 0//Math.min(...layer.interComm_means)\r\n    max = 255//Math.max(...layer.interComm_means)\r\n\r\n    shared.interComms.attr('fill', (_, i) =>{\r\n      //console.log(layer.interComm_means[i],colorScale(layer.interComm_means[i]))\r\n      if (layerPath == Config.EV_path){\r\n        return \"#00000011\" //transparent\r\n      }\r\n      return colorScale(layer.interComm_means[i])})\r\n\r\n\r\n    // Reset the width and height of the canvas.\r\n    shared.canvas.width = layer.width\r\n    shared.canvas.height = layer.height\r\n\r\n    // Update the bounding box and current coordinates.\r\n    update_parameters.hide = false\r\n\r\n    update_f.updateMap()\r\n    shared.currentLayerPath = layerPath\r\n    imgs.attr('xlink:href', layer.url)\r\n\r\n    d3.select(shared.legend_element).style(\"display\",\"none\")\r\n\r\n    if (layerPath != Config.EV_path){\r\n      d3.select(shared.legend_element).style(\"display\",\"block\")\r\n      helpers_f.fillScale(shared.color_legend_canvas,shared.color_legend_svg,colorScale,Config.layers[layerPath].min_value,Config.layers[layerPath].max_value)\r\n    }\r\n  })\r\n}\r\n\r\nfunction setEVLayer(path){\r\n  shared.imgs_EV.attr(\"xlink:href\", shared.cachedLayers[Config.EV_path].url)\r\n}\r\n\r\nexport default {loadLayer,setLayer,setEVLayer}","var Config = require('./config.json')\r\nimport helpers_f from './helpers.js'\r\nimport shared from './shared.js'\r\nimport update_f from'./update.js'\r\n\r\n/**\r\n * returns a function that, gived data p and voronoi index j, returns one if and only if the voronoi j is inside the interComm interCommIndex\r\n */\r\nfunction oneIfInInterComm(interCommIndex) {\r\n  function oneIfInInterComm_(p, j) {\r\n    if (shared.firstVoronoiByInterComm[interCommIndex] <= j && (interCommIndex == shared.interComm_shape.features.length - 1 || shared.firstVoronoiByInterComm[interCommIndex + 1] > j)) {\r\n      return 1\r\n    } else {\r\n      return 0\r\n    }\r\n  }\r\n  return oneIfInInterComm_\r\n}\r\n\r\n/**\r\n * Defines the voronoi entity. Given an svg container (and some opacity parameters), will return a d3.selectAll(\"path\") element defining the inner areas (i.e. voronois)\r\n */\r\nfunction defineVoronoi(svg,emptyOpacity,fullOpacity){\r\n  return svg.append(\"g\").selectAll(\"path\")\r\n    .data(shared.voronoi_shape.features)\r\n    .enter().append('path')\r\n    .attr('d', shared.pathGenerator)\r\n    .attr('vector-effect', 'non-scaling-stroke')\r\n    .style('stroke', \"#666\")\r\n    .style(\"fill-opacity\", emptyOpacity)\r\n    .style(\"stroke-opacity\", emptyOpacity)\r\n    .on(\"mouseover\", function(d, i) { \r\n      // when the mouse hovers it, it should show the data behind, and become transparent\r\n      d3.select(this).style('fill-opacity', emptyOpacity);\r\n\r\n      //update the data clip to show the layer inside this voronoi\r\n      shared.defs_path.datum(d.geometry)\r\n      update_f.update_clip()\r\n\r\n      //additionally, update the right elements according to current voronoi\r\n      update_f.update_chart(i, shared.currentLayerPath, true, shared.onHistChange)\r\n      update_f.update_text_school(i, shared.currentLayerPath, true, shared.onSchools)\r\n    })\r\n    .on(\"mouseout\", function(d, i) {\r\n      //when the mouse goes out of this area, we should revert changes\r\n      if (shared.highlightedInterComm != -1) {\r\n        //if we are inside an interComm, fill again voronois inside the current interComm\r\n        d3.select(this).style('fill-opacity', oneIfInInterComm(shared.highlightedInterComm)(d, i));\r\n        d3.select(this).style('stroke-opacity', oneIfInInterComm(shared.highlightedInterComm)(d, i));\r\n      }\r\n\r\n      //revert clip for this area\r\n      shared.defs_path.datum([])\r\n      update_f.update_clip()\r\n      shared.svg_EV.attr(\"style\",\"display:none;\")\r\n      shared.svg_circle_EV.attr(\"style\",\"display:none;\")\r\n    })\r\n    .on(\"dblclick\", function(d, i) {\r\n      shared.interComms.style(\"pointer-events\", \"all\")\r\n      shared.map.fitBounds(shared.initialBounds) // zoom back to paris\r\n      shared.highlightedInterComm = -1\r\n      shared.interComms.style(\"fill-opacity\", fullOpacity)\r\n      shared.voronoi.style(\"fill-opacity\", emptyOpacity)\r\n      shared.voronoi.style(\"stroke-opacity\", emptyOpacity)\r\n\r\n      shared.defs_path.datum([])\r\n      update_f.update_clip()\r\n      shared.svg_EV.attr(\"style\",\"display:none;\")\r\n      shared.svg_circle_EV.attr(\"style\",\"display:none;\")\r\n    })\r\n    .on(\"mousemove\",function(){\r\n      if (d3.event && d3.event.clientX && d3.event.clientY && shared.currentLayerPath != Config.EV_path){\r\n        update_f.update_EV_preview(d3.event.clientX,d3.event.clientY)\r\n      }\r\n      else{\r\n        shared.svg_EV.attr(\"style\",\"display:none;\")\r\n        shared.svg_circle_EV.attr(\"style\",\"display:none;\")\r\n      }\r\n    })\r\n    .on(\"mousedown\",function(){\r\n      if (d3.event && d3.event.clientX && d3.event.clientY && shared.currentLayerPath != Config.EV_path){\r\n        //console.log(d3.event)\r\n        shared.lastMouseDownX = d3.event.clientX\r\n        shared.lastMouseDownY = d3.event.clientY\r\n      }\r\n    });\r\n}\r\n\r\n/**\r\n * Defines the voronoi entity. Given an svg container (and some opacity parameters), will return a d3.selectAll(\"path\") element defining the inner areas (i.e. voronois)\r\n */\r\nfunction defineInterComms(svg,emptyOpacity,fadedOpacity,fullOpacity){\r\n  return svg.append(\"g\").selectAll(\"path\")\r\n    .data(shared.interComm_shape.features)\r\n    .enter().append('path')\r\n    .attr('d', shared.path)\r\n    .attr('vector-effect', 'non-scaling-stroke')\r\n    .style('stroke', \"#333\")\r\n    .attr(\"fill\", \"#fff\")\r\n    .attr(\"fill-opacity\", fullOpacity)\r\n    .style(\"pointer-events\", \"all\")\r\n    .on(\"mouseover\", function(d, i) {\r\n      if (shared.highlightedInterComm != -1) {\r\n        if (i != shared.highlightedInterComm) {\r\n          d3.select(this).style('fill-opacity', fullOpacity);\r\n        } else {\r\n          d3.select(this).style('fill-opacity', emptyOpacity);\r\n        }\r\n      } else {\r\n        d3.select(this).style('fill-opacity', fadedOpacity);\r\n      }\r\n      update_f.update_chart(i, shared.currentLayerPath, true)\r\n      update_f.update_text_school(i, shared.currentLayerPath, false)\r\n    })\r\n    .on(\"mouseout\", function(d, i) {\r\n      if (shared.highlightedInterComm != -1) {\r\n        if (i == shared.highlightedInterComm) {\r\n          d3.select(this).style('fill-opacity', emptyOpacity);\r\n        } else {\r\n          d3.select(this).style('fill-opacity', fadedOpacity);\r\n        }\r\n      } else {\r\n        d3.select(this).style('fill-opacity', fullOpacity);\r\n      }\r\n      shared.svg_EV.attr(\"style\",\"display:none;\")\r\n      shared.svg_circle_EV.attr(\"style\",\"display:none;\")\r\n    })\r\n    .on(\"click\", function(d, i) {\r\n      if (!d3.event || !d3.event.clientX || !d3.event.clientY ||\r\n          Math.abs(d3.event.clientX - shared.lastMouseDownX) >= 5 || Math.abs(d3.event.clientY - shared.lastMouseDownY) >= 5){\r\n        return\r\n      }\r\n      shared.interComms.style(\"pointer-events\", \"all\") // now we can click/hover on every department\r\n      d3.select(this).style(\"pointer-events\", \"none\") // except the current one!\r\n\r\n      shared.interComms.style(\"fill-opacity\", fadedOpacity) //same here, show every intercomm except this one\r\n      d3.select(this).style('fill-opacity', emptyOpacity);\r\n      shared.highlightedInterComm = i\r\n\r\n\r\n      shared.voronoi.style(\"fill-opacity\", oneIfInInterComm(i))\r\n      shared.voronoi.style(\"stroke-opacity\", oneIfInInterComm(i))\r\n\r\n      var BBox = d3.select(this).node().getBBox()\r\n      var neBound = shared.map.layerPointToLatLng(L.point(BBox.x, BBox.y))\r\n      var swBound = shared.map.layerPointToLatLng(L.point(BBox.x + BBox.width, BBox.y + BBox.height))\r\n      shared.map.fitBounds(L.latLngBounds(neBound, swBound)) // zoom to department\r\n      shared.svg_EV.attr(\"style\",\"display:none;\")\r\n      shared.svg_circle_EV.attr(\"style\",\"display:none;\")\r\n    })\r\n    .on(\"mousemove\",function(){\r\n      if (d3.event && d3.event.clientX && d3.event.clientY && shared.currentLayerPath != Config.EV_path){\r\n        //console.log(d3.event)\r\n        update_f.update_EV_preview(d3.event.clientX,d3.event.clientY)\r\n      }\r\n      else{\r\n        shared.svg_EV.attr(\"style\",\"display:none;\")\r\n        shared.svg_circle_EV.attr(\"style\",\"display:none;\")\r\n      }\r\n    })\r\n    .on(\"mousedown\",function(){\r\n      if (d3.event && d3.event.clientX && d3.event.clientY){\r\n        //console.log(d3.event)\r\n        shared.lastMouseDownX = d3.event.clientX\r\n        shared.lastMouseDownY = d3.event.clientY\r\n      }\r\n    });\r\n}\r\n\r\nexport default {defineVoronoi,defineInterComms}","import Config from './config.json'\r\n\r\nimport helpers_f from './helpers.js'\r\nimport update_f from './update.js'\r\nimport layers_f from './layers.js'\r\nimport shapes_f from './shapes.js'\r\nimport shared from './shared.js'\r\n\r\nexport default function(element, EV_svg_element, EV_circle_svg_element, legend_element, error, interComm_shape, voronoi_shape, onHistChange, onSchools) {\r\n  shared.interComm_shape = interComm_shape\r\n  shared.voronoi_shape = voronoi_shape\r\n  shared.onHistChange = onHistChange\r\n  shared.onSchools = onSchools\r\n  shared.legend_element = legend_element\r\n\r\n  const default_tl = new L.LatLng(\r\n    Config.viewport.topLatitude,\r\n    Config.viewport.leftLongitude\r\n  )\r\n  const default_br = new L.LatLng(\r\n    Config.viewport.bottomLatitude,\r\n    Config.viewport.rightLongitude\r\n  )\r\n  shared.initialBounds = L.latLngBounds(default_tl, default_br)\r\n\r\n  d3.select(legend_element).style(\"display\",\"none\")\r\n  shared.color_legend_canvas = d3.select(legend_element)\r\n    .append(\"canvas\")\r\n\r\n  shared.color_legend_svg = d3.select(legend_element)\r\n    .append(\"svg\")\r\n  shared.color_legend_svg.append(\"g\")\r\n\r\n\r\n  /**\r\n   * Sets the position of the geolocation marker to the current position\r\n   * of the user (computed using the Geolocation API).\r\n   */\r\n  function setLocationFromCurrent() {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(pos => {\r\n        helpers_f.setLocation(pos.coords.latitude, pos.coords.longitude)\r\n      })\r\n    }\r\n  }\r\n\r\n  setLocationFromCurrent()\r\n\r\n  helpers_f.createMap(element) //TODO: if the window is small, the zoom is too far (> 14) and the map is grey, untill we zoom in\r\n\r\n  L.geoJson(interComm_shape, {\r\n    style: helpers_f.blankStyle\r\n  }).addTo(shared.map); //needed! otherwise a svg isn't generated, we use this one for practical purposes\r\n\r\n  var svg = d3.select(element).select(\".leaflet-zoom-animated\")\r\n\r\n  function projectPoint(x, y) {\r\n    var point = shared.map.latLngToLayerPoint(new L.LatLng(y, x));\r\n    this.stream.point(point.x, point.y);\r\n  }\r\n  var transform = d3.geo.transform({\r\n    point: projectPoint\r\n  });\r\n  shared.pathGenerator = d3.geo.path()\r\n    .projection(transform);\r\n\r\n  var defs = svg.append(\"defs\");\r\n  shared.defs_path = defs.append(\"path\")\r\n    .attr(\"id\", \"clip_path\")\r\n\r\n  defs.append(\"clipPath\")\r\n    .attr(\"id\", \"clip\")\r\n    .append(\"use\")\r\n    .attr(\"xlink:href\", \"#clip_path\");\r\n\r\n  shared.imgs = svg.selectAll(\"image\").data([0])\r\n    .enter()\r\n    .append(\"svg:image\")\r\n    .attr('x', 0)\r\n    .attr('y', 0)\r\n    .attr(\"xlink:href\", \"\")\r\n    .attr(\"clip-path\", \"\")\r\n    .attr(\"preserveAspectRatio\",\"none\")\r\n    .style(\"object-fit\",\"cover\")\r\n\r\n  update_f.update_clip()\r\n\r\n\r\n  var emptyOpacity = 0\r\n  var fadedOpacity = 0.4\r\n  var semiFullOpacity = 0.7\r\n  var fullOpacity = 1\r\n\r\n  shared.svg_EV = d3.select(EV_svg_element)\r\n    .attr(\"style\",\"display:none;\")\r\n\r\n  shared.svg_circle_EV = d3.select(EV_circle_svg_element)\r\n    .attr(\"style\",\"display:none;\")\r\n\r\n  shared.imgs_EV = shared.svg_EV.selectAll(\"image\").data([0])\r\n    .enter()\r\n    .append(\"svg:image\")\r\n    .attr('x', 0)\r\n    .attr('y', 0)\r\n    .attr(\"xlink:href\", \"\")\r\n    .attr(\"preserveAspectRatio\",\"none\")\r\n    .style(\"object-fit\",\"cover\")\r\n\r\n  var shape_EV = shared.svg_EV.append(\"g\")\r\n  shape_EV\r\n    .selectAll(\"path\")\r\n    .data([interComm_shape.features[0]])\r\n    .enter().append('path')\r\n    .attr('vector-effect', 'non-scaling-stroke')\r\n    .style('stroke', \"#000\")\r\n    .style(\"fill-opacity\", 0)\r\n    .style(\"stroke-opacity\", 1)\r\n\r\n\r\n  shared.voronoi = shapes_f.defineVoronoi(svg,emptyOpacity,fullOpacity)\r\n\r\n  shared.interComms = shapes_f.defineInterComms(svg,emptyOpacity,fadedOpacity,fullOpacity)\r\n\r\n  shared.markerIcon = {\r\n    iconUrl: 'assets/marker.png',\r\n    iconSize: [24, 24],\r\n    iconAnchor: [12, 24]\r\n  }\r\n\r\n  shared.markerElement = svg.append(\"g\").selectAll(\"image\").data([0])\r\n    .enter()\r\n    .append(\"svg:image\")\r\n    .attr(\"xlink:href\", shared.markerIcon.iconUrl)\r\n    .attr(\"width\", shared.markerIcon.iconSize[0])\r\n    .attr(\"height\", shared.markerIcon.iconSize[1])\r\n    .attr('visibility', 'hidden')\r\n    .style(\"pointer-events\", \"none\")\r\n\r\n  shared.canvas = document.createElement(\"canvas\")\r\n\r\n  shared.update_parameters = {\r\n    hide: true,\r\n  };\r\n\r\n  shared.map.on('viewreset', function(){update_f.updateMap()})\r\n\r\n  const zoomOut = shared.map.zoomOut.bind(shared.map)\r\n  const zoomIn = shared.map.zoomIn.bind(shared.map)\r\n\r\n  return [layers_f.loadLayer, layers_f.setLayer, helpers_f.setLocation, layers_f.setEVLayer, zoomOut, zoomIn]\r\n}","<template>\r\n  <div class=\"map-container\">\r\n    <section ref=\"map\" class=\"map\"></section>\r\n\r\n    <svg ref=\"circle_svg\" class=\"EV-circle-svg\"></svg> \r\n    <svg ref=\"svg\" class=\"EV-svg\"></svg>\r\n\r\n    <section class=\"year\" v-if=\"hasFutureAvailable && !isFuture\">\r\n      <p>{{ currentYear }}</p>\r\n      <a href=\"#\" @click.prevent=\"() => $emit('toggleFuture')\">\r\n        <i class=\"fas fa-fast-forward\"></i>\r\n      </a>\r\n    </section>\r\n    <section class=\"year\" v-else-if=\"hasFutureAvailable\">\r\n      <p>2025</p>\r\n      <a href=\"#\" @click.prevent=\"() => $emit('toggleFuture')\">\r\n        <i class=\"fas fa-fast-backward\"></i>\r\n      </a>\r\n    </section>\r\n\r\n    <section class=\"legend\">\r\n      <div ref=\"legend\" class=\"legend-inner\"></div>\r\n\r\n      <section v-if=\"isEspacesVerts\">\r\n        <h3>Espace naturels</h3>\r\n\r\n        <figure>\r\n          <div class=\"item\" :style=\"{backgroundColor: forestColor}\"></div>\r\n          <figcaption>Espaces boisés</figcaption>\r\n        </figure>\r\n        <figure>\r\n          <div class=\"item\" :style=\"{backgroundColor: waterColor}\"></div>\r\n          <figcaption>Fleuves et <br />espaces en eau</figcaption>\r\n        </figure>\r\n        <figure>\r\n          <div class=\"item\" :style=\"{backgroundColor: greenColor}\"></div>\r\n          <figcaption>Espaces verts et <br />espaces de loisirs</figcaption>\r\n        </figure>\r\n      </section>\r\n\r\n      <section v-else-if=\"currentUnit\">\r\n        <p>({{ currentUnit }})</p>\r\n      </section>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Config from '../config.json'\r\nimport displayMap from '../map'\r\n\r\nexport default {\r\n  props: ['layers', 'currentLayerPath', 'currentLocation', 'currentZoom', 'isFuture'],\r\n  data: () => ({\r\n    loadLayer: () => {},\r\n    setLayer: () => {},\r\n    setLocation: () => {},\r\n    setEVLayer: () => {},\r\n    zoomMinus: () => {},\r\n    zoomPlus: () => {},\r\n  }),\r\n\r\n  computed: {\r\n    isEspacesVerts() {\r\n      return this.currentLayerPath == Config.EV_path\r\n    },\r\n\r\n    currentUnit() {\r\n      if (this.currentLayerPath) {\r\n        return Config.layers[this.currentLayerPath].unit\r\n      }\r\n    },\r\n\r\n    forestColor() {\r\n      return Config.layers[Config.EV_path].colors[0]\r\n    },\r\n\r\n    waterColor() {\r\n      return Config.layers[Config.EV_path].colors[1]\r\n    },\r\n\r\n    greenColor() {\r\n      return Config.layers[Config.EV_path].colors[2]\r\n    },\r\n\r\n    currentYear() {\r\n      return new Date().getFullYear()\r\n    },\r\n\r\n    hasFutureAvailable() {\r\n      return !!Config.layers[this.currentLayerPath].future\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Triggers when the component has been mounted.\r\n   * This is used to create the Leaflet map and bind the event handlers.\r\n   */\r\n  mounted () {\r\n    var urlInterComm = 'data/intercommunalites.geojson'\r\n    var urlVoronoi = 'data/voronois.json'\r\n\r\n    queue()\r\n      .defer(d3.json, urlInterComm)\r\n      .defer(d3.json, urlVoronoi)\r\n      .await((e, d, v) => {\r\n        // FIXME(liautaud): Please, clean up this mess.\r\n        [this.loadLayer, this.setLayer, this.setLocation, this.setEVLayer, this.zoomMinus, this.zoomPlus] =\r\n          displayMap(\r\n            this.$refs.map,\r\n            this.$refs.svg,\r\n            this.$refs.circle_svg,\r\n            this.$refs.legend,\r\n            e, d, v,\r\n            (x, y) => this.$emit('newHistogram', x, y),\r\n            n => this.$emit('newSchools', n)\r\n          )\r\n\r\n        Object.keys(Config.layers).forEach(layerPath => {\r\n          this.layers[layerPath].path=layerPath;\r\n\r\n          // Preload all the layers.\r\n          this.loadLayer(\r\n            layerPath,\r\n            false,\r\n            () => {\r\n              this.layers[layerPath].loaded = true\r\n              \r\n              if (layerPath == Config.EV_path){\r\n                this.setEVLayer(layerPath)\r\n              }          \r\n            }\r\n          )\r\n\r\n          // Also preload the future layers when applicable.\r\n          if (Config.layers[layerPath].future) {\r\n            console.log('Preloading future layer:', Config.layers[layerPath].future)\r\n            this.loadLayer(layerPath, true, () => {})\r\n          }\r\n        })\r\n\r\n        this.setLayer(this.currentLayerPath)\r\n      })\r\n  },\r\n\r\n  watch: {\r\n    /**\r\n     * Watches changes to the currentLayerPath prop, and updates the map.\r\n     */\r\n    currentLayerPath() {\r\n      this.setLayer(this.currentLayerPath, this.hasFutureAvailable && this.isFuture)\r\n    },\r\n\r\n    /**\r\n     * Watches changes to the isFuture prop, and updates the map.\r\n     */\r\n    isFuture() {\r\n      this.setLayer(this.currentLayerPath, this.hasFutureAvailable && this.isFuture)\r\n    },\r\n\r\n    /**\r\n     * Watches changes to the currentLocation prop, and updates the marker.\r\n     */\r\n    currentLocation([lat, lng]) {\r\n      this.setLocation(lat, lng)\r\n    },\r\n\r\n    /**\r\n     * Watches changes to the currentZoom prop, and updates the marker.\r\n     */\r\n    currentZoom(after, before) {\r\n      // FIXME(liautaud): This only takes +/-1 changes into account.\r\n      // It's a dirty hack anyway, we should hold the currentZoom instead.\r\n      if (after < before) {\r\n        this.zoomMinus()\r\n      } else {\r\n        this.zoomPlus()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" type=\"text/scss\">\r\n.map-container {\r\n  flex: 1;\r\n  position: relative;\r\n}\r\n\r\n.map {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.leaflet-overlay-pane {\r\n  mix-blend-mode: multiply;\r\n\r\n  image {\r\n    image-rendering: optimizespeed;\r\n  }\r\n}\r\n\r\n.EV-svg {\r\n  border-radius: 50%;\r\n  width: 120px;\r\n  height: 120px;\r\n  border: 1px solid #000;\r\n  box-shadow: 0 0 3px rgba(#000, .3);\r\n  position: absolute;\r\n  background: #fff;\r\n  display: flex;\r\n  pointer-events: none;\r\n  top: -120px;\r\n\r\n  image {\r\n    image-rendering: optimizespeed;\r\n  }\r\n}\r\n\r\n.EV-circle-svg {\r\n  border-radius: 50%;\r\n  width: 90px;\r\n  height: 90px;\r\n  border: 1px solid rgba(#000, .7);\r\n  position: absolute;\r\n  background: #fff0;\r\n  display: flex;\r\n  pointer-events: none;\r\n  top: -120px;\r\n}\r\n\r\n.year {\r\n  position: absolute;\r\n  top: 35px;\r\n  right: 25px;\r\n\r\n  box-shadow: 0 0 2px rgba(0, 0, 0, .3);\r\n  background: #fff;\r\n\r\n  display: flex;\r\n\r\n  p {\r\n    margin: 5px 20px;\r\n    color: #666;\r\n    font-size: 25pt;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n  }\r\n\r\n  a {\r\n    display: flex;\r\n    align-items: center;\r\n    border-left: 1px solid #ddd;\r\n    font-size: 18pt;\r\n    outline: none;\r\n    text-decoration: none;\r\n    padding: 15px;\r\n    color: #444;\r\n  }\r\n}\r\n\r\n.legend {\r\n  position: absolute;\r\n  bottom: 35px;\r\n  right: 25px;\r\n  text-align: center;\r\n\r\n  box-shadow: 0 0 2px rgba(0, 0, 0, .3);\r\n  background: #fff;\r\n\r\n  h3 {\r\n    text-transform: uppercase;\r\n    margin: 10px;\r\n  }\r\n\r\n  p, figcaption {\r\n    font-size: .6em;\r\n    font-style: italic;\r\n    margin-top: 0;\r\n  }\r\n\r\n  figure {\r\n    margin: 15px 10px;\r\n  }\r\n\r\n  .item {\r\n    width: 70px;\r\n    height: 28px;\r\n    border: 1px solid #000;\r\n    margin: 10px auto;\r\n  }\r\n}\r\n\r\n.legend-inner {\r\n  height: 200px;\r\n  width: 70px;\r\n  margin: 8px 10px;\r\n  position: relative;\r\n}\r\n\r\n.legend-inner canvas {\r\n  box-sizing: border-box;\r\n  border: 1px solid #000;\r\n  border-right: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=2ecf4384&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Map.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"sidebar\"},[(_vm.currentLayerPath && _vm.layers[_vm.currentLayerPath].loaded && !_vm.isEspacesVerts)?_c('div',[_c('h2',[_vm._v(_vm._s(_vm.layers[_vm.currentLayerPath].title))]),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.layers[_vm.currentLayerPath].content)}}),(!_vm.isEspacesVerts)?_c('Histogram',{attrs:{\"x\":_vm.currentHistogramX,\"y\":_vm.currentHistogramY}}):_vm._e(),(_vm.schoolCount)?_c('p',[_vm._v(\"Il y a \"+_vm._s(_vm.schoolCount)+\" établissements scolaires dans la région sélectionnée.\")]):_vm._e()],1):_c('div',{staticClass:\"split\"},[_vm._m(0),_vm._m(1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',[_c('h2',[_vm._v(\"Bienvenue sur EcoParis.\")]),_c('p',[_vm._v(\"EcoParis est une visualisation interactive des données cartographiques des services écosystémiques en territoires urbains et péri-urbains en région Ile-de-France issues du projet \"),_c('a',{attrs:{\"href\":\"https://idefese.wordpress.com/\"}},[_vm._v(\"IDEFESE\")]),_vm._v(\".\")]),_c('p',[_vm._v(\"Pour commencer, vous pouvez sélectionner une couche à afficher parmi des mesures de rétention \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"de phosphore\")]),_vm._v(\" et \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"d'azote\")]),_vm._v(\", des mesures de \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"réduction de la température\")]),_vm._v(\" due à la végétation ou encore de \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"valeur économique\")]),_vm._v(\" des régions.\")]),_c('p',[_vm._v(\"Vous pouvez aussi choisir d'afficher l'évolution estimée de ces mesures à l'horizon 2025 dans un scénario de changement climatique.\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"about\"},[_c('p',[_vm._v(\"EcoParis a été conçu par des élèves du cours de \"),_c('a',{attrs:{\"href\":\"https://edu.epfl.ch/coursebook/en/data-visualization-COM-480\"}},[_vm._v(\"Data Visualization\")]),_vm._v(\" de l'EPFL, avec l'aide de Perrine Hamel du projet \"),_c('a',{attrs:{\"href\":\"https://naturalcapitalproject.stanford.edu/\"}},[_vm._v(\"Natural Capital Project\")]),_vm._v(\" de Stanford.\")]),_c('section',{staticClass:\"slideshow\"},[_c('a',{attrs:{\"href\":\"https://www.epfl.ch/\"}},[_c('img',{attrs:{\"src\":\"assets/epfl.png\",\"alt\":\"Logo EPFL\"}})]),_c('a',{attrs:{\"href\":\"https://naturalcapitalproject.stanford.edu/\"}},[_c('img',{attrs:{\"src\":\"assets/natcap.jpg\",\"alt\":\"Logo NatCap\"}})])])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"graph\",staticClass:\"graph-box\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div ref=\"graph\" class=\"graph-box\"></div>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * Updates the Plotly plot according to this.data.\r\n */\r\nconst updatePlot = (that) =>{\r\n  Plotly.react(that.$refs.graph, [{\r\n    x: that.x,\r\n    y: that.y,\r\n    type: 'histogram',\r\n    histfunc: \"sum\",\r\n    xbins: {\r\n      end: 256, \r\n      size: 1, \r\n      start: 0\r\n    }\r\n  }], {\r\n    margin: {\r\n      l: 35,\r\n      r: 35,\r\n      t: 5,\r\n      b: 20,\r\n    },\r\n  }, {\r\n    displayModeBar: false,\r\n  })\r\n}\r\n\r\nexport default {\r\n  props: ['x','y'],\r\n\r\n  mounted() {\r\n    updatePlot(this)\r\n  },\r\n\r\n  watch: {\r\n    /**\r\n     * Watches changes to the data prop, and updates the histogram.\r\n     */\r\n    x() {\r\n      updatePlot(this)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" type=\"text/scss\">\r\n.graph-box {\r\n  height: 300px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Histogram.vue?vue&type=template&id=ef8ec4ce&\"\nimport script from \"./Histogram.vue?vue&type=script&lang=js&\"\nexport * from \"./Histogram.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Histogram.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Histogram.vue\"\nexport default component.exports","<template>\r\n  <section class=\"sidebar\">\r\n    <div v-if=\"currentLayerPath && layers[currentLayerPath].loaded && !isEspacesVerts\">\r\n      <h2>{{ layers[currentLayerPath].title }}</h2>\r\n      <div v-html=\"layers[currentLayerPath].content\"></div>\r\n      <Histogram\r\n        v-if=\"!isEspacesVerts\"\r\n        :x=\"currentHistogramX\"\r\n        :y=\"currentHistogramY\"/>\r\n\r\n        <p v-if=\"schoolCount\">Il y a {{ schoolCount }} établissements scolaires dans la région sélectionnée.</p>\r\n    </div>\r\n\r\n    <div v-else class=\"split\">\r\n      <article>\r\n        <h2>Bienvenue sur EcoParis.</h2>\r\n\r\n        <p>EcoParis est une visualisation interactive des données cartographiques des services écosystémiques en territoires urbains et péri-urbains en région Ile-de-France issues du projet <a href=\"https://idefese.wordpress.com/\">IDEFESE</a>.</p>\r\n\r\n        <p>Pour commencer, vous pouvez sélectionner une couche à afficher parmi des mesures de rétention <a href=\"#\">de phosphore</a> et <a href=\"#\">d'azote</a>, des mesures de <a href=\"#\">réduction de la température</a> due à la végétation ou encore de <a href=\"#\">valeur économique</a> des régions.</p>\r\n\r\n        <p>Vous pouvez aussi choisir d'afficher l'évolution estimée de ces mesures à l'horizon 2025 dans un scénario de changement climatique.</p>\r\n      </article>\r\n\r\n      <article class=\"about\">\r\n        <p>EcoParis a été conçu par des élèves du cours de <a href=\"https://edu.epfl.ch/coursebook/en/data-visualization-COM-480\">Data Visualization</a> de l'EPFL, avec l'aide de Perrine Hamel du projet <a href=\"https://naturalcapitalproject.stanford.edu/\">Natural Capital Project</a> de Stanford.</p>\r\n\r\n        <section class=\"slideshow\">\r\n          <a href=\"https://www.epfl.ch/\">\r\n            <img src=\"assets/epfl.png\" alt=\"Logo EPFL\">\r\n          </a>\r\n          <a href=\"https://naturalcapitalproject.stanford.edu/\">\r\n            <img src=\"assets/natcap.jpg\" alt=\"Logo NatCap\">\r\n          </a>\r\n        </section>\r\n      </article>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport Config from '../config.json'\r\nimport Histogram from './Histogram.vue'\r\n\r\nexport default {\r\n  props: ['layers', 'currentLayerPath', 'currentHistogramX', 'currentHistogramY', 'schoolCount'],\r\n  components: { Histogram },\r\n  computed: {\r\n    isEspacesVerts() {\r\n      return this.currentLayerPath == Config.EV_path;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" type=\"text/scss\">\r\n#espacesVerts {\r\n  height: 300px;\r\n  width: 100%;\r\n  margin-top: 25px;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.sidebar {\r\n  z-index: 500;\r\n  width: 450px;\r\n  max-width: 30%;\r\n  box-sizing: border-box;\r\n  padding: 40px;\r\n\r\n  background: #fff;\r\n  box-shadow: 0 0 2px rgba(0, 0, 0, .3);\r\n  overflow: auto;\r\n}\r\n\r\n.sidebar .split {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n}\r\n\r\n.sidebar p {\r\n  margin: 30px 0;\r\n}\r\n\r\n.sidebar h2 {\r\n  margin-top: 0;\r\n}\r\n\r\n.sidebar .about {\r\n  font-style: italic;\r\n}\r\n\r\n.sidebar .slideshow {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-around;\r\n  margin: 40px 0 20px;\r\n\r\n  a {\r\n    height: 90px;\r\n  }\r\n\r\n  img {\r\n    height: 100%;\r\n  }\r\n}\r\n\r\n.sidebar .button {\r\n  color: #000;\r\n  border-color: #000;\r\n  box-shadow: none;\r\n  text-shadow: none;\r\n  margin: 5px 0 20px;\r\n  font-size: 0.8em;\r\n  display: inline-block;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sidebar.vue?vue&type=template&id=e4bc5b9a&\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Sidebar.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Sidebar.vue\"\nexport default component.exports","<template>\r\n  <div id=\"app\">\r\n    <transition name=\"fade\">\r\n      <Intro\r\n        v-if=\"introVisible\"\r\n        :isLoading=\"!currentLayerLoaded\"\r\n        @dismiss=\"() => introVisible = false\" />\r\n    </transition>\r\n\r\n    <About v-if=\"aboutVisible\" @dismiss=\"() => aboutVisible = false\" />\r\n\r\n    <section class=\"menu\">\r\n      <LocationControl\r\n        :onLocation=\"loc => this.currentLocation = loc\" />\r\n      <Layers\r\n        :layers=\"layers\"\r\n        v-model=\"currentLayerPath\" />\r\n      <ZoomControl\r\n        @zoomOut=\"() => currentZoom -= 1\"\r\n        @zoomIn=\"() => currentZoom += 1\" />\r\n\r\n      <a href=\"#\" class=\"about-button\"\r\n        @click.prevent=\"() => aboutVisible = true\">À propos</a>\r\n    </section>\r\n    <section class=\"container\">\r\n      <Map\r\n        :layers=\"layers\"\r\n        :currentLayerPath=\"currentLayerPath\"\r\n        :currentLocation=\"currentLocation\"\r\n        :currentZoom=\"currentZoom\"\r\n        :isFuture=\"isFuture\"\r\n        @toggleFuture=\"() => isFuture ^= true\"\r\n        @newHistogram=\"(x, y) => {this.currentHistogramX = x; this.currentHistogramY = y;}\" \r\n        @newSchools=\"n => this.schoolCount = n\" />\r\n      <Sidebar\r\n        :layers=\"layers\"\r\n        :currentLayerPath=\"currentLayerPath\"\r\n        :currentHistogramX=\"currentHistogramX\"\r\n        :currentHistogramY=\"currentHistogramY\"\r\n        :schoolCount=\"schoolCount\" />\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Config from './config.json'\r\n\r\nimport Intro from './components/Intro.vue'\r\nimport About from './components/About.vue'\r\nimport ZoomControl from './components/ZoomControl.vue'\r\nimport LocationControl from './components/LocationControl.vue'\r\nimport Layers from './components/Layers.vue'\r\nimport Map from './components/Map.vue'\r\nimport Sidebar from './components/Sidebar.vue'\r\n\r\n/** The layer that should first be loaded. */\r\nconst defaultLayerPath = Config.EV_path\r\n\r\nexport default {\r\n  components: { Intro, About, ZoomControl, LocationControl, Layers, Map, Sidebar },\r\n\r\n  data: () => ({\r\n    layers: Object.keys(Config.layers).reduce((m, layerPath) => {\r\n      m[layerPath] = Config.layers[layerPath]\r\n      m[layerPath].loaded = false\r\n      m[layerPath].path = layerPath\r\n      return m\r\n    }, {}),\r\n\r\n    isFuture: false,\r\n    currentLayerPath: defaultLayerPath,\r\n\r\n    currentZoom: 0,\r\n    currentLocation: null,\r\n    currentHistogramX: null,\r\n    currentHistogramY: null,\r\n    introVisible: true,\r\n    sidebarVisible: false,\r\n    aboutVisible: false,\r\n\r\n    schoolCount: null,\r\n  }),\r\n\r\n  computed: {\r\n    currentLayerLoaded() {\r\n      return this.layers[this.currentLayerPath].loaded\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" type=\"text/scss\">\r\nhtml, body {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n  font-size: 15pt;\r\n}\r\n\r\n#app {\r\n  width: 100%;\r\n  height: 100%;\r\n  font-family: 'IBM Plex Sans', sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\nh2 {\r\n  font-size: 1.2rem;\r\n}\r\n\r\nh3 {\r\n  color: #666;\r\n  font-size: 11pt;\r\n  font-weight: normal;\r\n  text-align: center;\r\n}\r\n\r\np {\r\n  font-family: 'Crimson Text', serif;\r\n}\r\n\r\n.button {\r\n  text-decoration: none;\r\n  margin: 1.2rem;\r\n  font-size: 14pt;\r\n  padding: 9px 13px;\r\n  border: 1px solid #fff;\r\n  color: #fff;\r\n  text-transform: uppercase;\r\n  font-weight: 300;\r\n  transition: padding .2s;\r\n  position: relative;\r\n  outline: none;\r\n  text-shadow: 0 0 2px rgba(#000, .2);\r\n  box-shadow: 0 0 2px rgba(#000, .2), inset 0 0 2px rgba(#000, .2);\r\n  font-family: 'IBM Plex Sans', sans-serif;\r\n\r\n  &:hover {\r\n    padding: 9px 16px;\r\n  }\r\n}\r\n\r\n.menu {\r\n  z-index: 500;\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 50px;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  justify-content: center;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  background: #000;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n// TODO(liautaud): Create mixins and move everything\r\n// back in their respective files.\r\n.zoom-control, .location-control {\r\n  height: 40px;\r\n  border: 1px solid #bbb;\r\n  box-shadow: 0 0 3px rgba(#000, .2);\r\n  background: #fff;\r\n  display: flex;\r\n  margin: 20px 0;\r\n  flex-basis: content;\r\n\r\n  a {\r\n    outline: none;\r\n    height: 40px;\r\n    width: 39px;\r\n    font-family: 'Courier New';\r\n    font-size: 18pt;\r\n    line-height: 40px;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    color: #000;\r\n  }\r\n\r\n  a:first-child {\r\n    border-right: 1px solid #bbb;\r\n  }\r\n}\r\n\r\n.zoom-control {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.about-button {\r\n  display: block;\r\n  text-align: center;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  border: 1px solid #bbb;\r\n  border-top: 0;\r\n  box-shadow: 0 0 3px rgba(#000, .2);\r\n  background: #fff;\r\n  text-transform: uppercase;\r\n  color: #666;\r\n  font-size: 10pt;\r\n  text-decoration: none;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=d358e788&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}