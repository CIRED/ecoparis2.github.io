{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Layers.vue?83df","webpack:///./src/components/About.vue?410e","webpack:///./src/App.vue?8d0a","webpack:///./src/components/Intro.vue?6800","webpack:///src/components/Intro.vue","webpack:///./src/components/Intro.vue?21f1","webpack:///./src/components/Intro.vue","webpack:///./src/components/Tutorial.vue?70c0","webpack:///src/components/Tutorial.vue","webpack:///./src/components/Tutorial.vue?f96f","webpack:///./src/components/Tutorial.vue","webpack:///./src/components/About.vue?b8f5","webpack:///src/components/About.vue","webpack:///./src/components/About.vue?f71c","webpack:///./src/components/About.vue","webpack:///./src/components/ZoomControl.vue?79be","webpack:///src/components/ZoomControl.vue","webpack:///./src/components/ZoomControl.vue?b509","webpack:///./src/components/ZoomControl.vue","webpack:///./src/components/LocationControl.vue?180d","webpack:///src/components/LocationControl.vue","webpack:///./src/components/LocationControl.vue?071a","webpack:///./src/components/LocationControl.vue","webpack:///./src/components/Layers.vue?e739","webpack:///src/components/Layers.vue","webpack:///./src/components/Layers.vue?1d7e","webpack:///./src/components/Layers.vue","webpack:///./src/components/Map.vue?6ad8","webpack:///./src/shared.js","webpack:///./src/update.js","webpack:///./src/helpers.js","webpack:///./src/layers.js","webpack:///./src/shapes.js","webpack:///./src/map.js","webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?3baf","webpack:///./src/components/Map.vue","webpack:///./src/components/Sidebar.vue?06a8","webpack:///./src/components/Histogram.vue?5d3f","webpack:///src/components/Histogram.vue","webpack:///./src/components/Histogram.vue?11b6","webpack:///./src/components/Histogram.vue?d72a","webpack:///src/components/Sidebar.vue","webpack:///./src/components/Sidebar.vue?d975","webpack:///./src/components/Sidebar.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?bcb1","webpack:///./src/components/Map.vue?357b","webpack:///./src/components/Histogram.vue?f54f","webpack:///./src/components/Intro.vue?6183","webpack:///./src/components/LocationControl.vue?9aba","webpack:///./src/components/Sidebar.vue?652c","webpack:///./src/components/ZoomControl.vue?ecf3","webpack:///./src/components/Tutorial.vue?b206"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Layers_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Layers_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_About_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_About_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_1e7b1f73_render","this$1","this","_vm","_h","$createElement","_c","_self","class","currentTutorialStep","attrs","id","isLoading","currentLayerLoaded","on","dismiss","introVisible","_e","aboutVisible","staticClass","ref","currentLayerPath","layerChange","path","model","callback","$$v","expression","onLocation","loc","currentLocation","layers","checkTutorial","$refs","tutorial","checkIfNext","zoomOut","currentZoom","zoomIn","href","click","$event","preventDefault","_v","_s","$t","isFuture","toggleFuture","newHistogram","x","y","currentHistogramX","currentHistogramY","newSchools","schoolCount","newName","interCommName","staticRenderFns","Introvue_type_template_id_37b4516e_render","_m","startFrench","startEnglish","Introvue_type_template_id_37b4516e_staticRenderFns","src","Introvue_type_script_lang_js_","props","methods","$i18n","locale","$emit","components_Introvue_type_script_lang_js_","component","componentNormalizer","options","__file","Intro","Tutorialvue_type_template_id_626a21d2_render","domProps","innerHTML","currentStepHtml","prev","close","next","Tutorialvue_type_template_id_626a21d2_staticRenderFns","onKeyUp","e","which","keyCode","Tutorialvue_type_script_lang_js_","mounted","document","body","addEventListener","beforeDestroy","removeEventListener","currentLAyerPAth","computed","concat","watch","components_Tutorialvue_type_script_lang_js_","Tutorial_component","Tutorial","Aboutvue_type_template_id_8316a872_render","Aboutvue_type_template_id_8316a872_staticRenderFns","Aboutvue_type_script_lang_js_","components_Aboutvue_type_script_lang_js_","About_component","About","ZoomControlvue_type_template_id_5ddc0a45_render","ZoomControlvue_type_template_id_5ddc0a45_staticRenderFns","ZoomControlvue_type_script_lang_js_","components_ZoomControlvue_type_script_lang_js_","ZoomControl_component","ZoomControl","LocationControlvue_type_template_id_67ed561b_render","locate","search","active","searchExpanded","toggleSearch","type","keyup","LocationControlvue_type_template_id_67ed561b_staticRenderFns","LocationControlvue_type_script_lang_js_","_this","api","google","maps","places","Autocomplete","searchInput","setFields","setOptions","strictBounds","setBounds","north","config","viewport","topLatitude","south","bottomLatitude","west","leftLongitude","east","rightLongitude","addListener","place","getPlace","geometry","location","lat","lng","_this2","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","focus","components_LocationControlvue_type_script_lang_js_","LocationControl_component","LocationControl","Layersvue_type_template_id_4b4ae635_render","_l","layer","hidden","style","background","active_color","color","title","select","loaded","Layersvue_type_template_id_4b4ae635_staticRenderFns","Layersvue_type_script_lang_js_","loading","components_Layersvue_type_script_lang_js_","Layers_component","Layers","Mapvue_type_template_id_3cee02f9_render","hasFutureAvailable","futureColor","presentColor","backgroundColor","forestColor","waterColor","greenColor","currentUnit","Mapvue_type_template_id_3cee02f9_staticRenderFns","cachedLayers","map","mapElement","currentGeoLat","currentGeoLng","svg_EV","svg_circle_EV","interComms","voronoi","imgs","imgs_EV","update_parameters","markerElement","canvas","voronoi_shape","interComm_shape","firstVoronoiByInterComm","pathGenerator","defs_path","legend_element","color_legend_canvas","color_legend_svg","onSchools","onHistChange","onNewName","highlightedInterComm","initialBounds","markerIcon","lastMouseDownX","lastMouseDownY","voronoiContainment","interCommContainment","showCirclePreview","showFutureInsteadOfEV","lastMousePosition","currentChartIndex","currentChartIndexIsVoronoi","shared","_cachedLayers$current","Config","require","update_clip","clip_projectPoint","default_tl_point","latLngToLayerPoint","tl_lat","tl_lng","default_br_point","br_lat","br_lng","width","height","point","L","latLng","tx","ty","stream","clip_transform","d3","geo","transform","clip_path","projection","attr","update_EV_preview","mouseX","mouseY","updateCirclePreviewPath","layer_path","currentCircleLayerPath","svg_width","parseInt","substr","svg_height","svg_circle_width","svg_circle_height","magnifyingRatio","tl","br","tl_pixels","latLngToContainerPoint","pixels_on_left","pixels_on_top","magnified_tl_pixels","image_width","image_height","update_chart","layerURL","voro","info","future","entire_hist","voronoi_hist","interComm_hist","Urban_cooling","helpers_f","range","update_text_school","Ecole_path","pop","updateMarker","iconAnchor","updateMap","getZoom","deselectInterComm","hide","console","log","_","useColorScheme","colorScale","interComm_means","color_present","color_future","EV_path","color_ev","updateCirclePreviewLayer","url","update","colorSchemeDict","0","interpolateOranges","1","interpolateRdBu","2","interpolateBlues","3","interpolateGnBu","4","interpolateRdYlGn","loadContainmentFile","fetch","then","res","json","JSON","parse","MAP_TILES","MAP_ATTRIB","createMap","element","zoomControl","fitBounds","setMaxBounds","getBounds","pad","base","tileLayer","minZoom","maxZoom","attribution","addTo","setView","LatLng","isWithinParis","features","some","geoContains","setLocation","update_f","getColorsFromScheme","colorSchemeId","currentScheme","fillScale","scale_canvas","scale_svg","minValue","maxValue","invertColorScheme","legendHeight","legendWidth","margin","top","right","bottom","left","node","ctx","getContext","legendScale","image","createImageData","rgb","g","b","putImageData","domain","legendAxis","axisRight","scale","scaleLinear","tickSize","ticks","svg","computeColorRange","percentiles","colors","domain_percentiles","unshift","domainLength","rangeLength","intermediateDomain","intermediateScale","linear","range_out","blankStyle","feature","opacity","fillOpacity","handleKeyEvent","charCode","helpers","loadLayer","truePath","pixels","tempContext","onWorkEnded","canvasData","interComm_counts","voronoi_counts","voronoi_means","hist_buckets","toDataURL","colorScheme","layerUrl","domain_range","domain_continuous","range_continuous","worker","Worker","onmessage","getImageData","postMessage","voronoiContainmentData","interCommContainmentData","numVoronois","numInterComms","colorDomain","colorRange","setLayer","layerPath","currentGaoLng","min_value","max_value","setEVLayer","src_layers","oneIfInInterComm","interCommIndex","oneIfInInterComm_","defineVoronoi","append","selectAll","enter","datum","properties","nomgroup","event","clientX","clientY","getBoundingClientRect","defineInterComms","fadedOpacity","Math","abs","BBox","getBBox","neBound","layerPointToLatLng","swBound","latLngBounds","shapes","src_map","EV_svg_element","EV_circle_svg_element","error","default_tl","default_br","setLocationFromCurrent","geoJson","projectPoint","defs","shape_EV","shapes_f","iconUrl","iconSize","createElement","layers_f","Mapvue_type_script_lang_js_","zoomMinus","zoomPlus","isEspacesVerts","currentLayerId","currentYear","Date","getFullYear","urlInterComm","urlVoronoi","urlInterCommContainment","urlVoronoiContainment","queue","defer","await","v","_displayMap","circle_svg","legend","_displayMap2","slicedToArray","keys","forEach","_ref","_ref2","after","before","components_Mapvue_type_script_lang_js_","Map_component","Map","Sidebarvue_type_template_id_4301fe4f_render","count","Sidebarvue_type_template_id_4301fe4f_staticRenderFns","alt","Histogramvue_type_template_id_ae748e2e_render","Histogramvue_type_template_id_ae748e2e_staticRenderFns","Histogramvue_type_script_lang_js_","updateChart","innerWidth","innerHeight","rangeRound","xAxis","yAxis","xLegend","text","xData","yData","currentLayer","layerScale","nonZero","filter","xMin","xMax","yMax","max","xs","ys","axisLeft","axisBottom","tickFormat","toPrecision","tickPadding","bars","merge","ceil","exit","remove","components_Histogramvue_type_script_lang_js_","Histogram_component","Histogram","Sidebarvue_type_script_lang_js_","components","components_Sidebarvue_type_script_lang_js_","Sidebar_component","Sidebar","defaultLayerPath","Appvue_type_script_lang_js_","reduce","sidebarVisible","logKey","src_Appvue_type_script_lang_js_","App_component","App","Vue","productionTip","use","VueI18n","render","h","i18n","messages","fr","en","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Map_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Map_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Histogram_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Histogram_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Intro_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Intro_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LocationControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LocationControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Sidebar_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Sidebar_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ZoomControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ZoomControl_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Tutorial_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Tutorial_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/app.859ba218.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:[(\"tutorial-\" + _vm.currentTutorialStep)],attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.introVisible)?_c('Intro',{attrs:{\"isLoading\":!_vm.currentLayerLoaded},on:{\"dismiss\":function () { return _vm.introVisible = false; }}}):_vm._e()],1),(_vm.aboutVisible)?_c('About',{on:{\"dismiss\":function () { return _vm.aboutVisible = false; }}}):_vm._e(),_c('section',{staticClass:\"horizontal-split\"},[_c('Tutorial',{ref:\"tutorial\",attrs:{\"currentLayerPath\":_vm.currentLayerPath},on:{\"layerChange\":function (path) {this$1.currentLayerPath = '';this$1.currentLayerPath = path}},model:{value:(_vm.currentTutorialStep),callback:function ($$v) {_vm.currentTutorialStep=$$v},expression:\"currentTutorialStep\"}}),_c('section',{staticClass:\"vertical-split\"},[_c('section',{staticClass:\"menu\"},[_c('LocationControl',{attrs:{\"onLocation\":function (loc) { return this$1.currentLocation = loc; }}}),_c('Layers',{attrs:{\"layers\":_vm.layers},on:{\"checkTutorial\":function (){this$1.$refs.tutorial.checkIfNext()}},model:{value:(_vm.currentLayerPath),callback:function ($$v) {_vm.currentLayerPath=$$v},expression:\"currentLayerPath\"}}),_c('ZoomControl',{on:{\"zoomOut\":function () { return _vm.currentZoom -= 1; },\"zoomIn\":function () { return _vm.currentZoom += 1; }}}),_c('a',{staticClass:\"about-button\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.aboutVisible = true; })($event)}}},[_vm._v(_vm._s(_vm.$t('titles.credits')))])],1),_c('Map',{attrs:{\"layers\":_vm.layers,\"currentLayerPath\":_vm.currentLayerPath,\"currentLocation\":_vm.currentLocation,\"currentZoom\":_vm.currentZoom,\"isFuture\":_vm.isFuture},on:{\"toggleFuture\":function () { return _vm.isFuture ^= true; },\"newHistogram\":function (x, y) {this$1.currentHistogramX = x; this$1.currentHistogramY = y;},\"newSchools\":function (n) { return this$1.schoolCount = n; },\"newName\":function (n) { return this$1.interCommName = n; }}}),_c('Sidebar',{attrs:{\"layers\":_vm.layers,\"currentLayerPath\":_vm.currentLayerPath,\"currentHistogramX\":_vm.currentHistogramX,\"currentHistogramY\":_vm.currentHistogramY,\"schoolCount\":_vm.schoolCount,\"interCommName\":_vm.interCommName}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"intro\"},[_vm._m(0),_c('p',[_vm._v(\"Découvrez l'influence de la nature sur votre vie à Paris.\")]),_c('section',{staticClass:\"buttons\"},[(_vm.isLoading)?_c('a',{staticClass:\"button loading\"},[_vm._v(\"Chargement\")]):[_c('a',{staticClass:\"button\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.startFrench($event)}}},[_c('i',{staticClass:\"flag-icon flag-icon-fr\"}),_vm._v(\" Commencer la visite\")]),_c('a',{staticClass:\"button\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.startEnglish($event)}}},[_c('i',{staticClass:\"flag-icon flag-icon-us\"}),_vm._v(\" Get started\")])]],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',[_vm._v(\"\\n    EcoParis\\n    \"),_c('img',{attrs:{\"src\":\"assets/parrot.svg\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"intro\">\n    <h1>\n      EcoParis\n      <img src=\"assets/parrot.svg\">\n    </h1>\n\n    <p>Découvrez l'influence de la nature sur votre vie à Paris.</p>\n\n    <section class=\"buttons\">\n      <a v-if=\"isLoading\" class=\"button loading\">Chargement</a>\n      <template v-else>\n        <a @click.prevent=\"startFrench\" href=\"#\" class=\"button\"><i class=\"flag-icon flag-icon-fr\"></i> Commencer la visite</a>\n        <a @click.prevent=\"startEnglish\" href=\"#\" class=\"button\"><i class=\"flag-icon flag-icon-us\"></i> Get started</a>\n      </template>\n    </section>\n  </section>\n</template>\n\n<script>\nexport default {\n  props: ['isLoading'],\n  methods: {\n    startFrench() {\n      this.$i18n.locale = 'fr'\n      this.$emit('dismiss')\n    },\n    startEnglish() {\n      this.$i18n.locale = 'en'\n      this.$emit('dismiss')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n/** Flags from https://github.com/lipis/flag-icon-css. **/\n$flag-path: '../../public/assets';\n\n.flag-icon-background {\n  background-size: contain;\n  background-position: 50%;\n  background-repeat: no-repeat;\n}\n\n.flag-icon {\n  @extend .flag-icon-background;\n  position: relative;\n  display: inline-block;\n  width: 1em;\n  margin-right: 0.4em;\n  line-height: 1em;\n  border-radius: 3px;\n  &:before {\n    content: '\\00a0';\n  }\n}\n\n@mixin flag-icon($country) {\n  .flag-icon-#{$country} {\n    background-image: url(#{$flag-path}/flag-#{$country}.svg);\n  }\n}\n\n@include flag-icon('fr');\n@include flag-icon('us');\n\n/** Introduction page. **/\n.intro {\n  z-index: 2000;\n  position: fixed;\n  display: flex;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  color: #fff;\n  background: linear-gradient(120deg, rgba(#84fab0, .98) 10%, rgba(#8fd3f4, .98) 100%);\n}\n\n.intro.fade-enter-active, .intro.fade-leave-active {\n  transition: opacity .3s;\n}\n\n.intro.fade-enter, .intro.fade-leave-to {\n  opacity: 0;\n}\n\n.intro h1, .intro p {\n  text-shadow: 0 0 2px rgba(0, 0, 0, .4);\n}\n\n.intro h1 {\n  font-family: 'Cedarville Cursive';\n  font-size: 38pt;\n  margin: 0 0 -.3rem;\n  position: relative;\n}\n\n.intro h1 img {\n  position: absolute;\n  width: 64px;\n  top: -8px;\n  right: -30px;\n}\n\n.intro p {\n  font-size: 21pt;\n  margin: 0;\n}\n\n.intro .buttons {\n  margin-top: 50px;\n}\n\n.intro .button {\n  margin-left: 10px;\n  margin-right: 10px;\n}\n\n.intro .button.loading {\n  cursor: not-allowed;\n\n  &:before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    background: rgba(#fff, .2);\n    animation: loading 4s infinite ease-in-out;\n  }\n}\n\n@keyframes loading {\n  0% {\n    left: 0;\n    width: 0%;\n  }\n\n  50% {\n    left: 0;\n    width: 100%;\n  }\n\n  100% {\n    left: 100%;\n    width: 0%;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Intro.vue?vue&type=template&id=37b4516e&\"\nimport script from \"./Intro.vue?vue&type=script&lang=js&\"\nexport * from \"./Intro.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Intro.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Intro.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"tutorial\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.currentStepHtml)}}),(_vm.value > 1)?_c('a',{staticClass:\"button dark full\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.prev($event)}}},[_c('span',{staticClass:\"keycap\"},[_vm._v(\"←\")]),_vm._v(\" \"+_vm._s(_vm.$t('tutorial.previous')))]):_vm._e(),_c('a',{staticClass:\"button dark\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.close($event)}}},[_c('span',{staticClass:\"keycap\"},[_vm._v(\"ESC\")]),_vm._v(\" \"+_vm._s(_vm.$t('tutorial.skip')))]),(_vm.value < 12)?_c('a',{staticClass:\"button dark full\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.next($event)}}},[_c('span',{staticClass:\"keycap\"},[_vm._v(\"→\")]),_vm._v(\" \"+_vm._s(_vm.$t('tutorial.next')))]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"tutorial\">\n    <p v-html=\"currentStepHtml\"></p>\n\n    <a v-if=\"value > 1\" href=\"#\" @click.prevent=\"prev\" class=\"button dark full\"><span class=\"keycap\">&larr;</span> {{ $t('tutorial.previous') }}</a>\n    <a href=\"#\" @click.prevent=\"close\" class=\"button dark\"><span class=\"keycap\">ESC</span> {{ $t('tutorial.skip') }}</a>\n    <a v-if=\"value < 12\" href=\"#\" @click.prevent=\"next\" class=\"button dark full\"><span class=\"keycap\">&rarr;</span> {{ $t('tutorial.next') }}</a>\n  </section>\n</template>\n\n<script>\n/**\n * Handles key presses to ESC, ← and →.\n */\nfunction onKeyUp(e) {\n  if (e && (e.which || e.keyCode) == 37) {\n    this.prev()\n  } else if (e && (e.which || e.keyCode) == 39) {\n    this.next()\n  } else if (e && (e.which || e.keyCode) == 27) {\n    this.close()\n  }\n}\n\nexport default {\n  props: ['value', 'currentLayerPath'],\n\n  mounted() {\n    // We have to register an event listener on the body to catch all keys.\n    document.body.addEventListener('keyup', onKeyUp.bind(this))\n  },\n\n  beforeDestroy() {\n    // Don't forget to remove the event listener before destroying the component.\n    document.body.removeEventListener('keypress', onKeyUp.bind(this))\n  },\n\n  methods: {\n    prev() {\n      if (this.value > 1) {\n        this.$emit('input', this.value - 1)\n      }\n    },\n\n    next() {\n      if (this.value == 5) {\n        // On step 5, going to the next step is equivalent to changing the layer to \"Nappe\".\n        this.$emit('layerChange', 'data/rasters/L_ref.json')\n        this.$emit('input', 6)\n      } else if (this.value == 11) {\n        // On step 11, going to the next step is equivalent to changing the layer to \"Hotspots\".\n        this.$emit('layerChange', 'data/rasters/correlation_ref.json')\n        this.$emit('input', 12)\n      } else if (this.value == 12) {\n        // Step 12 is the last step.\n        this.close()\n      } else {\n        this.$emit('input', this.value + 1)\n      }\n    },\n\n    checkIfNext() {\n      if (this.value == 5 && this.currentLayerPath == 'data/rasters/L_ref.json') {\n        // On step 5, if the current layer is already \"Nappe\", go to next one.\n        this.$emit('input', 6)\n      } else if (this.value == 11 && this.currentLAyerPAth == 'data/rasters/L_ref.json') {\n        // On step 11, if the current layer is already \"Hotspots\", go to next one.\n        this.$emit('input', 12)\n      }\n    },\n\n    close() {\n      this.$emit('input', null)\n    },\n  },\n\n  computed: {\n    currentStepHtml() {\n      return this.$t(`tutorial.${this.value || 12}`)\n    }\n  },\n\n  watch: {\n    currentLayerPath(path) {\n      if (this.value == 5 && path == 'data/rasters/L_ref.json') {\n        // Go to step 6 if we were in step 5 and the \"Nappe\" layer was chosen.\n        this.$emit('input', 6)\n      } else if (this.value == 11 && path == 'data/rasters/correlation_ref.json') {\n        // Go to step 12 if we were in step 11 and the \"Hotspots\" layer was chosen.\n        this.$emit('input', 12)\n      }\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\">\n#app:before {\n  content: '';\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 550;\n  background: rgba(#000, .4);\n}\n\n#app.tutorial-null:before {\n  display: none;\n}\n\n.keycap {\n  display: inline-block;\n  border: 1px solid #000;\n  padding: 2px 4px;\n  font-size: 0.8em;\n  line-height: 1em;\n  border-radius: 5px;\n  margin: 0 5px;\n}\n\n.tutorial {\n  display: flex;\n  flex-shrink: 0;\n  z-index: 1500;\n  align-items: center;\n  background: #fff;\n  box-shadow: 0 2px 4px rgba(#000, .2);\n  height: 68px;\n  box-sizing: border-box;\n  padding: 0 20px;\n\n  transition: margin-top .5s, visibility 1s;\n\n  .tutorial-null & {\n    margin-top: -70px;\n    visibility: hidden;\n  }\n}\n\n.tutorial p {\n  font-family: 'IBM Plex Sans', sans-serif;\n  font-size: 0.85em;\n  flex-grow: 1;\n  text-align: center;\n  margin: 0;\n}\n\n.tutorial .button {\n  font-size: 0.85em;\n  margin: 0;\n  margin-left: 15px;\n  flex-shrink: 0;\n  text-align: center;\n\n  .keycap {\n    margin: 0 10px 0 0;\n  }\n}\n\n.button.dark.full .keycap{\n  position: relative;\n  border-color: #fff;\n  padding-top: 1px;\n  padding-bottom: 3px;\n  top: -2px;\n}\n\n@mixin cover($rt: -1px, $rl: -1px, $rr: -1px, $rb: -1px) {\n  content: '';\n  display: block;\n  position: absolute;\n  top: $rt;\n  left: $rl;\n  right: $rr;\n  bottom: $rb;\n}\n\n/** Highlights for the different steps. */\n.tutorial-2 .map {\n  z-index: 1000;\n  position: relative;\n\n  &:before {\n    @include cover;\n    z-index: 10001;\n    box-shadow: inset 0 0 100px rgba(#000, .3);\n  }\n}\n\n.tutorial-3 .legend {\n  z-index: 1000;\n  box-shadow: 0 0 4px rgba(#000, .3);\n}\n\n.tutorial-4 .menu {\n  z-index: 1000;\n  \n  .zoom-control, .location-control, .layers {\n    box-shadow: 0 0 4px rgba(#000, .3);\n  }\n}\n\n.tutorial-5 .menu {\n  z-index: 1000;\n\n  .layers, .location-control, .zoom-control, .about-button {\n    position: relative;\n\n    &:before {\n      z-index: 1100;\n      @include cover;\n      background: rgba(#000, .4);\n    }\n  }\n\n  .layers [title=\"data/rasters/L_ref.json\"] {\n    z-index: 1500;\n    background: #fff;\n  }\n}\n\n.tutorial-6 .sidebar {\n  z-index: 1000;\n}\n\n.tutorial-7 .year {\n  z-index: 1000;\n  box-shadow: 0 0 4px rgba(#000, .3);\n}\n\n#app.tutorial-8:before {\n  display: none;\n}\n\n#app.tutorial-9:before {\n  display: none;\n}\n\n#app.tutorial-10:before {\n  display: none;\n}\n\n.tutorial-11 .menu {\n  z-index: 1000;\n\n  .layers, .location-control, .zoom-control, .about-button {\n    position: relative;\n\n    &:before {\n      z-index: 1100;\n      @include cover;\n      background: rgba(#000, .4);\n    }\n  }\n\n  .layers [title=\"data/rasters/correlation_ref.json\"] {\n    z-index: 1500;\n    background: #fff;\n  }\n}\n\n#app.tutorial-12:before {\n  display: none;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tutorial.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tutorial.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tutorial.vue?vue&type=template&id=626a21d2&\"\nimport script from \"./Tutorial.vue?vue&type=script&lang=js&\"\nexport * from \"./Tutorial.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tutorial.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Tutorial.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about-wrapper\"},[_c('a',{staticClass:\"about-close\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.$emit('dismiss')}}},[_vm._v(\"X\")]),_c('section',{staticClass:\"about-box\"},[_c('h2',[_vm._v(_vm._s(_vm.$t('credits.title')))]),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.what'))}}),_c('ul',[_c('li',[_vm._v(_vm._s(_vm.$t('credits.alex')))]),_c('li',[_vm._v(_vm._s(_vm.$t('credits.karthi')))]),_c('li',[_vm._v(_vm._s(_vm.$t('credits.romain')))])]),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.collaborators'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.credits-1'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.credits-2'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.thanks'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('credits.logo'))}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"about-wrapper\">\n        <a href=\"#\" class=\"about-close\" @click.prevent=\"$emit('dismiss')\">X</a>\n        \n        <section class=\"about-box\">\n            <h2>{{ $t('credits.title') }}</h2>\n            <p v-html=\"$t('credits.what')\"></p>\n            <ul>\n                <li>{{ $t('credits.alex') }}</li>\n                <li>{{ $t('credits.karthi') }}</li>\n                <li>{{ $t('credits.romain') }}</li>\n            </ul>\n            <p v-html=\"$t('credits.collaborators')\"></p>\n            <p v-html=\"$t('credits.credits-1')\"></p>\n            <p v-html=\"$t('credits.credits-2')\"></p>\n            <p v-html=\"$t('credits.thanks')\"></p>\n            <p v-html=\"$t('credits.logo')\"></p>\n        </section>\n    </div>\n</template>\n\n<script>\nexport default {}\n</script>\n\n<style lang=\"scss\">\n.about-wrapper {\n    width: 45%;\n    height: 60%;\n    position: fixed;\n    top: 20%;\n    left: 18%;\n    z-index: 500;\n}\n\n.about-box {\n    width: 100%;\n    height: 100%;\n    box-shadow: 0 0 4px rgba(0, 0, 0, .2);\n    background: #fff;\n    padding: 40px;\n    box-sizing: border-box;\n    overflow: auto;\n\n    h2 {\n        margin-top: 0;\n    }\n\n    li {\n        font-size: .9em;\n    }\n\n    &:after {\n        content: \"\";\n        display: block;\n        height: 40px;\n        width: 100%;\n    }\n}\n\n.about-close {\n    height: 40px;\n    width: 40px;\n    box-shadow: -2px 0 2px rgba(#000, .2);\n    background: #fff;\n    outline: none;\n    font-size: 14pt;\n    line-height: 40px;\n    text-align: center;\n    text-decoration: none;\n    color: #000;\n    position: absolute;\n    left: -40px;\n    top: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./About.vue?vue&type=template&id=8316a872&\"\nimport script from \"./About.vue?vue&type=script&lang=js&\"\nexport * from \"./About.vue?vue&type=script&lang=js&\"\nimport style0 from \"./About.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"About.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"zoom-control\"},[_c('a',{staticClass:\"minus\",on:{\"click\":function($event){$event.preventDefault();_vm.$emit('zoomOut')}}},[_vm._v(\"-\")]),_c('a',{staticClass:\"plus\",on:{\"click\":function($event){$event.preventDefault();_vm.$emit('zoomIn')}}},[_vm._v(\"+\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"zoom-control\">\n    <a class=\"minus\" @click.prevent=\"$emit('zoomOut')\">-</a>\n    <a class=\"plus\" @click.prevent=\"$emit('zoomIn')\">+</a>\n  </section>\n</template>\n\n<script>\nexport default {}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.zoom-control {\n  width: 80px;\n\n  a {\n    cursor: pointer;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ZoomControl.vue?vue&type=template&id=5ddc0a45&\"\nimport script from \"./ZoomControl.vue?vue&type=script&lang=js&\"\nexport * from \"./ZoomControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ZoomControl.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ZoomControl.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"location-control\"},[_c('a',{staticClass:\"locate\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.locate($event)}}},[_c('i',{staticClass:\"fas fa-map-marker-alt\"})]),_c('div',{class:{search: true, active: _vm.searchExpanded}},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleSearch($event)}}},[(_vm.searchExpanded)?_c('i',{staticClass:\"fas fa-search-minus\"}):_c('i',{staticClass:\"fas fa-search-location\"})]),_c('input',{ref:\"searchInput\",staticClass:\"autocomplete\",attrs:{\"type\":\"text\"},on:{\"keyup\":function($event){if(!('button' in $event)&&$event.keyCode!==27){ return null; }_vm.searchExpanded = false}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"location-control\">\n    <a href=\"#\" class=\"locate\"\n        @click.prevent=\"locate\">\n      <i class=\"fas fa-map-marker-alt\"></i>\n    </a>\n    <div :class=\"{search: true, active: searchExpanded}\">\n      <a href=\"#\" @click.prevent=\"toggleSearch\">\n        <i v-if=\"searchExpanded\" class=\"fas fa-search-minus\"></i>\n        <i v-else class=\"fas fa-search-location\"></i>\n      </a>\n      <input type=\"text\" class=\"autocomplete\" ref=\"searchInput\"\n        @keyup.27=\"searchExpanded = false\">\n    </div>\n  </section>\n</template>\n\n<script>\nimport Config from '../config.json'\n\nexport default {\n  props: ['onLocation'],\n\n  data: () => ({\n    searchExpanded: false\n  }),\n\n  mounted() {\n    const api = new google.maps.places.Autocomplete(this.$refs.searchInput)\n    api.setFields(['geometry'])\n    api.setOptions({strictBounds: true})\n    api.setBounds({\n      north: Config.viewport.topLatitude,\n      south: Config.viewport.bottomLatitude,\n      west: Config.viewport.leftLongitude,\n      east: Config.viewport.rightLongitude,\n    })\n\n    api.addListener('place_changed', () => {\n      const place = api.getPlace()\n\n      if (!place.geometry) {\n        this.onLocation(null, null)\n        return\n      }\n\n      this.searchExpanded = false\n      this.onLocation([\n        place.geometry.location.lat(),\n        place.geometry.location.lng()\n      ])\n    })\n  },\n\n  methods: {\n    locate() {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(pos => {\n          if (pos){\n            this.onLocation([pos.coords.latitude, pos.coords.longitude])\n          }\n        })\n      }\n    },\n\n    toggleSearch() {\n      this.searchExpanded ^= true\n      this.$refs.searchInput.focus()\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.location-control a i {\n  color: #111;\n  font-size: 18px;\n}\n\n.location-control .search {\n  display: flex;\n  align-items: center;\n\n  a {\n    border: 0 !important;\n  }\n\n  .autocomplete {\n    transition: width .25s;\n    height: 30px;\n    width: 0;\n    padding: 0;\n    border: 0 none;\n  }\n}\n\n.location-control .search.active .autocomplete {\n  width: 300px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LocationControl.vue?vue&type=template&id=67ed561b&\"\nimport script from \"./LocationControl.vue?vue&type=script&lang=js&\"\nexport * from \"./LocationControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LocationControl.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"LocationControl.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"layers\"},[_c('h3',[_vm._v(_vm._s(_vm.$t('titles.layers')))]),_c('div',{staticClass:\"buttons\"},_vm._l((_vm.layers),function(layer,path){return (!layer.hidden)?_c('a',{key:path,class:{ active: _vm.value == layer.path },style:({'background': _vm.value == layer.path ? layer.active_color : layer.color}),attrs:{\"title\":path},on:{\"click\":function($event){$event.preventDefault();_vm.select(layer)}}},[_c('span',{staticClass:\"icon\",domProps:{\"innerHTML\":_vm._s(_vm.$t((\"layers.\" + (layer.id) + \".icon\")))}}),_c('span',[_vm._v(_vm._s(_vm.$t((\"layers.\" + (layer.id) + \".name\"))))]),(!layer.loaded)?_c('div',{staticClass:\"loader-tile-grid\"},[_c('div',{staticClass:\"loader-tile loader-tile1\"}),_c('div',{staticClass:\"loader-tile loader-tile2\"}),_c('div',{staticClass:\"loader-tile loader-tile3\"}),_c('div',{staticClass:\"loader-tile loader-tile4\"}),_c('div',{staticClass:\"loader-tile loader-tile5\"}),_c('div',{staticClass:\"loader-tile loader-tile6\"}),_c('div',{staticClass:\"loader-tile loader-tile7\"}),_c('div',{staticClass:\"loader-tile loader-tile8\"}),_c('div',{staticClass:\"loader-tile loader-tile9\"})]):_vm._e()]):_vm._e()}))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"layers\">\n    <h3>{{ $t('titles.layers') }}</h3>\n\n    <div class=\"buttons\">\n      <a v-for=\"(layer, path) in layers\"\n        v-if=\"!layer.hidden\"\n        :style=\"{'background': value == layer.path ? layer.active_color : layer.color}\"\n        :key=\"path\"\n        :title=\"path\"\n        :class=\"{ active: value == layer.path }\"\n\n        @click.prevent=\"select(layer)\">\n        <span class=\"icon\" v-html=\"$t(`layers.${layer.id}.icon`)\"></span>\n        <span>{{ $t(`layers.${layer.id}.name`) }}</span>\n\n        <div v-if=\"!layer.loaded\" class=\"loader-tile-grid\">\n          <div class=\"loader-tile loader-tile1\"></div>\n          <div class=\"loader-tile loader-tile2\"></div>\n          <div class=\"loader-tile loader-tile3\"></div>\n          <div class=\"loader-tile loader-tile4\"></div>\n          <div class=\"loader-tile loader-tile5\"></div>\n          <div class=\"loader-tile loader-tile6\"></div>\n          <div class=\"loader-tile loader-tile7\"></div>\n          <div class=\"loader-tile loader-tile8\"></div>\n          <div class=\"loader-tile loader-tile9\"></div>\n        </div>\n      </a>\n    </div>\n  </section>\n</template>\n\n<script>\nexport default {\n  props: ['layers', 'value'],\n\n  methods: {\n    select(layer) {\n      if (!layer.loading) {\n        this.$emit('input', layer.path)\n        this.$emit('checkTutorial', layer.path)\n      }\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.layers {\n  max-height: 600px;\n  height: 80%;\n  width: 80px;\n  border: 1px solid #bbb;\n  box-shadow: 0 0 3px rgba(#000, .1);\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n}\n\n.layers .buttons {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.layers h3, .layers a {\n  text-transform: uppercase;\n}\n\n.layers h3 {\n  width: 100%;\n  margin: 0;\n  padding: 7px 0;\n}\n\n.layers a {\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  outline: none;\n  cursor: pointer;\n\n  height: 80px;\n  text-decoration: none;\n  border-bottom: 1px solid #bbb;\n  color: #333;\n  font-size: 10pt;\n\n  &.active {\n    background: #f3f3f3;\n    box-shadow: inset 0 0 2px rgba(0, 0, 0, .1);\n  }\n\n  &:first-child {\n    border-top: 1px solid #bbb;\n  }\n\n  .icon {\n    font-size: 1rem;\n    margin-bottom: 3px;\n  }\n}\n\n// Source: http://tobiasahlin.com/spinkit/\n.loader-tile-grid {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  cursor: not-allowed;\n}\n\n.loader-tile-grid .loader-tile {\n  width: 33%;\n  height: 33%;\n  background-color: #0002;\n  float: left;\n\n  animation: loader-tileGridScaleDelay 1.3s infinite ease-in-out;\n}\n\n.loader-tile-grid .loader-tile1 { animation-delay: 0.2s; }\n.loader-tile-grid .loader-tile2 { animation-delay: 0.3s; }\n.loader-tile-grid .loader-tile3 { animation-delay: 0.4s; }\n.loader-tile-grid .loader-tile4 { animation-delay: 0.1s; }\n.loader-tile-grid .loader-tile5 { animation-delay: 0.2s; }\n.loader-tile-grid .loader-tile6 { animation-delay: 0.3s; }\n.loader-tile-grid .loader-tile7 { animation-delay: 0s; }\n.loader-tile-grid .loader-tile8 { animation-delay: 0.1s; }\n.loader-tile-grid .loader-tile9 { animation-delay: 0.2s; }\n\n@keyframes loader-tileGridScaleDelay {\n  0%, 70%, 100% {\n    transform: scale3D(1, 1, 1);\n  } 35% {\n    transform: scale3D(0, 0, 1);\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Layers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Layers.vue?vue&type=template&id=4b4ae635&\"\nimport script from \"./Layers.vue?vue&type=script&lang=js&\"\nexport * from \"./Layers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Layers.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Layers.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map-container\"},[_c('section',{ref:\"map\",staticClass:\"map\"}),_c('svg',{ref:\"circle_svg\",staticClass:\"EV-circle-svg\"}),_c('svg',{ref:\"svg\",staticClass:\"EV-svg\"}),(_vm.hasFutureAvailable && !_vm.isFuture)?_c('section',{staticClass:\"year\"},[_c('p',[_vm._v(\"2012\")]),_c('a',{style:({'color': _vm.futureColor}),attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.$emit('toggleFuture'); })($event)}}},[_c('i',{staticClass:\"fas fa-fast-forward\"})])]):(_vm.hasFutureAvailable)?_c('section',{staticClass:\"year\"},[_c('p',[_vm._v(\"2030\")]),_c('a',{style:({'color': _vm.presentColor}),attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.$emit('toggleFuture'); })($event)}}},[_c('i',{staticClass:\"fas fa-fast-backward\"})])]):_vm._e(),_c('section',{staticClass:\"legend\"},[_c('div',{ref:\"legend\",staticClass:\"legend-inner\"}),(_vm.isEspacesVerts)?_c('section',[_c('h3',[_vm._v(_vm._s(_vm.$t('legend.natural-spaces')))]),_c('figure',[_c('div',{staticClass:\"item\",style:({backgroundColor: _vm.forestColor})}),_c('figcaption',{domProps:{\"innerHTML\":_vm._s(_vm.$t('legend.wood'))}})]),_c('figure',[_c('div',{staticClass:\"item\",style:({backgroundColor: _vm.waterColor})}),_c('figcaption',{domProps:{\"innerHTML\":_vm._s(_vm.$t('legend.water'))}})]),_c('figure',[_c('div',{staticClass:\"item\",style:({backgroundColor: _vm.greenColor})}),_c('figcaption',{domProps:{\"innerHTML\":_vm._s(_vm.$t('legend.leisure'))}})])]):(_vm.currentUnit)?_c('section',[_c('p',[_vm._v(\"(\"+_vm._s(_vm.currentUnit)+\")\")])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//this file contains a set of variables. Those variables should be treated as global variables, and can be used anywhere\n//used because otherwise, we would have either a 800 lines file, or 15 parameters functions...\n\nvar cachedLayers = {} //placehoder for the layers, to compute them only once\n\nvar currentLayerPath = \"\" //path of the currently selected layer\n\nvar map = null //reference to the leaflet map\n\nvar mapElement = null\n\nvar currentGeoLat = null //current latitude of the cursor\n\nvar currentGeoLng = null //current longitude of the cursos\n\nvar svg_EV = null //reference to the svg of the \"espaces verts\"\n\nvar svg_circle_EV = null //reference to the svg of the circle around the cursot\n\nvar interComms = null //reference to the interComms element, i.e. a d3.selectAll(\"path\")\n\nvar voronoi = null //reference to the voronoi element, i.e. a d3.selectAll(\"path\")\n\nvar imgs = null //reference to the current layer image, i.e. a d3.selectAll(\"image\")\n\nvar imgs_EV = null //reference to the \"espaces verts\" image, i.e. a d3.selectAll(\"image\")\n\nvar update_parameters = {} //parameters used by the update function, such as tl/br coordinates, or a \"hide\" boolean\n\nvar markerElement = null //reference to marker element, i.e. a d3.selectAll(\"image\")\n\nvar canvas = null //reference to the canvas used to generate layers\n\nvar voronoi_shape = null //shapes of the voronois, content of the geojson\n\nvar interComm_shape = null //shapes of the interComms, content of the geojson\n\nvar firstVoronoiByInterComm = [] //array containing infos about the id of the first voronoi inside a given interComm, since voronoi ids are consecutive (e.g. ids 0-7 are inside interComm 0)\n\nvar pathGenerator = null //pathGenerator, used to project paths (latLng) on the map\n\nvar defs_path = null //reference to the d3.selectAll(\"path\") used to crop the layer to the current voronoi area\n\nvar legend_element = null //element (div) that will contain the layer legend\n\nvar color_legend_canvas = null //element (canvas) that will contain the layer legend (the colors)\n\nvar color_legend_svg = null //element (div) that will contain the layer legend (the labels)\n\nvar onSchools = null //onSchools callback function, called when the number of schools changes (e.g. we hovered another area)\n\nvar onHistChange = null //onHistChange callback function, called when the histogram must be changed (e.g. we hovered another area)\n\nvar onNewName = null //onNewName callback function, called when the current intercomm name has changed\n\nvar highlightedInterComm = -1 //id of the currently highlighted interComm\n\nvar initialBounds = null //initial bounds of the map (set to paris)\n\nvar markerIcon = {} //informations about the marker icon\n\nvar lastMouseDownX = 0 //coordinates of the last mouse Down event\n\nvar lastMouseDownY = 0 //coordinates of the last mouse Down event\n\nvar voronoiContainment = null //precomputed containment tests for the voronois\n\nvar interCommContainment = null //precomputed containment tests for the interComms\n\nvar showCirclePreview = true //do we show the circle preview, or do we hide it?\n\nvar showFutureInsteadOfEV = false //do we show the future preview in the circle instead of the EV?\n\nvar lastMousePosition = {x:0,y:0} //last known position of the mouse\n\nvar isFuture = false\n\nvar currentCircleLayerPath = \"\"\n\nvar currentChartIndex = -1\n\nvar currentChartIndexIsVoronoi = false\n\nexport default {cachedLayers,\n\t\t\t\tcurrentLayerPath,\n\t\t\t\tmap,\n\t\t\t\tmapElement,\n\t\t\t\tcurrentGeoLat,\n\t\t\t\tcurrentGeoLng,\n\t\t\t\tsvg_EV,\n\t\t\t\tsvg_circle_EV,\n\t\t\t\tinterComms,\n\t\t\t\tvoronoi,\n\t\t\t\timgs,\n\t\t\t\timgs_EV,\n\t\t\t\tupdate_parameters,\n\t\t\t\tmarkerElement,\n\t\t\t\tcanvas,\n\t\t\t\tvoronoi_shape,\n\t\t\t\tinterComm_shape,\n\t\t\t\tfirstVoronoiByInterComm,\n\t\t\t\tpathGenerator,\n\t\t\t\tdefs_path,\n\t\t\t\tlegend_element,\n\t\t\t\tcolor_legend_canvas,\n\t\t\t\tcolor_legend_svg,\n\t\t\t\tonSchools,\n\t\t\t\tonHistChange,\n\t\t\t\tonNewName,\n\t\t\t\thighlightedInterComm,\n\t\t\t\tinitialBounds,\n\t\t\t\tmarkerIcon,\n\t\t\t\tlastMouseDownX,\n\t\t\t\tlastMouseDownY,\n\t\t\t\tvoronoiContainment,\n\t\t\t\tinterCommContainment,\n\t\t\t\tshowCirclePreview,\n\t\t\t\tshowFutureInsteadOfEV,\n\t\t\t\tlastMousePosition,\n\t\t\t\tisFuture,\n\t\t\t\tcurrentLayerPath,\n\t\t\t\tcurrentChartIndex,\n\t\t\t\tcurrentChartIndexIsVoronoi}","var Config = require('./config.json')\nimport helpers_f from './helpers.js'\nimport shared from './shared.js'\n\nfunction update_clip() {\n  var map = shared.map\n  var cachedLayers = shared.cachedLayers\n  var currentLayerPath = shared.currentLayerPath\n  var defs_path = shared.defs_path\n  function clip_projectPoint(x, y) {\n\n    if (!cachedLayers[currentLayerPath]){\n      return\n    }\n    var default_tl_point = map.latLngToLayerPoint([cachedLayers[currentLayerPath].tl_lat, cachedLayers[currentLayerPath].tl_lng])\n    var default_br_point = map.latLngToLayerPoint([cachedLayers[currentLayerPath].br_lat, cachedLayers[currentLayerPath].br_lng])\n\n    var width = (default_br_point.x - default_tl_point.x)\n    var height = (default_br_point.y - default_tl_point.y)\n\n    var point = map.latLngToLayerPoint(L.latLng(y, x))\n\n    var tx = (point.x - default_tl_point.x) / (default_br_point.x - default_tl_point.x) * (width - 1)\n    var ty = (point.y - default_tl_point.y) / (default_br_point.y - default_tl_point.y) * (height - 1)\n\n    this.stream.point(tx, ty);\n  }\n\n  var clip_transform = d3.geo.transform({\n    point: clip_projectPoint\n  });\n  var clip_path = d3.geo.path()\n    .projection(clip_transform);\n  defs_path.attr(\"d\", clip_path)\n}\n\nfunction update_EV_preview(mouseX,mouseY){\n  updateCirclePreviewPath()\n  var svg_EV = shared.svg_EV\n  var svg_circle_EV = shared.svg_circle_EV\n  var map = shared.map\n  var cachedLayers = shared.cachedLayers\n  var imgs_EV = shared.imgs_EV\n\n  var layer_path = shared.currentCircleLayerPath\n  if (!cachedLayers[layer_path] || !shared.showCirclePreview){\n    shared.svg_EV.style(\"display\",\"none\")\n    shared.svg_circle_EV.style(\"display\",\"none\")\n    return\n  }\n\n  var svg_width = parseInt(svg_EV.style(\"width\").substr(0,svg_EV.style(\"width\").length-2))\n  var svg_height = parseInt(svg_EV.style(\"height\").substr(0,svg_EV.style(\"width\").length-2))\n  var svg_circle_width = parseInt(svg_circle_EV.style(\"width\").substr(0,svg_circle_EV.style(\"width\").length-2))\n  var svg_circle_height = parseInt(svg_circle_EV.style(\"height\").substr(0,svg_circle_EV.style(\"width\").length-2))\n\n  svg_EV.style(\"top\",(mouseY - svg_height - 15)+\"px\")\n  svg_EV.style(\"left\",(mouseX + 15)+\"px\")\n  svg_EV.style(\"display\",\"\")\n\n  svg_circle_EV.style(\"top\",(mouseY - svg_circle_height/2)+\"px\")\n  svg_circle_EV.style(\"left\",(mouseX - svg_circle_width/2)+\"px\")\n  svg_circle_EV.style(\"display\",\"\")\n\n  var magnifyingRatio = svg_width/svg_circle_width\n\n  var tl = L.latLng(cachedLayers[layer_path].tl_lat,cachedLayers[layer_path].tl_lng)\n  var br = L.latLng(cachedLayers[layer_path].br_lat,cachedLayers[layer_path].br_lng)\n\n  var tl_pixels = map.latLngToContainerPoint(tl)\n  var br_pixels = map.latLngToContainerPoint(br)\n\n  var pixels_on_left = mouseX - tl_pixels.x\n  var pixels_on_top = mouseY - tl_pixels.y\n\n  var magnified_tl_pixels = L.point(mouseX - pixels_on_left * magnifyingRatio,\n                                    mouseY - pixels_on_top * magnifyingRatio)\n\n  var image_width = (map.latLngToLayerPoint(br).x - map.latLngToLayerPoint(tl).x) * magnifyingRatio\n  var image_height = (map.latLngToLayerPoint(br).y - map.latLngToLayerPoint(tl).y) * magnifyingRatio\n\n  imgs_EV.attr('width', image_width)\n  imgs_EV.attr('height', image_height)\n\n  imgs_EV.attr(\"transform\",\n    \"translate(\" +\n      (+ magnified_tl_pixels.x - mouseX + svg_width/2) + \",\" +\n      (+ magnified_tl_pixels.y - mouseY + svg_height/2) + \")\"\n  )\n}\n\nfunction update_chart(layerURL) {\n  var i = shared.currentChartIndex\n  var voro = shared.currentChartIndexIsVoronoi\n  var cachedLayers = shared.cachedLayers\n  var info = cachedLayers[layerURL]\n\n  if (shared.isFuture && Config.layers[layerURL].future){\n    info = cachedLayers[Config.layers[layerURL].future]\n  }\n  if (!info) {\n    return;\n  }\n  var data=[]\n  if (i < 0){ //none selected, show data about entire Paris region\n    data = info.entire_hist\n  }\n  else if (voro == true) {\n    data = info.voronoi_hist[i]\n  } else {\n    data = info.interComm_hist[i]\n  }\n\n  //TODO: don't exclude Urban cooling, but right now the layer has only three different values so it looks way better with 0 values\n  if (layerURL != Config.Urban_cooling){\n    data[0]=0 // ignore 0 values\n  }\n  \n  shared.onHistChange(helpers_f.range(256),data)\n\n}\n\nfunction update_text_school(layerURL){\n  var i = shared.currentChartIndex\n  var voro = shared.currentChartIndexIsVoronoi\n  var cachedLayers = shared.cachedLayers\n  if(layerURL == Config.Urban_cooling){\n    var info = cachedLayers[Config.Ecole_path]\n    if (!info) {\n        return;\n    }\n    var data=[]\n    if (i < 0){\n      data = info.entire_hist.slice(-1).pop()\n    }\n    else if (voro == true) {\n      data = info.voronoi_hist[i].slice(-1).pop()\n    } else {\n      data = info.interComm_hist[i].slice(-1).pop()\n    }\n    shared.onSchools(data)\n  }\n  else{\n    shared.onSchools(null)\n  }\n}\n\n/**\n * Updates the marker element on the map with the right coordinates.\n */\nfunction updateMarker() {\n  var map = shared.map\n  var currentGeoLat = shared.currentGeoLat\n  var currentGeoLng = shared.currentGeoLng\n  var markerElement = shared.markerElement\n  if (currentGeoLat && currentGeoLng) {\n    const point = map.latLngToLayerPoint([currentGeoLat, currentGeoLng])\n    const x = point.x - shared.markerIcon.iconAnchor[0]\n    const y = point.y - shared.markerIcon.iconAnchor[1]\n    markerElement.attr('visibility', 'visible')\n    markerElement.attr('transform', `translate(${x}, ${y})`)\n  } else {\n    markerElement.attr('visibility', 'hidden')\n  }\n}\n\nfunction updateMap() {//add here everything that could potentially change\n\n  var map = shared.map\n  var cachedLayers = shared.cachedLayers\n  var voronoi = shared.voronoi\n  var interComms = shared.interComms\n  var imgs = shared.imgs\n  var imgs_EV = shared.imgs_EV\n  var update_parameters = shared.update_parameters\n  var path = shared.pathGenerator\n\n  if (map.getZoom() == 9){\n    deselectInterComm()\n  }\n\n  if (update_parameters.hide) {\n    console.log('hidden!')\n    interComms.attr('visibility', 'hidden')\n    voronoi.attr('visibility', 'hidden')\n    imgs.attr('visibility', 'hidden')\n    imgs_EV.attr('visibility', 'hidden')\n    return;\n  } else {\n    interComms.attr('visibility', 'visible')\n    voronoi.attr('visibility', 'visible')\n    imgs.attr('visibility', 'visible')\n    imgs_EV.attr('visibility', 'visible')\n  }\n\n  var tl = update_parameters.tl\n  var br = update_parameters.br\n\n  console.log('UPDATING')\n  var width = (map.latLngToLayerPoint(br).x - map.latLngToLayerPoint(tl).x)\n  var height = (map.latLngToLayerPoint(br).y - map.latLngToLayerPoint(tl).y)\n  imgs.attr(\"transform\",\n    function(d) {\n      var point = map.latLngToLayerPoint(tl)\n      return \"translate(\" +\n        point.x + \",\" +\n        point.y + \")\";\n    }\n  )\n\n  imgs.attr('width', width)\n  imgs.attr('height', height)\n  interComms.attr(\"d\", path)\n  voronoi.attr(\"d\", path)\n  update_clip()\n  updateMarker()\n  shared.svg_EV.style(\"display\",\"none\")\n  shared.svg_circle_EV.style(\"display\",\"none\")\n}\n\nfunction deselectInterComm(){\n  shared.interComms.style(\"pointer-events\", \"all\")\n  shared.highlightedInterComm = -1\n\n  shared.interComms.style(\"fill\", function(_,j){\n    if (!Config.layers[shared.currentLayerPath].useColorScheme){\n      return \"#00000011\"\n    }\n    return shared.cachedLayers[shared.currentLayerPath].colorScale(shared.cachedLayers[shared.currentLayerPath].interComm_means[j])\n  })\n  shared.interComms.style(\"fill-opacity\", 1)\n  shared.voronoi.style(\"fill-opacity\", 0)\n  shared.voronoi.style(\"stroke-opacity\", 0)\n\n  shared.svg_EV.style(\"display\",\"none\")\n  shared.svg_circle_EV.style(\"display\",\"none\")\n}\n\nfunction updateCirclePreviewPath(){\n  if (shared.showFutureInsteadOfEV && Config.layers[shared.currentLayerPath].future){ //if show future/present\n    if (shared.isFuture){ //if show present\n      shared.currentCircleLayerPath = shared.currentLayerPath\n      shared.svg_circle_EV.style(\"border-color\",Config.color_present)\n      shared.svg_EV.style(\"border-color\",Config.color_present)\n    }\n    else{ //if show future\n      shared.currentCircleLayerPath = Config.layers[shared.currentLayerPath].future\n      shared.svg_circle_EV.style(\"border-color\",Config.color_future)\n      shared.svg_EV.style(\"border-color\",Config.color_future)\n    }\n  }\n  else{ //if show EV\n    shared.currentCircleLayerPath = Config.EV_path\n    shared.svg_circle_EV.style(\"border-color\",Config.color_ev)\n    shared.svg_EV.style(\"border-color\",Config.color_ev)\n  }\n}\n\nfunction updateCirclePreviewLayer(){\n  updateCirclePreviewPath()\n  var layer_path = shared.currentCircleLayerPath\n  if (!shared.cachedLayers[layer_path] || !shared.showCirclePreview){\n    return\n  }\n  shared.imgs_EV.attr(\"xlink:href\", shared.cachedLayers[layer_path].url)\n}\n\nexport default{update_clip,update_EV_preview,update_chart,update_text_school,updateMarker,updateMap,updateCirclePreviewPath,updateCirclePreviewLayer,deselectInterComm}","const colorSchemeDict = {\n  0:d3.interpolateOranges,\n  1:d3.interpolateRdBu,\n  2:d3.interpolateBlues,\n  3:d3.interpolateGnBu,\n  4:d3.interpolateRdYlGn,\n}\n\nimport shared from './shared.js'\nimport update_f from './update.js'\nvar Config = require('./config.json')\n\n/**\n * Loads a JSON containment file and parses it.\n */\nfunction loadContainmentFile (url) {\n  return fetch(url)\n    .then(res => res.json())\n    .then(json => {\n      json.data = JSON.parse(json.data)\n      return json\n    })\n}\n\nconst MAP_TILES = 'https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png'\nconst MAP_ATTRIB = 'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, under <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a>. Data by <a href=\"http://openstreetmap.org\">OpenStreetMap</a>, under <a href=\"http://www.openstreetmap.org/copyright\">ODbL</a>.'\n/**\n * Creates a Leaflet map of the Paris area and returns it.\n */\nfunction createMap (element) {\n  shared.map = L.map(element, {\n    zoomControl: false\n  })\n  var map = shared.map\n  map.fitBounds(shared.initialBounds)\n  map.setMaxBounds(map.getBounds().pad(0.025))\n\n  const base = L.tileLayer(MAP_TILES, {\n    minZoom: 9,\n    maxZoom: 14, // Toner Light won't zoom further than 14.\n    attribution: MAP_ATTRIB\n  })\n\n  base.addTo(map)\n\n  map.setView(new L.LatLng(48.856614,2.3522219),map.getZoom()+2) // zoom more on Paris, initially\n}\n\n/**\n * Returns whether a given point is within the Paris region.\n */\nfunction isWithinParis(point) {\n  return shared.interComm_shape.features.some(s => d3.geoContains(s, point))\n}\n\n/**\n * Sets the position of the geolocation marker.\n */\nfunction setLocation (lat, lng) {\n  if (!lat || !lng || !isWithinParis([lng, lat])) {\n    lat = null\n    lng = null \n  } else {\n    shared.map.setView(new L.LatLng(lat, lng),11)\n  }\n\n  shared.currentGeoLat = lat\n  shared.currentGeoLng = lng\n  update_f.updateMarker()\n}\n\n\nfunction getColorsFromScheme (colorSchemeId){\n  var currentScheme = colorSchemeDict[colorSchemeId]\n  var range = []\n  for (var i=0; i<256; ++i){\n    range.push(currentScheme(i/255))\n  }\n  \n  return range\n}\n\n\n// create continuous color legend\nfunction fillScale (scale_canvas, scale_svg, colorScale, minValue, maxValue, invertColorScheme) {\n  const legendHeight = 200\n  const legendWidth = 70\n  const margin = {top: 5, right: 30, bottom: 5, left: 0}\n\n  var canvas = scale_canvas\n    .attr(\"height\", legendHeight - margin.top - margin.bottom)\n    .attr(\"width\", 1)\n    .style(\"height\", (legendHeight - margin.top - margin.bottom) + \"px\")\n    .style(\"width\", (legendWidth - margin.left - margin.right) + \"px\")\n    .style(\"position\", \"absolute\")\n    .style(\"top\", (margin.top) + \"px\")\n    .style(\"left\", (margin.left) + \"px\")\n    .node();\n\n  var ctx = canvas.getContext(\"2d\");\n\n  var legendScale = height =>\n    colorScale(((legendHeight - margin.top - margin.bottom) - height)/ (legendHeight - margin.top - margin.bottom) * 255)\n\n  var image = ctx.createImageData(1, (legendHeight - margin.top - margin.bottom));\n\n  for (var i=0; i<legendHeight - margin.top - margin.bottom; ++i){\n    var c = d3.rgb(legendScale(i));\n    var pos = i*4;\n\n    if (invertColorScheme){\n      pos = (legendHeight - margin.top - margin.bottom - 1)*4 - i*4\n    }\n    image.data[pos] = c.r;\n    image.data[pos + 1] = c.g;\n    image.data[pos + 2] = c.b;\n    image.data[pos + 3] = 255;\n  }\n  \n  ctx.putImageData(image, 0, 0);\n\n  var domain = [maxValue, minValue]\n  if (invertColorScheme){\n    domain = [minValue, maxValue]\n  }\n  var legendAxis = d3.axisRight()\n    .scale(d3.scaleLinear().domain(domain).range([1, legendHeight - margin.bottom - margin.top - 1]))\n    .tickSize(6)\n    .ticks(8);\n\n  var svg = scale_svg\n    .attr(\"height\", `${legendHeight}px`)\n    .attr(\"width\", `${legendWidth}px`)\n    .style(\"position\", \"absolute\")\n    .style(\"left\", \"0px\")\n    .style(\"top\", \"0px\")\n\n  svg\n    .select(\"g\")\n    .attr(\"class\", \"axis\")\n    .attr(\"transform\", `translate(${legendWidth - margin.left - margin.right}, ${margin.top - 1})`)\n    .call(legendAxis);\n}\n\n\nfunction computeColorRange (percentiles,colors){\n  var domain_percentiles = percentiles.slice()\n  domain_percentiles.unshift(0)\n  domain_percentiles.push(255)\n\n  var domainLength = domain_percentiles.length\n  var rangeLength  = colors.length\n\n  var intermediateDomain = []\n  for (var i=0; i<rangeLength; ++i){\n    intermediateDomain[i] = i/(rangeLength-1)\n  }\n  var intermediateScale = d3.scale.linear().domain(intermediateDomain).range(colors)\n\n  var range_out = []\n  for (var i=0; i<domainLength; ++i){\n    var t = i/(domainLength-1)\n    range_out.push(intermediateScale(t))\n  }\n  return [domain_percentiles,range_out]\n}\n\n\nfunction blankStyle (feature) {\n  return {\n    opacity: 0,\n    fillOpacity: 0\n  };\n}\n\nfunction range (length){\n  var range = []\n  for (var i=0; i<length; ++i){\n    range[i]=i\n  }\n  return range\n}\n\nfunction handleKeyEvent(e){\n  if (e && (e.charCode || e.keyCode) == 120){ // 'x' key\n    shared.showCirclePreview = ! shared.showCirclePreview\n  }\n  if (e && (e.charCode || e.keyCode) == 32){ // space bar\n    shared.showFutureInsteadOfEV = ! shared.showFutureInsteadOfEV\n  }\n  update_f.updateCirclePreviewLayer()\n  update_f.update_EV_preview(shared.lastMousePosition.x,shared.lastMousePosition.y)\n}\n\nexport default {loadContainmentFile,createMap,setLocation,getColorsFromScheme,fillScale,computeColorRange,blankStyle,range,handleKeyEvent}","var Config = require('./config.json')\nimport helpers_f from './helpers.js'\nimport shared from './shared.js'\nimport update_f from './update.js'\n\n\n/**\n * Loads, pre-processes and caches the layer with the given path.\n * This includes:\n * - Fetching the layer's JSON data;\n * - Fetching containment files.\n * - Preparing arrays for means, counts and histograms.\n * - Dispatching those computations to worker threads.\n */\nfunction loadLayer(path, isFuture, callback) {\n  var canvas = shared.canvas\n  var voronoi_shape = shared.voronoi_shape\n  var interComm_shape = shared.interComm_shape\n  if (shared.cachedLayers[path]) {\n    callback();\n    return;\n  }\n\n  let truePath = path\n  if (isFuture) {\n    truePath = Config.layers[path].future\n  }\n\n  fetch(truePath)\n    .then(res => res.json())\n    .then(json => {\n      console.log('Preloaded layer:', truePath)\n      \n      json.data = JSON.parse(json.data)\n      json.percentiles = JSON.parse(json.percentiles)\n\n      var pixels = json.data;\n\n      canvas.width = json.width\n      canvas.height = json.height\n\n      var tempContext = canvas.getContext(\"2d\");\n      tempContext.createImageData(canvas.width, canvas.height);\n\n      //initalize means and counts arrays\n      var entire_hist = []\n\n\n      for (var i=0; i<256; ++i){\n        entire_hist[i] = 0\n      }\n\n      shared.firstVoronoiByInterComm = []\n      // Return a promise.\n      var onWorkEnded = function(e) {\n        var canvasData = e.data.result;\n\n        var interComm_counts = e.data.interComm_counts\n        var interComm_means = e.data.interComm_means\n        var voronoi_counts = e.data.voronoi_counts\n        var voronoi_means = e.data.voronoi_means\n        shared.firstVoronoiByInterComm = e.data.firstVoronoiByInterComm\n        var voronoi_hist = e.data.voronoi_hist\n        var interComm_hist = e.data.interComm_hist\n\n        for (var i = 0; i < interComm_shape.features.length; ++i) {\n          for (var j=0; j<256; ++j){\n            entire_hist[j] += interComm_hist[i][j]\n          }\n        }\n\n        tempContext.putImageData(canvasData, 0, 0);\n\n        if(path == Config.Ecole_path){\n          // Here we count the number of schools\n            for (var i = 0; i < voronoi_shape.features.length; ++i) {\n                voronoi_means[i] /= 255\n            }\n            for (var i = 0; i < interComm_shape.features.length; ++i) {\n                interComm_means[i] /= 255\n            }\n        }\n        else{\n          for (var i = 0; i < voronoi_shape.features.length; ++i) {\n            if (voronoi_counts[i] != 0) {\n              voronoi_means[i] /= voronoi_counts[i]\n            }\n          }\n          for (var i = 0; i < interComm_shape.features.length; ++i) {\n            if (interComm_counts[i] != 0) {\n              interComm_means[i] /= interComm_counts[i]\n            }\n          }\n        }\n            \n        var hist_buckets = [70, 140];\n\n        var value = canvas.toDataURL(\"png\");\n\n        update_f.updateCirclePreviewLayer()//refresh the EV overlay, the layer we want might be ready now\n\n        var colorScale = null\n        if (Config.layers[path] && Config.layers[path].useColorScheme){\n          var domain = helpers_f.range(256)\n          var range = helpers_f.getColorsFromScheme(Config.layers[path].colorScheme)\n        \n          colorScale = d3.scale.linear()\n            .range(range).domain(domain)\n        }\n        \n        if (Config.layers[path] && Config.layers[path].useColorScheme){\n          range = helpers_f.getColorsFromScheme(Config.layers[path].colorScheme)\n        }\n        \n        shared.cachedLayers[truePath] = {\n          \"url\": value,\n          \"tl_lat\": json.tl_lat,\n          \"tl_lng\": json.tl_lng,\n          \"br_lat\": json.br_lat,\n          \"br_lng\": json.br_lng,\n          \"width\": canvas.width,\n          \"height\": canvas.height,\n          \"voronoi_means\": voronoi_means,\n          \"interComm_means\": interComm_means,\n          \"voronoi_hist\": voronoi_hist,\n          \"entire_hist\":entire_hist,\n          \"interComm_hist\": interComm_hist,\n          \"hist_buckets\": hist_buckets,\n          \"percentiles\" : json.percentiles,\n          \"layerUrl\": truePath,\n          \"colorScale\": colorScale\n        }\n\n        console.log('Processed layer:', truePath)\n\n        callback();\n        \n      };\n\n      // FIXME(liautaud): Nested callbacks is a code smell.\n\n      var domain = helpers_f.range(256)\n      var range = []\n      if (Config.layers[path] && Config.layers[path].useColorScheme){\n        range = helpers_f.getColorsFromScheme(Config.layers[path].colorScheme)\n      }\n      else{\n        var domain_range = helpers_f.computeColorRange(json.percentiles,Config.layers[path].colors)\n        var domain_continuous = domain_range[0]\n        var range_continuous = domain_range[1]\n        const colorScale = d3.scale.linear()\n          .range(range_continuous).domain(domain_continuous)\n\n        for (var i=0; i<256; ++i){\n          var color = d3.rgb(colorScale(i))\n          range.push(\"rgb(\"+color.r+\",\"+color.g+\",\"+color.b+\")\")\n        }\n      }\n\n      var worker = new Worker(\"assets/pictureProcessor.js\");\n      worker.onmessage = onWorkEnded;\n      var canvasData = tempContext.getImageData(0, 0, canvas.width, canvas.height);\n      worker.postMessage({\n        canvasData: canvasData,\n        pixels: pixels,\n        length: canvas.height * canvas.width,\n        width: canvas.width,\n        height: canvas.height,\n        voronoiContainmentData: shared.voronoiContainment.data,\n        interCommContainmentData: shared.interCommContainment.data,\n        numVoronois: voronoi_shape.features.length,\n        numInterComms: interComm_shape.features.length,\n        tl_lat: json.tl_lat,\n        tl_lng: json.tl_lng,\n        br_lat: json.br_lat,\n        br_lng: json.br_lng,\n        colorDomain: domain,\n        colorRange: range\n      });\n    })\n\n  // TODO(liautaud): Return a Promise.\n}\n\n\n/**\n * Changes the current layer to the one with a given path.\n */\nfunction setLayer(layerPath, isFuture) {\n  var update_parameters = shared.update_parameters\n  var imgs = shared.imgs\n\n  if (!layerPath) {\n    update_parameters.hide = true\n    update_f.updateMap()\n    return;\n  }\n\n  let truePath = layerPath\n  if (isFuture) {\n    truePath = Config.layers[layerPath].future\n  }\n\n  this.loadLayer(layerPath, isFuture, () => {\n\n  if (layerPath == Config.EV_path){\n      imgs.attr(\"clip-path\", \"\")\n    }\n    else{\n      imgs.attr(\"clip-path\", \"url(#clip)\")\n    }\n\n    // Once the layer is loaded, we can get it from the cache.\n    const layer = shared.cachedLayers[truePath]\n\n    update_parameters.tl = new L.LatLng(layer.tl_lat, layer.tl_lng)\n    update_parameters.br = new L.LatLng(layer.br_lat, layer.br_lng)\n    update_parameters.currentGeoLat = shared.currentGeoLat\n    update_parameters.currentGaoLng = shared.currentGeoLng\n\n    var min = 0\n    var max = 255\n\n    var domain = []\n    var range = []\n    if (Config.layers[layerPath].useColorScheme){\n      domain = helpers_f.range(256)\n      range = helpers_f.getColorsFromScheme(Config.layers[layerPath].colorScheme,Config.layers[layerPath].invertColorScheme)\n    }\n    else{\n      var domain_range =helpers_f.computeColorRange(layer.percentiles,Config.layers[layerPath].colors)\n      domain = domain_range[0]\n      range = domain_range[1]\n    }\n\n\n    \n\n    const colorScale = layer.colorScale\n    shared.voronoi.style('fill', function(_, i){\n      if (layerPath == Config.EV_path){\n        return \"#00000011\" //transparent\n      }\n      return colorScale(layer.voronoi_means[i])})\n\n    min = 0//Math.min(...layer.interComm_means)\n    max = 255//Math.max(...layer.interComm_means)\n      \n\n\n    // Reset the width and height of the canvas.\n    shared.canvas.width = layer.width\n    shared.canvas.height = layer.height\n\n    // Update the bounding box and current coordinates.\n    update_parameters.hide = false\n\n    update_f.updateMap()\n\n    shared.interComms.style('fill', function(_, i){\n      if (shared.highlightedInterComm != -1) { // i.e. we are zoomed in\n        if (i != shared.highlightedInterComm) {\n            return \"#000\"\n          \n        } else {\n          //should never happen\n        }\n      } else { // we are not zoomed in\n        if (!Config.layers[layerPath].useColorScheme){\n          return \"#00000011\"\n        }\n        return colorScale(layer.interComm_means[i])\n      }\n    })\n\n    shared.currentLayerPath = layerPath\n    imgs.attr('xlink:href', layer.url)\n\n    d3.select(shared.legend_element).style(\"display\",\"none\")\n\n    if (layerPath != Config.EV_path){\n      d3.select(shared.legend_element).style(\"display\",\"block\")\n      helpers_f.fillScale(shared.color_legend_canvas,shared.color_legend_svg,colorScale,Config.layers[layerPath].min_value,Config.layers[layerPath].max_value,Config.layers[layerPath].invertColorScheme)\n    }\n  })\n\n  shared.isFuture = isFuture\n\n  update_f.updateCirclePreviewLayer()\n\n  update_f.update_chart(shared.currentLayerPath)\n  update_f.update_text_school(shared.currentLayerPath)\n\n  update_f.update_EV_preview(shared.lastMousePosition.x,shared.lastMousePosition.y)\n}\n\nfunction setEVLayer(path){\n  shared.imgs_EV.attr(\"xlink:href\", shared.cachedLayers[Config.EV_path].url)\n}\n\nexport default {loadLayer,setLayer,setEVLayer}","var Config = require('./config.json')\nimport helpers_f from './helpers.js'\nimport shared from './shared.js'\nimport update_f from'./update.js'\n\n/**\n * returns a function that, gived data p and voronoi index j, returns one if and only if the voronoi j is inside the interComm interCommIndex\n */\nfunction oneIfInInterComm(interCommIndex) {\n  function oneIfInInterComm_(p, j) {\n    if (shared.firstVoronoiByInterComm[interCommIndex] <= j && (interCommIndex == shared.interComm_shape.features.length - 1 || shared.firstVoronoiByInterComm[interCommIndex + 1] > j)) {\n      return 1\n    } else {\n      return 0\n    }\n  }\n  return oneIfInInterComm_\n}\n\n/**\n * Defines the voronoi entity. Given an svg container (and some opacity parameters), will return a d3.selectAll(\"path\") element defining the inner areas (i.e. voronois)\n */\nfunction defineVoronoi(svg){\n  return svg.append(\"g\").selectAll(\"path\")\n    .data(shared.voronoi_shape.features)\n    .enter().append('path')\n    .attr('d', shared.pathGenerator)\n    .attr('vector-effect', 'non-scaling-stroke')\n    .style('stroke', \"#666\")\n    .style(\"fill-opacity\", 0)\n    .style(\"stroke-opacity\", 0)\n    .on(\"mouseover\", function(d, i) { \n      // when the mouse hovers it, it should show the data behind, and become transparent\n      d3.select(this).style('fill-opacity', 0);\n\n      //update the data clip to show the layer inside this voronoi\n      shared.defs_path.datum(d.geometry)\n      update_f.update_clip()\n\n      //additionally, update the right elements according to current voronoi\n      shared.currentChartIndex = i\n      shared.currentChartIndexIsVoronoi = true\n      update_f.update_chart(shared.currentLayerPath)\n      update_f.update_text_school(shared.currentLayerPath)\n\n      if (shared.highlightedInterComm != -1){\n        shared.onNewName(shared.interComm_shape.features[shared.highlightedInterComm].properties.nomgroup)\n      }\n    })\n    .on(\"mouseout\", function(d, i) {\n      //when the mouse goes out of this area, we should revert changes\n      if (shared.highlightedInterComm != -1) {\n        //if we are inside an interComm, fill again voronois inside the current interComm\n        d3.select(this).style('fill-opacity', oneIfInInterComm(shared.highlightedInterComm)(d, i));\n        d3.select(this).style('stroke-opacity', oneIfInInterComm(shared.highlightedInterComm)(d, i));\n      }\n\n      //revert clip for this area\n      shared.defs_path.datum([])\n      update_f.update_clip()\n      shared.svg_EV.style(\"display\",\"none\")\n      shared.svg_circle_EV.style(\"display\",\"none\")\n\n      shared.currentChartIndex = -1 // none selected, display data about entire Paris\n      update_f.update_chart(shared.currentLayerPath)\n      update_f.update_text_school(shared.currentLayerPath)\n\n      shared.lastMousePosition={x:-300,y:-300}\n    })\n    .on(\"dblclick\", function() {\n      update_f.deselectInterComm()\n\n      shared.map.fitBounds(shared.initialBounds) // zoom back to paris\n\n      shared.defs_path.datum([])\n      update_f.update_clip()\n    })\n    .on(\"mousemove\",function(){\n      if (d3.event && d3.event.clientX && d3.event.clientY && shared.currentLayerPath != Config.EV_path){\n        shared.lastMousePosition={x:d3.event.clientX,y:d3.event.clientY - shared.mapElement.getBoundingClientRect().top}\n        update_f.update_EV_preview(shared.lastMousePosition.x,shared.lastMousePosition.y)\n      }\n      else{\n        shared.svg_EV.style(\"display\",\"none\")\n        shared.svg_circle_EV.style(\"display\",\"none\")\n      }\n    })\n    .on(\"mousedown\",function(){\n      if (d3.event && d3.event.clientX && d3.event.clientY && shared.currentLayerPath != Config.EV_path){\n        shared.lastMouseDownX = d3.event.clientX\n        shared.lastMouseDownY = d3.event.clientY - shared.mapElement.getBoundingClientRect().top\n      }\n    });\n}\n\n/**\n * Defines the voronoi entity. Given an svg container (and some opacity parameters), will return a d3.selectAll(\"path\") element defining the inner areas (i.e. voronois)\n */\nfunction defineInterComms(svg,fadedOpacity){\n  return svg.append(\"g\").selectAll(\"path\")\n    .data(shared.interComm_shape.features)\n    .enter().append('path')\n    .attr('d', shared.path)\n    .attr('vector-effect', 'non-scaling-stroke')\n    .style('stroke', \"#333\")\n    .attr(\"fill\", \"#fff\")\n    .attr(\"fill-opacity\", 1)\n    .style(\"pointer-events\", \"all\")\n    .on(\"mouseover\", function(d, i) {\n      if (shared.highlightedInterComm != -1) { // i.e. we are zoomed in\n        if (i != shared.highlightedInterComm) {\n          if (!Config.layers[shared.currentLayerPath].useColorScheme){\n            d3.select(this).style(\"fill\",\"#00000011\")\n          }\n          else{\n            d3.select(this).style(\"fill\",shared.cachedLayers[shared.currentLayerPath].colorScale(shared.cachedLayers[shared.currentLayerPath].interComm_means[i]))\n          }\n          \n          d3.select(this).style('fill-opacity', 1);\n        } else {\n          //should never happen\n        }\n      } else { // we are zoomed in a particular interComm\n        d3.select(this).style('fill-opacity', fadedOpacity);\n      }\n      shared.currentChartIndex = i\n      shared.currentChartIndexIsVoronoi = false\n      update_f.update_chart(shared.currentLayerPath)\n      update_f.update_text_school(shared.currentLayerPath)\n\n      //console.log(shared.interComm_shape.features[i].properties.nomgroup)\n      shared.onNewName(shared.interComm_shape.features[i].properties.nomgroup)\n    })\n    .on(\"mouseout\", function(d, i) {\n      if (shared.highlightedInterComm != -1) { // i.e. we are not zoomed in\n        if (i != shared.highlightedInterComm) {\n          d3.select(this).style(\"fill\",\"#000\")\n          d3.select(this).style('fill-opacity', fadedOpacity);\n        } else {\n          //should never happen\n        }\n      } else { // we are zoomed in a particular interComm\n        d3.select(this).style('fill-opacity', 1);\n      }\n      shared.svg_EV.style(\"display\",\"none\")\n      shared.svg_circle_EV.style(\"display\",\"none\")\n\n      shared.currentChartIndex = -1 // none selected, display data about entire Paris\n      update_f.update_chart(shared.currentLayerPath)\n      update_f.update_text_school(shared.currentLayerPath)\n      \n      shared.lastMousePosition={x:-300,y:-300} //be sure not to display the preview circle!\n      shared.onNewName('')\n    })\n    .on(\"click\", function(d, i) {\n      if (!d3.event || !d3.event.clientX || !d3.event.clientY ||\n          Math.abs(d3.event.clientX - shared.lastMouseDownX) >= 5 || Math.abs(d3.event.clientY  - shared.mapElement.getBoundingClientRect().top - shared.lastMouseDownY) >= 5){\n        return\n      }\n      shared.interComms.style(\"pointer-events\", \"all\") // now we can click/hover on every department\n      d3.select(this).style(\"pointer-events\", \"none\") // except the current one!\n\n      shared.interComms.style(\"fill\",\"#000\")\n      shared.interComms.style('fill-opacity', fadedOpacity);\n      d3.select(this).style('fill-opacity', 0);\n      shared.highlightedInterComm = i\n\n\n      shared.voronoi.style(\"fill-opacity\", oneIfInInterComm(i))\n      shared.voronoi.style(\"stroke-opacity\", oneIfInInterComm(i))\n\n      var BBox = d3.select(this).node().getBBox()\n      var neBound = shared.map.layerPointToLatLng(L.point(BBox.x, BBox.y))\n      var swBound = shared.map.layerPointToLatLng(L.point(BBox.x + BBox.width, BBox.y + BBox.height))\n      shared.map.fitBounds(L.latLngBounds(neBound, swBound)) // zoom to department\n      shared.svg_EV.attr(\"style\",\"display:none;\")\n      shared.svg_circle_EV.attr(\"style\",\"display:none;\")\n    })\n    .on(\"mousemove\",function(){\n      if (d3.event && d3.event.clientX && d3.event.clientY && shared.currentLayerPath != Config.EV_path){\n        shared.lastMousePosition={x:d3.event.clientX,y:d3.event.clientY - shared.mapElement.getBoundingClientRect().top}\n        update_f.update_EV_preview(shared.lastMousePosition.x,shared.lastMousePosition.y)\n      }\n      else{\n        shared.svg_EV.style(\"display\",\"none\")\n        shared.svg_circle_EV.style(\"display\",\"none\")\n      }\n    })\n    .on(\"mousedown\",function(){\n      if (d3.event && d3.event.clientX && d3.event.clientY){\n        //console.log(d3.event)\n        shared.lastMouseDownX = d3.event.clientX\n        shared.lastMouseDownY = d3.event.clientY - shared.mapElement.getBoundingClientRect().top\n      }\n    });\n}\n\nexport default {defineVoronoi,defineInterComms}","import Config from './config.json'\n\nimport helpers_f from './helpers.js'\nimport update_f from './update.js'\nimport layers_f from './layers.js'\nimport shapes_f from './shapes.js'\nimport shared from './shared.js'\n\nexport default function(element, EV_svg_element, EV_circle_svg_element, legend_element, error, interComm_shape, voronoi_shape, interCommContainment, voronoiContainment, onHistChange, onSchools, onNewName) {\n  shared.interComm_shape = interComm_shape\n  shared.voronoi_shape = voronoi_shape\n  shared.onHistChange = onHistChange\n  shared.onSchools = onSchools\n  shared.onNewName = onNewName\n  shared.legend_element = legend_element\n  shared.interCommContainment = interCommContainment\n  shared.voronoiContainment = voronoiContainment\n  shared.mapElement = element\n\n  document.body.addEventListener(\"keypress\",helpers_f.handleKeyEvent)\n\n  const default_tl = new L.LatLng(\n    Config.viewport.topLatitude,\n    Config.viewport.leftLongitude\n  )\n  const default_br = new L.LatLng(\n    Config.viewport.bottomLatitude,\n    Config.viewport.rightLongitude\n  )\n  shared.initialBounds = L.latLngBounds(default_tl, default_br)\n\n  d3.select(legend_element).style(\"display\",\"none\")\n  shared.color_legend_canvas = d3.select(legend_element)\n    .append(\"canvas\")\n\n  shared.color_legend_svg = d3.select(legend_element)\n    .append(\"svg\")\n  shared.color_legend_svg.append(\"g\")\n\n\n  /**\n   * Sets the position of the geolocation marker to the current position\n   * of the user (computed using the Geolocation API).\n   */\n  function setLocationFromCurrent() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(pos => {\n        helpers_f.setLocation(pos.coords.latitude, pos.coords.longitude)\n      })\n    }\n  }\n\n  setLocationFromCurrent()\n\n  helpers_f.createMap(element) //TODO: if the window is small, the zoom is too far (> 14) and the map is grey, untill we zoom in\n\n  L.geoJson(interComm_shape, {\n    style: helpers_f.blankStyle\n  }).addTo(shared.map); //needed! otherwise a svg isn't generated, we use this one for practical purposes\n\n  var svg = d3.select(element).select(\".leaflet-zoom-animated\")\n\n  function projectPoint(x, y) {\n    var point = shared.map.latLngToLayerPoint(new L.LatLng(y, x));\n    this.stream.point(point.x, point.y);\n  }\n  var transform = d3.geo.transform({\n    point: projectPoint\n  });\n  shared.pathGenerator = d3.geo.path()\n    .projection(transform);\n\n  var defs = svg.append(\"defs\");\n  shared.defs_path = defs.append(\"path\")\n    .attr(\"id\", \"clip_path\")\n\n  defs.append(\"clipPath\")\n    .attr(\"id\", \"clip\")\n    .append(\"use\")\n    .attr(\"xlink:href\", \"#clip_path\");\n\n  shared.imgs = svg.selectAll(\"image\").data([0])\n    .enter()\n    .append(\"svg:image\")\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr(\"xlink:href\", \"\")\n    .attr(\"clip-path\", \"\")\n    .attr(\"preserveAspectRatio\",\"none\")\n    .style(\"object-fit\",\"cover\")\n\n  update_f.update_clip()\n\n\n  var fadedOpacity = 0.4\n  var semiFullOpacity = 0.7\n\n  shared.svg_EV = d3.select(EV_svg_element)\n    .attr(\"style\",\"display:none;\")\n\n  shared.svg_circle_EV = d3.select(EV_circle_svg_element)\n    .attr(\"style\",\"display:none;\")\n\n  shared.imgs_EV = shared.svg_EV.selectAll(\"image\").data([0])\n    .enter()\n    .append(\"svg:image\")\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr(\"xlink:href\", \"\")\n    .attr(\"preserveAspectRatio\",\"none\")\n    .style(\"object-fit\",\"cover\")\n\n  var shape_EV = shared.svg_EV.append(\"g\")\n  shape_EV\n    .selectAll(\"path\")\n    .data([interComm_shape.features[0]])\n    .enter().append('path')\n    .attr('vector-effect', 'non-scaling-stroke')\n    .style('stroke', \"#000\")\n    .style(\"fill-opacity\", 0)\n    .style(\"stroke-opacity\", 1)\n\n\n  shared.voronoi = shapes_f.defineVoronoi(svg)\n\n  shared.interComms = shapes_f.defineInterComms(svg,fadedOpacity)\n\n  shared.markerIcon = {\n    iconUrl: 'assets/marker.png',\n    iconSize: [24, 24],\n    iconAnchor: [12, 24]\n  }\n\n  shared.markerElement = svg.append(\"g\").selectAll(\"image\").data([0])\n    .enter()\n    .append(\"svg:image\")\n    .attr(\"xlink:href\", shared.markerIcon.iconUrl)\n    .attr(\"width\", shared.markerIcon.iconSize[0])\n    .attr(\"height\", shared.markerIcon.iconSize[1])\n    .attr('visibility', 'hidden')\n    .style(\"pointer-events\", \"none\")\n\n  shared.canvas = document.createElement(\"canvas\")\n\n  shared.update_parameters = {\n    hide: true,\n  };\n\n  shared.map.on('viewreset', function(){update_f.updateMap()})\n\n  const zoomOut = shared.map.zoomOut.bind(shared.map)\n  const zoomIn = shared.map.zoomIn.bind(shared.map)\n\n  return [layers_f.loadLayer, layers_f.setLayer, helpers_f.setLocation, layers_f.setEVLayer, zoomOut, zoomIn]\n}","<template>\n  <div class=\"map-container\">\n    <section ref=\"map\" class=\"map\"></section>\n\n    <svg ref=\"circle_svg\" class=\"EV-circle-svg\"></svg> \n    <svg ref=\"svg\" class=\"EV-svg\"></svg>\n\n    <section class=\"year\" v-if=\"hasFutureAvailable && !isFuture\">\n      <p>2012</p>\n      <a href=\"#\" @click.prevent=\"() => $emit('toggleFuture')\"\n        v-bind:style=\"{'color': futureColor}\">\n        <i class=\"fas fa-fast-forward\"></i>\n      </a>\n    </section>\n    <section class=\"year\" v-else-if=\"hasFutureAvailable\">\n      <p>2030</p>\n      <a href=\"#\" @click.prevent=\"() => $emit('toggleFuture')\"\n        v-bind:style=\"{'color': presentColor}\">\n        <i class=\"fas fa-fast-backward\"></i>\n      </a>\n    </section>\n\n    <section class=\"legend\">\n      <div ref=\"legend\" class=\"legend-inner\"></div>\n\n      <section v-if=\"isEspacesVerts\">\n        <h3>{{ $t('legend.natural-spaces') }}</h3>\n\n        <figure>\n          <div class=\"item\" :style=\"{backgroundColor: forestColor}\"></div>\n          <figcaption v-html=\"$t('legend.wood')\"></figcaption>\n        </figure>\n        <figure>\n          <div class=\"item\" :style=\"{backgroundColor: waterColor}\"></div>\n          <figcaption v-html=\"$t('legend.water')\"></figcaption>\n        </figure>\n        <figure>\n          <div class=\"item\" :style=\"{backgroundColor: greenColor}\"></div>\n          <figcaption v-html=\"$t('legend.leisure')\"></figcaption>\n        </figure>\n      </section>\n\n      <section v-else-if=\"currentUnit\">\n        <p>({{ currentUnit }})</p>\n      </section>\n    </section>\n  </div>\n</template>\n\n<script>\nimport Config from '../config.json'\nimport displayMap from '../map'\nimport helpers_f from '../helpers.js'\n\nexport default {\n  props: ['layers', 'currentLayerPath', 'currentLocation', 'currentZoom', 'isFuture'],\n  data: () => ({\n    loadLayer: () => {},\n    setLayer: () => {},\n    setLocation: () => {},\n    setEVLayer: () => {},\n    zoomMinus: () => {},\n    zoomPlus: () => {},\n  }),\n\n  computed: {\n    isEspacesVerts() {\n      return this.currentLayerPath == Config.EV_path\n    },\n    \n    currentLayerId() {\n      return Config.layers[this.currentLayerPath].id\n    },\n\n    currentUnit() {\n      if (this.currentLayerPath) {\n        return this.$t(`layers.${this.currentLayerId}.unit`)\n      }\n    },\n\n    forestColor() {\n      return Config.layers[Config.EV_path].colors[0]\n    },\n\n    waterColor() {\n      return Config.layers[Config.EV_path].colors[1]\n    },\n\n    greenColor() {\n      return Config.layers[Config.EV_path].colors[2]\n    },\n\n    futureColor() {\n      return Config.color_future\n    },\n\n    presentColor() {\n      return Config.color_present\n    },\n\n    currentYear() {\n      return new Date().getFullYear()\n    },\n\n    hasFutureAvailable() {\n      return !!Config.layers[this.currentLayerPath].future\n    }\n  },\n\n  /**\n   * Triggers when the component has been mounted.\n   * This is used to create the Leaflet map and bind the event handlers.\n   */\n  mounted () {\n    var urlInterComm = 'data/intercommunalites.geojson'\n    var urlVoronoi = 'data/voronois.json'\n    var urlInterCommContainment = 'data/intercomm_cont.json'\n    var urlVoronoiContainment = 'data/voronoi_cont.json'\n\n    queue()\n      .defer(d3.json, urlInterComm)\n      .defer(d3.json, urlVoronoi)\n      .await((e, d, v) => {\n        helpers_f.loadContainmentFile(urlVoronoiContainment).then(voronoiContainment => {\n          helpers_f.loadContainmentFile(urlInterCommContainment).then(interCommContainment => {\n            // FIXME(liautaud): Please, clean up this mess.\n            [this.loadLayer, this.setLayer, this.setLocation, this.setEVLayer, this.zoomMinus, this.zoomPlus] =\n              displayMap(\n                this.$refs.map,\n                this.$refs.svg,\n                this.$refs.circle_svg,\n                this.$refs.legend,\n                e, d, v, interCommContainment, voronoiContainment,\n                (x, y) => this.$emit('newHistogram', x, y),\n                n => this.$emit('newSchools', n),\n                n => this.$emit('newName',n)\n              )\n\n            Object.keys(Config.layers).forEach(layerPath => {\n              this.layers[layerPath].path=layerPath;\n\n              // Preload all the layers.\n              this.loadLayer(\n                layerPath,\n                false,\n                () => {\n                  this.layers[layerPath].loaded = true\n                  \n                  if (layerPath == Config.EV_path){\n                    //this.setEVLayer(layerPath)\n                  }          \n                }\n              )\n\n              // Also preload the future layers when applicable.\n              if (Config.layers[layerPath].future) {\n                console.log('Preloading future layer:', Config.layers[layerPath].future)\n                this.loadLayer(layerPath, true, () => {})\n              }\n            })\n\n            this.setLayer(this.currentLayerPath)\n          })\n        })\n      })\n  },\n\n  watch: {\n    /**\n     * Watches changes to the currentLayerPath prop, and updates the map.\n     */\n    currentLayerPath() {\n      this.setLayer(this.currentLayerPath, this.hasFutureAvailable && this.isFuture)\n    },\n\n    /**\n     * Watches changes to the isFuture prop, and updates the map.\n     */\n    isFuture() {\n      this.setLayer(this.currentLayerPath, this.hasFutureAvailable && this.isFuture)\n    },\n\n    /**\n     * Watches changes to the currentLocation prop, and updates the marker.\n     */\n    currentLocation([lat, lng]) {\n      this.setLocation(lat, lng)\n    },\n\n    /**\n     * Watches changes to the currentZoom prop, and updates the marker.\n     */\n    currentZoom(after, before) {\n      // FIXME(liautaud): This only takes +/-1 changes into account.\n      // It's a dirty hack anyway, we should hold the currentZoom instead.\n      if (after < before) {\n        this.zoomMinus()\n      } else {\n        this.zoomPlus()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.map-container {\n  flex-grow: 1;\n  position: relative;\n}\n\n.map {\n  width: 100%;\n  height: 100%;\n}\n\n.leaflet-overlay-pane {\n  mix-blend-mode: multiply;\n\n  image {\n    image-rendering: optimizespeed;\n  }\n}\n\n.leaflet-top, .leaflet-bottom {\n  z-index: 300 !important;\n}\n\n.EV-svg {\n  border-radius: 50%;\n  width: 120px;\n  height: 120px;\n  border: 3px solid;\n  border-color:#000;\n  box-shadow: 0 0 3px rgba(#000, .3);\n  position: absolute;\n  background: #fff;\n  display: flex;\n  pointer-events: none;\n  top: -120px;\n  margin-left: -20px;\n  margin-bottom: -20px;\n\n  image {\n    image-rendering: optimizespeed;\n  }\n}\n\n.EV-circle-svg {\n  border-radius: 50%;\n  width: 80px;\n  height: 80px;\n  border: 2px dashed;\n  border-color:rgba(#000,0.7);\n  position: absolute;\n  background: #fff0;\n  display: flex;\n  pointer-events: none;\n  top: -120px;\n}\n\n.year {\n  position: absolute;\n  top: 35px;\n  right: 25px;\n\n  box-shadow: 0 0 2px rgba(0, 0, 0, .3);\n  background: #fff;\n\n  display: flex;\n\n  p {\n    margin: 5px 20px;\n    color: #666;\n    font-size: 25pt;\n    font-family: 'IBM Plex Sans', sans-serif;\n  }\n\n  a {\n    display: flex;\n    align-items: center;\n    border-left: 1px solid #ddd;\n    font-size: 18pt;\n    outline: none;\n    text-decoration: none;\n    padding: 15px;\n    color: #444;\n  }\n}\n\n.legend {\n  position: absolute;\n  bottom: 40px;\n  right: 30px;\n  text-align: center;\n  padding: 5px 10px;\n\n  box-shadow: 0 0 2px rgba(0, 0, 0, .3);\n  background: #fff;\n\n  h3 {\n    text-transform: uppercase;\n    margin: 5px;\n  }\n\n  p, figcaption {\n    font-size: .6em;\n    font-style: italic;\n    margin: 0 auto;\n  }\n\n  figure {\n    margin: 15px 10px;\n  }\n\n  .item {\n    width: 70px;\n    height: 28px;\n    border: 1px solid #000;\n    margin: 5px auto;\n  }\n}\n\n.legend-inner {\n  height: 200px;\n  width: 70px;\n  margin: 0 auto 10px;\n  position: relative;\n}\n\n.legend-inner canvas {\n  box-sizing: border-box;\n  border: 1px solid #000;\n  border-right: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=3cee02f9&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Map.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"sidebar\"},[(!_vm.isEspacesVerts && _vm.currentLayerPath && _vm.layers[_vm.currentLayerPath].loaded)?[_c('article',[_c('h2',[_vm._v(_vm._s(_vm.$t((\"layers.\" + _vm.currentLayerId + \".title\"))))]),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.$t((\"layers.\" + _vm.currentLayerId + \".content\")))}})]),_c('article',{staticClass:\"contextual-info\"},[(_vm.interCommName)?_c('h4',[_vm._v(\"\\n        \"+_vm._s(_vm.interCommName)+\"\\n      \")]):_c('h4',[_vm._v(\"\\n        \"+_vm._s(_vm.$t('sidebar.whole-region'))+\"\\n      \")]),(_vm.interCommName && _vm.schoolCount)?_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('sidebar.child-count', {count: _vm.schoolCount}))}}):_vm._e(),_c('Histogram',{attrs:{\"x\":_vm.currentHistogramX,\"y\":_vm.currentHistogramY,\"currentLayerPath\":_vm.currentLayerPath}})],1)]:[_c('article',[_c('h2',[_vm._v(_vm._s(_vm.$t('intro.title')))]),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('intro.about'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('intro.start'))}}),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('intro.future'))}})]),_c('article',{staticClass:\"about\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('intro.credits'))}}),_vm._m(0)])]],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"slideshow\"},[_c('a',{attrs:{\"href\":\"https://www.epfl.ch/\"}},[_c('img',{attrs:{\"src\":\"assets/epfl.png\",\"alt\":\"Logo EPFL\"}})]),_c('a',{attrs:{\"href\":\"https://naturalcapitalproject.stanford.edu/\"}},[_c('img',{attrs:{\"src\":\"assets/natcap.jpg\",\"alt\":\"Logo NatCap\"}})])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"histogram\"},[_c('svg',{ref:\"svg\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"histogram\">\n    <svg ref=\"svg\"></svg>\n  </section>\n</template>\n\n<script>\nimport Config from '../config.json'\nimport helpers from '../helpers.js'\n\nexport default {\n  props: ['x', 'y', 'currentLayerPath'],\n  data: () => ({\n    updateChart: data => {},\n  }),\n  \n  mounted() {\n    // Define the dimensions of the histogram.\n    const margin = {top: 5, right: 10, bottom: 45, left: 65}\n    const width = 380\n    const height = 250\n    const innerWidth = width - margin.left - margin.right \n    const innerHeight = height - margin.top - margin.bottom\n\n    // Define the X and Y scales.\n    const x = d3.scaleLinear().rangeRound([0, innerWidth])\n    const y = d3.scaleLinear().rangeRound([innerHeight, 0])\n\n    // Prepare the SVG element.\n    const svg = d3.select(this.$refs.svg)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\")\n        .attr(\"transform\", `translate(${margin.left}, ${margin.top})`)\n\n    // Add the two axes.\n    const xAxis = svg.append(\"g\")\n      .attr(\"transform\", `translate(0, ${innerHeight})`)\n    const yAxis = svg.append(\"g\")\n\n    // Add the legend.\n    const yLegend = svg.append(\"text\")\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"x\", 0 - (innerHeight / 2))\n      .attr(\"y\", 0 - margin.left)\n      .attr(\"dy\", \"1em\")\n      .style(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"9pt\")\n      .style(\"font-style\", \"italic\")\n      .text(this.$t('sidebar.number-points'))\n\n    const xLegend = svg.append(\"text\")             \n        .attr(\"transform\", `translate(${innerWidth / 2} , ${height - 10})`)\n        .style(\"text-anchor\", \"middle\")\n        .style(\"font-size\", \"9pt\")\n        .style(\"font-style\", \"italic\")\n\n    /**\n     * Updates the histogram using new data for the bars.\n     */\n    this.updateChart = (xData, yData) => {\n      const data = xData.map((x, i) => ({x, y: yData[i]}))\n      \n      // Define a \"layer scale\", which maps values on the X axis\n      // to the real values according to the current layer's scale.\n      const currentLayer = Config.layers[this.currentLayerPath]\n      const layerScale = d3.scaleLinear()\n        .domain([0, 255])\n        .range([currentLayer.min_value, currentLayer.max_value])\n\n      // Also define a \"color scale\", so that the bars in the\n      // histogram can have the same color as in the legend.\n      const colorScale = d3.scale.linear()\n        .range(helpers.getColorsFromScheme(currentLayer.colorScheme))\n        .domain(xData)\n\n      // Update the legend text.\n      xLegend.text(this.$t(`layers.${this.currentLayerId}.hist_legend`))\n\n      // Find the x and y minimums and maximums.\n      const nonZero = xData.filter(x => yData[x] > 0)\n      const xMin = nonZero[0]\n      const xMax = nonZero.slice(-1)[0]\n      const yMax = d3.max(yData)\n\n      // Apply the domains to the scales.\n      const xs = x.domain([xMin, xMax])\n      const ys = y.domain([0, yMax])\n\n      // Update the axes.\n      yAxis.call(d3.axisLeft(ys))\n      xAxis.call(\n        d3.axisBottom(xs)\n          .ticks(5)\n          .tickFormat(t => layerScale(t).toPrecision(3))\n          .tickPadding(6)\n      )\n\n      // Update the bars.\n      const bars = svg.selectAll(\"rect\")\n        .data(data, d => d.x)\n      bars\n        .enter()\n          .append(\"rect\")\n          .attr(\"class\", \"bar\")\n          .attr(\"x\", 1)\n        .merge(bars)\n          .attr(\"transform\", d => `translate(${xs(d.x)}, ${ys(d.y)})`)\n          .attr(\"width\", d => Math.ceil(innerWidth / (xMax - xMin)) + 1)\n          .attr(\"height\", d => innerHeight - ys(d.y))\n          .attr(\"fill\", d => colorScale(d.x))\n        .exit()\n          .remove()\n    }\n\n    this.updateChart(this.x, this.y)\n  },\n\n  watch: {\n    /**\n     * Watches changes to the x prop, and updates the histogram.\n     */\n    x() {\n      this.updateChart(this.x, this.y)\n    }\n  },\n\n  computed: {\n    currentLayerId() {\n      return Config.layers[this.currentLayerPath].id\n    }\n  }\n}\n</script>\n\n<style>\n.histogram {\n  margin-left: -10px;\n  margin-right: -10px;\n}\n\n.histogram svg {\n  display: block;\n  margin: 0 auto;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Histogram.vue?vue&type=template&id=ae748e2e&\"\nimport script from \"./Histogram.vue?vue&type=script&lang=js&\"\nexport * from \"./Histogram.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Histogram.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Histogram.vue\"\nexport default component.exports","<template>\n  <section class=\"sidebar\">\n    <template v-if=\"!isEspacesVerts && currentLayerPath && layers[currentLayerPath].loaded\">\n      <article>\n        <h2>{{ $t(`layers.${currentLayerId}.title`) }}</h2>\n        <div v-html=\"$t(`layers.${currentLayerId}.content`)\"></div>\n      </article>\n\n      <article class=\"contextual-info\">\n        <h4 v-if=\"interCommName\">\n          {{interCommName}}\n        </h4>\n\n        <h4 v-else>\n          {{ $t('sidebar.whole-region') }}\n        </h4>\n\n        <p\n          v-if=\"interCommName && schoolCount\" \n          v-html=\"$t('sidebar.child-count', {count: schoolCount})\">\n        </p>\n\n        <Histogram\n          :x=\"currentHistogramX\"\n          :y=\"currentHistogramY\"\n          :currentLayerPath=\"currentLayerPath\" />\n      </article>\n    </template>\n\n    <template v-else>\n      <article>\n        <h2>{{ $t('intro.title') }}</h2>\n        <p v-html=\"$t('intro.about')\"></p>\n        <p v-html=\"$t('intro.start')\"></p>\n        <p v-html=\"$t('intro.future')\"></p>\n      </article>\n\n      <article class=\"about\">\n        <p v-html=\"$t('intro.credits')\"></p>\n\n        <section class=\"slideshow\">\n          <a href=\"https://www.epfl.ch/\">\n            <img src=\"assets/epfl.png\" alt=\"Logo EPFL\">\n          </a>\n          <a href=\"https://naturalcapitalproject.stanford.edu/\">\n            <img src=\"assets/natcap.jpg\" alt=\"Logo NatCap\">\n          </a>\n        </section>\n      </article>\n    </template>\n  </section>\n</template>\n\n<script>\nimport Config from '../config.json'\nimport Histogram from './Histogram.vue'\n\nexport default {\n  props: ['layers', 'currentLayerPath', 'currentHistogramX', 'currentHistogramY', 'schoolCount', 'interCommName'],\n  components: { Histogram },\n  computed: {\n    isEspacesVerts() {\n      return this.currentLayerPath == Config.EV_path;\n    },\n\n    currentLayerId() {\n      return Config.layers[this.currentLayerPath].id\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\n.sidebar {\n  z-index: 500;\n  width: 460px;\n  max-width: 30%;\n  box-sizing: border-box;\n  padding: 35px;\n  font-size: 0.94em;\n\n  background: #fff;\n  box-shadow: 0 0 2px rgba(0, 0, 0, .3);\n  overflow: auto;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.sidebar .contextual-info {\n  position: relative;\n  padding: 10px 0 0;\n\n  &::before {\n    content: '';\n    position: absolute;\n    display: block;\n    border-top: 1px solid #e9e9e9;\n    left: -35px;\n    right: -35px;\n    top: 0;\n  }\n\n  h4 {\n    font-size: .9em;\n    font-variant-caps: small-caps;\n  }\n}\n\n.sidebar p {\n  margin: 30px 0;\n}\n\n.sidebar ul {\n  margin-bottom: 30px;\n}\n\n.sidebar h2 {\n  margin-top: 0;\n  letter-spacing: -1px;\n  font-size: 1.25em;\n}\n\n.sidebar .about {\n  font-style: italic;\n}\n\n.sidebar .slideshow {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  margin: 40px 0 20px;\n\n  a {\n    height: 90px;\n  }\n\n  img {\n    height: 100%;\n  }\n}\n\n.sidebar .button {\n  margin: 5px 0 10px;\n  font-size: 0.85em;\n  display: inline-block;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sidebar.vue?vue&type=template&id=4301fe4f&\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Sidebar.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Sidebar.vue\"\nexport default component.exports","<template>\n  <div id=\"app\" :class=\"[`tutorial-${currentTutorialStep}`]\">\n    \n    <transition name=\"fade\">\n      <Intro\n        v-if=\"introVisible\"\n        :isLoading=\"!currentLayerLoaded\"\n        @dismiss=\"() => introVisible = false\" />\n    </transition>\n\n    <About v-if=\"aboutVisible\" @dismiss=\"() => aboutVisible = false\" />\n\n    <section class=\"horizontal-split\">\n      <Tutorial\n        v-model=\"currentTutorialStep\"\n        ref=\"tutorial\"\n        :currentLayerPath=\"currentLayerPath\"\n        @layerChange=\"path => {this.currentLayerPath = '';this.currentLayerPath = path}\" />\n\n      <section class=\"vertical-split\">\n        <section class=\"menu\">\n          <LocationControl\n            :onLocation=\"loc => this.currentLocation = loc\" />\n          <Layers\n            :layers=\"layers\"\n            v-model=\"currentLayerPath\"\n            @checkTutorial=\"()=>{this.$refs.tutorial.checkIfNext()}\" />\n          <ZoomControl\n            @zoomOut=\"() => currentZoom -= 1\"\n            @zoomIn=\"() => currentZoom += 1\" />\n\n          <a href=\"#\" class=\"about-button\"\n            @click.prevent=\"() => aboutVisible = true\">{{ $t('titles.credits') }}</a>\n        </section>\n\n        <Map\n          :layers=\"layers\"\n          :currentLayerPath=\"currentLayerPath\"\n          :currentLocation=\"currentLocation\"\n          :currentZoom=\"currentZoom\"\n          :isFuture=\"isFuture\"\n          @toggleFuture=\"() => isFuture ^= true\"\n          @newHistogram=\"(x, y) => {this.currentHistogramX = x; this.currentHistogramY = y;}\" \n          @newSchools=\"n => this.schoolCount = n\" \n          @newName=\"n => this.interCommName = n\" />\n        <Sidebar\n          :layers=\"layers\"\n          :currentLayerPath=\"currentLayerPath\"\n          :currentHistogramX=\"currentHistogramX\"\n          :currentHistogramY=\"currentHistogramY\"\n          :schoolCount=\"schoolCount\"\n          :interCommName=\"interCommName\" />\n      </section>\n    </section>\n  </div>\n</template>\n\n<script>\nimport Config from './config.json'\n\nimport Intro from './components/Intro.vue'\nimport Tutorial from './components/Tutorial.vue'\nimport About from './components/About.vue'\nimport ZoomControl from './components/ZoomControl.vue'\nimport LocationControl from './components/LocationControl.vue'\nimport Layers from './components/Layers.vue'\nimport Map from './components/Map.vue'\nimport Sidebar from './components/Sidebar.vue'\n\n/** The layer that should first be loaded. */\nconst defaultLayerPath = Config.EV_path\n\nexport default {\n  components: { Intro, Tutorial, About, ZoomControl, LocationControl, Layers, Map, Sidebar },\n\n  data: () => ({\n    layers: Object.keys(Config.layers).reduce((m, layerPath) => {\n      m[layerPath] = Config.layers[layerPath]\n      m[layerPath].loaded = false\n      m[layerPath].path = layerPath\n      return m\n    }, {}),\n\n    isFuture: false,\n    currentLayerPath: defaultLayerPath,\n\n    currentZoom: 0,\n    currentLocation: null,\n    currentHistogramX: null,\n    currentHistogramY: null,\n\n    introVisible: true,\n    sidebarVisible: false,\n    aboutVisible: false,\n\n    currentTutorialStep: 1,\n\n    interCommName: \"\",\n    schoolCount: null,\n  }),\n\n  computed: {\n    currentLayerLoaded() {\n      return this.layers[this.currentLayerPath].loaded\n    }\n  },\n\n  methods: {\n    logKey(e) {\n      console.log(e)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" type=\"text/scss\">\nhtml, body {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  font-size: 15pt;\n}\n\n#app {\n  width: 100%;\n  height: 100%;\n  font-family: 'IBM Plex Sans', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\nh2 {\n  font-size: 1.2rem;\n}\n\nh3 {\n  color: #666;\n  font-size: 11pt;\n  font-weight: normal;\n  text-align: center;\n}\n\nh4 {\n  color: #666;\n  font-size: 16pt;\n  font-weight: normal;\n  text-align: center;\n}\n\np, ul {\n  font-family: 'Crimson Text', serif;\n}\n\n.button {\n  text-decoration: none;\n  margin: 1.2rem;\n  font-size: 14pt;\n  padding: 9px 13px;\n  border: 1px solid #fff;\n  color: #fff;\n  text-transform: uppercase;\n  font-weight: 300;\n  transition: padding .2s;\n  position: relative;\n  outline: none;\n  text-shadow: 0 0 2px rgba(#000, .2);\n  box-shadow: 0 0 2px rgba(#000, .2), inset 0 0 2px rgba(#000, .2);\n  font-family: 'IBM Plex Sans', sans-serif;\n\n  &:hover {\n    padding: 9px 16px;\n  }\n\n  &.dark {\n    color: #000;\n    border-color: #000;\n  }\n\n  &.dark.full {\n    background: #000;\n    color: #fff;\n  }\n}\n\n.menu {\n  z-index: 500;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 50px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.horizontal-split {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n}\n\n.vertical-split {\n  display: flex;\n  flex-grow: 1;\n  background: #000;\n  position: relative;\n}\n\n// TODO(liautaud): Create mixins and move everything\n// back in their respective files.\n.zoom-control, .location-control {\n  height: 40px;\n  border: 1px solid #bbb;\n  box-shadow: 0 0 3px rgba(#000, .2);\n  background: #fff;\n  display: flex;\n  margin: 20px 0;\n  flex-basis: content;\n\n  a {\n    outline: none;\n    height: 40px;\n    width: 39px;\n    font-family: 'Courier New';\n    font-size: 18pt;\n    line-height: 40px;\n    text-align: center;\n    text-decoration: none;\n    color: #000;\n  }\n\n  a:first-child {\n    border-right: 1px solid #bbb;\n  }\n}\n\n.zoom-control {\n  margin-bottom: 0;\n}\n\n.about-button {\n  display: block;\n  text-align: center;\n  height: 40px;\n  width: 80px;\n  line-height: 40px;\n  border: 1px solid #bbb;\n  border-top: 0;\n  box-shadow: 0 0 3px rgba(#000, .2);\n  background: #fff;\n  text-transform: uppercase;\n  color: #666;\n  font-size: 10pt;\n  text-decoration: none;\n}\n\n#espacesVerts {\n  height: 300px;\n  width: 100%;\n  margin-top: 25px;\n  margin-bottom: 5px;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=1e7b1f73&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import Vue from 'vue'\nimport VueI18n from 'vue-i18n'\nimport App from './App.vue'\n\n// Load the translation locales.\nimport fr from './locales/fr.json'\nimport en from './locales/en.json'\n\nVue.config.productionTip = false\nVue.use(VueI18n)\n\nnew Vue({\n  render: h => h(App),\n  i18n: new VueI18n({\n    locale: 'fr',\n    messages: {fr, en},\n  }),\n}).$mount('#app')\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Intro.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationControl.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ZoomControl.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tutorial.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tutorial.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}